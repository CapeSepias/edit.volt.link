{"version":3,"sources":["fluent/fluentBy.js","components/Header.module.css","components/edit/CoverphotoPicker.module.css","pages/Shortcode.module.css","components/edit/TranslatedInput.module.css","components/edit/HtmlInput.module.css","pages/App.module.css","components/edit/FancyInput.module.css","pages/Editor.module.css","locales lazy /^/.//.*/.ftl$/ groupOptions: {} namespace object","fluent/Localized.js","hooks/useUser.js","graphql/queries.js","graphql/mutations.js","hooks/useSaveBlock.js","components/Header.js","components/MultiButton.js","pages/Chooser.js","components/edit/UrlInput.js","components/edit/FancyInput.js","pages/Shortcode.js","hooks/useKeyPress.js","hooks/useLoadBlock.js","components/Popover.js","hooks/useOnOutsideClick.js","components/edit/TranslatedInput.js","components/edit/BlockMenu.js","components/edit/HtmlInput.js","components/edit/SharingEditor.js","components/edit/EmailInput.js","components/edit/PermissionsEditor.js","images/coverphotos/thumbs/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.png","images/coverphotos/thumbs/Aktion.png","images/coverphotos/thumbs/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.png","images/coverphotos/thumbs/Welcome-to-Volt.png","components/edit/CoverphotoPicker.js","components/edit/PropertiesEditor.js","components/edit/InlineEditorBlockText.js","components/edit/InlineEditorBlockButton.js","components/edit/InlineEditorBlockHeadline.js","components/edit/InlineEditorBlockDivider.js","components/edit/InlineEditorBlock.js","components/edit/ContentEditor.js","pages/Editor.js","hooks/useLoadBlocksByIds.js","components/view/ViewerHeadline.js","components/view/ViewerText.js","components/view/ViewerButton.js","components/view/ViewerDivider.js","pages/Viewer.js","pages/App.js","fluent/l10n.js","index.js","components/edit/PermissionsEditor.module.css","pages/Viewer.module.css","components/edit/SharingEditor.module.css","components/edit/PropertiesEditor.module.css","components/edit/InlineEditorBlock.module.css","components/edit/ContentEditor.module.css"],"names":["negotiateLanguages","require","fluentByObject","object","userLocales","supportedLocales","Object","keys","length","lookupedLocale","defaultLocale","strategy","fluentByArray","array","key","map","item","filter","Boolean","module","exports","fluentByAny","any","fallback","Array","isArray","result","value","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","Localized","props","elems","br","Fragment","children","withLocalization","Inner","l10n","React","useContext","FluentContext","createElement","globalSupportedLocales","thisSupportedLocales","locale","includes","currentLocales","getString","args","useLocalization","fluentBy","useUser","forceRefetch","useState","user","setUser","loggedIn","setLoggedIn","useEffect","window","hasOwnProperty","useUser_user","useUser_loggedIn","fetch","domains","backend","mode","credentials","response","json","data","status","username","email","split","catch","error","console","getBlock_Query","gql","getBlocksByType_Query","getBlocksByIds_Query","saveBlock_Mutation","useSaveBlock","apollo_client","useApolloClient","useSnackbar","enqueueSnackbar","closeSnackbar","useCallback","newBlock","final_resolve","snackbarKey","__typename","loadingDataPromise","mutate","mutation","variables","block","a","variant","preventDuplicate","autoHideDuration","_id","saveBlock","message","race","setTimeout","persist","Header","title","leftActions","rightActions","notificationBanner","className","classes","header","headerBar","MultiButton","ariaLabel","items","defaultValue","onChange","style","choosen","setChoosen","handleClick","event","newValue","target","dataset","display","icon","onClick","pointerEvents","verticalAlign","Chooser","leftHeaderActions","rightHeaderActions","type","setType","blocks","setBlocks","user_editable_links","editable","history","useHistory","queryBlocks","type2query","query","blocksByType","handleTypeChange","newType","createBlock","gottenBlock","push","margin","properties","text","description","to","url_regex","email_regex","is_email_not_url_regex","UrlInput","onBlur","onError","placeholder","setText","handleTextChange","schema_parts","schema","shift","after_schema","join","match","handleBlur","FancyInput","setError","callback","redirectLink","setRedirectLink","isSubmittable","setIsSubmittable","generateRedirectLink","onKeyup","addEventListener","removeEventListener","handleRedirectLink","use_as","redirect","method","headers","body","JSON","stringify","r","input","hideSubmitButton","flexGrow","flexDirection","useLoadBlock","loadedBlock","Popover","ref","handler","trigger","anchorRef","useRef","open","setOpen","paperRef","listener","current","contains","document","closePopover","Math","random","toString","substring","undefined","prevOpen","Portal","position","top","right","bottom","left","zIndex","cursor","Popper","anchorEl","transition","placement","disablePortal","modifiers","name","enabled","options","altBoundary","rootBoundary","padding","altAxis","tether","TransitionProps","Fade","transformOrigin","TranslatedInputContext","createContext","showTranslations","TranslatedInputProvider","filterByLocale","textArray","filtered","setShowTranslations","toggleShowTranslations","oldShowTranslations","currentLocale","setCurrentLocale","setCurrentLocaleExternal","newLocale","Provider","locales","useTranslatedInputContext","LocalesMenu","prefersDarkMode","matchMedia","matches","setLocale","popoverProps","Paper","sx","maxWidth","height","maxHeight","overflow","elevation","MenuList","autoFocus","width","marginTop","List","ListSubheader","whiteSpace","lineHeight","backgroundColor","thisLocale","index","MenuItem","selected","Divider","opacity","ListItemIcon","ListItemText","TranslatedInput","arrayWithLocales","setArrayWithLocales","currentText","t","handleChange","newTextValue","findIndex","best","translatedInput","translationHelp","toUpperCase","toggle_active","active","onRemoveRow","addRowBefore","addRowAfter","handleAddRowBefore","blockId","viewBlock","label","option","VerticalAlignTop","VerticalAlignBottom","VisibilityOff","Visibility","Delete","Close","getInLineRangeLength","element","whichLine","normalize","getSelection","selection","range","rangeCount","getRangeAt","clonedRange","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","content","cloneContents","rangeLength","childNodes","nodeType","detach","getCaretPosition","cs","getComputedStyle","paddingY","parseFloat","paddingTop","paddingBottom","borderY","borderTopWidth","borderBottomWidth","elementHeight","offsetHeight","offset","getOffset","caretOffset","getCaretOffset","inFirstLine","inLastLine","caretPositionFromStart","node","textContent","nodeName","getRangeLengthWithLinebreaks","textLength","innerText","caretPositionFromEnd","positionFromLineStart","positionFromStart","positionFromEnd","HtmlInput","linebreaks","onInputRef","onGoToPrevInput","onGoToNextInput","onSplitText","onMergeToPrevInput","onMergeToNextInput","inputRef","__html","fakeDefaultValue","setFakeDefaultValue","old_text","old_fakeDefaultValue","newHtmlValue","replace","innerHTML","trim","handleTextBlur","keyDownHandler","shiftKey","execCommand","preventDefault","caret","start","slice","end","texts","handlePaste","originalEvent","clipboardData","getData","onKeyDown","onInput","onPaste","rebuild_textarea","show_placeholder","contentEditable","dangerouslySetInnerHTML","SharingEditor","defaultBlock","onClose","newPath","setNewPath","setProperties","path","log","savePath","oldProperties","newProperties","action","viewStatistics","href","rel","click","Modal","hideBackdrop","backdrop","dialog","inputWrapper","linebreak","actions","marginInlineStart","marginInlineEnd","emails_regex","EmailInput","multiple","emails","LocalizedRole","role","RolesMenu","changeRole","removePermission","setAnchorEl","handleClose","currentTarget","MenuListProps","Edit","sortPermissions","permissions","owner","p","sort","b","localeCompare","special","other","PermissionsEditor","defaultPermissions","user_email","inputRepaintKey","setInputRepaintKey","setPermissions","newEmails","setNewEmails","newRole","setNewRole","setNewPermission","newPermissions","obj","obj_new","tmp_id","uuidv4","permission","unshift","addPermissions","newEmail","addNewPermissionFromInput","oldInputRepaintKey","doesNotHaveVoltEuropa","doesNotHavePublic","dialogsWrapper","emailInput","triggerProps","menuButton","KeyboardArrowDown","permissionRow","ownerInfo","coverphoto","no_image","backgroundImage","changeCoverphotoButton","marginBottom","vars","ratio","marginRight","marginLeft","volt_bonn_thumb","welcome_to_volt_thumb","plakatschlange_thumb","aktion_thumb","alt","src","addTmpIds","defaultProperties","updateProperty","propertyKey","newPropertyValue","propertyTypes","slug","link","imprint","privacy_policy","tags","main_headline","translatedInputProps","propertiesFrame","properties_row","InlineEditorBlockText","onSaveBlock","onAddRowAfter","publishTextChange","handleMergeToPrevInput","handleMergeToNextInput","InlineEditorBlockButton","setLink","publishChanges","InlineEditorBlockHeadline","InlineEditorBlockDivider","InlineEditorBlockInbetweenComponent","component","InlineEditorBlock","defaultContentConfig","reorderHandle","actionButton","loadBlock","setBlock","handleChange_Type","handleSaveBlock","block_input","form_active","form_deactivated","getLastLineStartNode","reverse","lastLineNode","childNode","thisChildNodes","moveCursorToOffsetInLine","contentEditableElement","lastLineStartNode","focus","lastLineStartNodeLength","createRange","setStart","collapse","sel","removeAllRanges","addRange","ContentEditor","contentConfigs","setContentConfigs","inputRefs","setInputRefs","newContentConfigs","saveInputRef","newInputRefs","goToPrevInput","prevInputRef","thisIndex","goToNextInput","nextInputRef","firstLineStartNode","getFirstLineStartNode","focusLastLine","lastInputRef","handleRowChange","newContentConfig","oldContentConfig","addRowByIndex","isNaN","new_rows","splice","filteredContentConfigs","contentConfig","Add","onDragEnd","destination","source","list","startIndex","endIndex","from","removed","reorder","droppableId","isDropDisabled","provided","innerRef","droppableProps","draggableId","isDragDisabled","disableInteractiveElementBlocking","shouldRespectForcePress","draggableProps","row","form","Tooltip","textAlign","inlineRowButton","dragHandleButton","dragHandleProps","attr","Editor","isSharingEditorOpen","setIsSharingEditorOpen","openSharingEditor","closeSharingEditor","isPermissionsEditorOpen","setIsPermissionsEditorOpen","openPermissionsEditor","closePermissionsEditor","loadedTheBlock","useParams","saveType","saveProperties","saveContent","newContent","savePermissions","manuallySaveEverything","editor","useLoadBlocksByIds","blocksByIds","ViewerHeadline","dir","ViewerText","ViewerButton","ViewerDivider","Viewer","loadingTheBlock","loadBlocksByIds","contentBlocks","setContentBlocks","loadedContentBlocks","contentBlocksOrdered","find","coverphoto_url","icon_url","app","spine_aligned","contentWrapper","flatMap","i","contentBlock","location","useLocation","customLocation","setCustomLocation","real_path","URLSearchParams","search","get","pathname","replaceState","drawerIsOpen","setDrawerIsOpen","toggleDrawer","oldOpen","iOS","navigator","test","userAgent","Menu","SwipeableDrawer","anchor","onOpen","disableBackdropTransition","disableDiscovery","ListItem","button","primary","encodeURIComponent","Logout","Login","Shortcode","de","en","fr","_supportedLocales_","_defaultLocale_","fetchMessages","default","messages","FluentResource","createMessagesGenerator","all","fetched","reduce","cur","assign","generateBundles","bundle","FluentBundle","addResource","f","AppLocalizationProvider","onLocaleChange","ReactLocalization","getDefaultBundles","bundles","setBundles","new_bundles","loadBundles","frontend","client","ApolloClient","uri","cache","InMemoryCache","defaultOptions","watchQuery","fetchPolicy","Start","languages","setUserLocales","umami","systemLocales","language","toLowerCase","trackEvent","handleLanguageChange","handleCurrentLocalesChange","useMediaQuery","theme","useMemo","createTheme","palette","ApolloProvider","ThemeProvider","anchorOrigin","vertical","horizontal","domRoot","getElementById","onLanguageChange","ReactDOM","render"],"mappings":"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","file":"static/js/main.beb92567.chunk.js","sourcesContent":["const { negotiateLanguages } = require('@fluent/langneg')\n\nfunction fluentByObject(object = {}, userLocales = ['en']){\n  const supportedLocales = Object.keys(object)\n\n  if (supportedLocales.length === 0) {\n    return null\n  }\n\n  const lookupedLocale = negotiateLanguages(\n    userLocales,\n    supportedLocales,\n    {\n      defaultLocale: supportedLocales[0],\n      strategy: 'lookup',\n    }\n  )\n\n  if (lookupedLocale.length === 0) {\n    return null\n  }\n\n  return object[lookupedLocale[0]]\n}\n\nfunction fluentByArray(array = [], userLocales = ['en'], key = 'locale') {\n  const supportedLocales = array.map(item => item[key]).filter(Boolean)\n\n  if (supportedLocales.length === 0) {\n    return null\n  }\n\n  const lookupedLocale = negotiateLanguages(\n    userLocales,\n    supportedLocales,\n    {\n      defaultLocale: supportedLocales[0],\n      strategy: 'lookup',\n    }\n  )\n\n  if (lookupedLocale.length === 0) {\n    return null\n  }\n\n  return array.filter(item => item[key] === lookupedLocale[0])\n}\n\nfunction fluentByAny(any = '', userLocales = ['en'], fallback = '') {\n  if (Array.isArray(any)) {\n    const result = fluentByArray(any, userLocales)\n    if (Array.isArray(result) && result.length > 0) {\n      any = result[0].value\n    }\n  } else if (typeof any === 'object') {\n    any = fluentByObject(any, userLocales)\n  }\n  if (typeof any !== 'string') {\n    any = fallback\n  }\n  return any\n}\n\nmodule.exports = {\n  fluentByObject,\n  fluentByArray,\n  fluentByAny,\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3mObx\",\"headerBar\":\"Header_headerBar__2YU41\",\"notificationBanner\":\"Header_notificationBanner__104SP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"coverphoto\":\"CoverphotoPicker_coverphoto__1mWB4\",\"no_image\":\"CoverphotoPicker_no_image__2DoZu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"Shortcode_input__Av6rm\",\"hideSubmitButton\":\"Shortcode_hideSubmitButton__mbXgB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"translatedInput\":\"TranslatedInput_translatedInput__2vy_n\",\"content\":\"TranslatedInput_content__2-c_U\",\"translationHelp\":\"TranslatedInput_translationHelp__2_0uC\",\"changeLocaleButton\":\"TranslatedInput_changeLocaleButton__19h6P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rebuild_textarea\":\"HtmlInput_rebuild_textarea__ZfRzZ\",\"show_placeholder\":\"HtmlInput_show_placeholder__hM8g2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3hbGO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"FancyInput_error__2DFWE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editor\":\"Editor_editor__2hX0g\",\"loadingContent\":\"Editor_loadingContent__2fqdK\",\"editor_form_row\":\"Editor_editor_form_row__17Pul\"};","var map = {\n\t\"./de.ftl\": [\n\t\t225,\n\t\t3\n\t],\n\t\"./en.ftl\": [\n\t\t226,\n\t\t4\n\t],\n\t\"./fr.ftl\": [\n\t\t227,\n\t\t5\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 216;\nmodule.exports = webpackAsyncContext;","import React from 'react'\nimport {\n  Localized as LocalizedOriginal,\n  // withLocalization,\n} from '@fluent/react'\nimport { negotiateLanguages } from '@fluent/langneg'\n\nimport { FluentContext } from '../../node_modules/@fluent/react/esm/context.js'\nimport fluentBy from './fluentBy.js'\n\nconst Localized = props => (\n  <LocalizedOriginal\n    key={props.id}\n    {...props}\n    elems={{\n      br: <br />,\n      ...props.elems,\n    }}\n  >\n    <React.Fragment>{props.children}</React.Fragment>\n  </LocalizedOriginal>\n)\n\n// A custom withLocalization to have an empty fallback.\n// It is nearly identical to the original.\nfunction withLocalization(Inner) {\n  function WithLocalization(props) {\n    const l10n = React.useContext(FluentContext)\n\n    const getString = (id, args, fallback) => l10n.getString(id, args, fallback || ' ')\n\n    const fluentByObject = (object, fallback) => {\n      if (!(!!fallback)) {\n        fallback = null\n      }\n\n      if (!!object) {\n        const globalSupportedLocales = l10n.supportedLocales || []\n        const thisSupportedLocales = Object.keys(object).filter(locale => globalSupportedLocales.includes(locale))\n\n        const currentLocales = negotiateLanguages(\n          l10n.userLocales,\n          thisSupportedLocales,\n          { defaultLocale: l10n.defaultLocale }\n        )\n\n        for (const locale of currentLocales) {\n          if (!!object[locale]) {\n            return object[locale]\n          }\n        }\n\n        return fallback\n      }\n\n      return fallback\n    }\n\n    return React.createElement(Inner, { fluentByObject, getString, ...props })\n  }\n  return WithLocalization\n}\n\nfunction useLocalization() {\n  const l10n = React.useContext(FluentContext)\n\n  const getString = (id, args, fallback) => l10n.getString(id, args, fallback || ' ')\n  const fluentByAny = (any = [], fallback = '') => fluentBy.fluentByAny(any, l10n.userLocales, fallback)\n\n  return {\n    ...l10n,\n    getString,\n    fluentByAny,\n  }\n}\n\nexport {\n  negotiateLanguages,\n  withLocalization,\n  Localized,\n  Localized as default,\n  useLocalization,\n}\n\n/*\n\nimport { Localized, withLocalization } from '../Localized/'\n\n<Localized id=\"translation_id\" />\nexport default withLocalization(componentName)\n\n\nimport Localized from '../Localized/'\n<Localized id=\"translation_id\" />\n\nimport { withLocalization } from '@fluent/react'\nexport default withLocalization(componentName)\n\n*/\n","import { useState, useEffect } from 'react'\n\nexport default function useUser(forceRefetch = false) {\n  const [user, setUser] = useState({})\n  const [loggedIn, setLoggedIn] = useState(false)\n\n  useEffect(() => {\n    if (forceRefetch !== true && window.hasOwnProperty('useUser_user') && window.hasOwnProperty('useUser_loggedIn')) {\n      setUser(window.useUser_user)\n      setLoggedIn(window.useUser_loggedIn)\n    }else{\n      fetch(`${window.domains.backend}user.json`, {\n        mode: 'cors',\n        credentials: 'include',\n      })\n        .then(response => response.json())\n        .then(data => {\n          if (\n            !!data\n            && !!data.user\n            && !!data.user.id\n            && !!data.user.status\n          ) {\n            data.user.username = (!!data.user.email ? data.user.email || '' : '').split('@')[0]\n\n            window.useUser_user = data.user\n            window.useUser_loggedIn = true\n            setUser(data.user)\n            setLoggedIn(true)\n          } else {\n            window.useUser_user = {}\n            window.useUser_loggedIn = false\n            setUser({})\n            setLoggedIn(false)\n          }\n        })\n        .catch(error => console.error(error))\n    }\n  }, [forceRefetch, setUser, setLoggedIn])\n\n  return {\n    ...user,\n    loggedIn,\n  }\n}\n","import { gql } from '@apollo/client'\n\nexport const getBlock_Query = gql`\n  query getBlock ($_id: ID!) {\n    block (_id: $_id) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n      }\n\t\t  parent\n\t\t  metadata {\n        lastModified\n        created\n      }\n    }\n  }\n`\nexport const getBlockBySlug_Query = gql`\n  query getBlockBySlug ($slug: ID!) {\n    blockBySlug (slug: $slug) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n      }\n\t\t  parent\n\t\t  metadata {\n        lastModified\n        created\n      }\n      permissions {\n        email\n        role\n      }\n    }\n  }\n`\n\nexport const getBlocksByType_Query = gql`\n  query getBlocksByType ($type: String!) {\n    blocksByType (type: $type) {\n      _id\n      type\n      properties\n      content {\n        blockId\n      }\n      parent\n      metadata {\n        lastModified\n        created\n      }\n    }\n  }\n`\n\nexport const getBlocksByIds_Query = gql`\n  query getBlocksByIds ($ids: [ID]) {\n    blocksByIds(ids: $ids) {\n      _id\n      type\n      properties\n    \tcontent {\n      \tblockId\n    \t}\n      parent\n      metadata {\n        lastModified\n        created\n      }\n    }\n  }\n`\n\n","import { gql } from '@apollo/client'\n\nexport const saveBlock_Mutation = gql`\n  mutation saveBlock ($block: InputBlock!) {\n    saveBlock (block: $block)\n  }\n`\n","import { useCallback } from 'react'\n\nimport { useLocalization } from '../fluent/Localized.js'\n\nimport { useApolloClient } from '@apollo/client'\nimport { saveBlock_Mutation } from '../graphql/mutations.js'\n\nimport { useSnackbar } from 'notistack'\n\nfunction useSaveBlock() {\n  const { getString } = useLocalization()\n\n  const apollo_client = useApolloClient()\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar()\n\n  const handleSaveBlock = useCallback((newBlock) => {\n    return new Promise(final_resolve => {\n      let snackbarKey = null\n\n      newBlock = {...newBlock}\n\n      if (\n        typeof newBlock === 'object'\n        && newBlock !== null\n        && newBlock.hasOwnProperty('__typename')\n      ) {\n        delete newBlock.__typename\n      }\n\n      const loadingDataPromise = new Promise(resolve => {\n        apollo_client.mutate({\n          mutation: saveBlock_Mutation,\n          variables: {\n            block: newBlock\n          },\n        })\n          .then(async ({ data }) => {\n            resolve('got-data')\n\n            if (snackbarKey !== null) {\n              closeSnackbar(snackbarKey)\n            }\n\n            if (typeof data.error === 'string') {\n              if (data.error === 'no_edit_permission') {\n                enqueueSnackbar(getString('path_editor_edit_permission_error'), {\n                  variant: 'error',\n                  preventDuplicate: true,\n                  autoHideDuration: 2000,\n                })\n              } else {\n                enqueueSnackbar('' + data.error, {\n                  variant: 'error',\n                  preventDuplicate: true,\n                  autoHideDuration: 2000,\n                })\n              }\n            } else {\n              final_resolve({\n                ...newBlock,\n                _id: data.saveBlock,\n              })\n\n              enqueueSnackbar(getString('path_editor_status_saved'), {\n                variant: 'success',\n                preventDuplicate: false,\n                autoHideDuration: 2000,\n              })\n            }\n          })\n          .catch(async error => {\n            console.error(error)\n            resolve('got-error')\n\n            if (snackbarKey !== null) {\n              closeSnackbar(snackbarKey)\n            }\n\n            enqueueSnackbar(getString('path_editor_status_error_while_saving', {\n              error: error.message,\n            }), {\n              variant: 'error',\n              preventDuplicate: true,\n              autoHideDuration: 2000,\n            })\n          })\n      })\n\n      // Show a loading-info-snackbar if loading the data takes too long.\n      Promise.race([\n        new Promise(resolve => {\n          setTimeout(() => {\n            resolve('show-loading')\n          }, 300)\n        }),\n        loadingDataPromise,\n      ])\n        .then(response => {\n          if (response === 'show-loading') {\n            snackbarKey = enqueueSnackbar(getString('path_editor_status_started_saving'), {\n              persist: true,\n              preventDuplicate: true,\n            })\n          }\n        })\n        .catch(error => console.error)\n\n    })\n  }, [\n    enqueueSnackbar,\n    closeSnackbar,\n    apollo_client,\n    getString,\n  ])\n\n  return handleSaveBlock\n}\n\nexport default useSaveBlock\n","import classes from './Header.module.css'\n\nexport default function Header({ title, leftActions, rightActions, notificationBanner }) {\n  return <header className={classes.header}>\n    <div className={classes.headerBar}>\n      {leftActions}\n      <h2>{title}</h2>\n      {rightActions}\n    </div>\n    {\n      !!notificationBanner\n        ? <div className={classes.notificationBanner}>{notificationBanner}</div>\n        : null\n    }\n  </header>\n}\n","import { useState, useCallback, useEffect } from 'react'\n\nfunction MultiButton({ ariaLabel, items, defaultValue, onChange, style, className }) {\n  const [choosen, setChoosen] = useState()\n\n  useEffect(() => setChoosen(defaultValue), [defaultValue, setChoosen])\n\n  const handleClick = useCallback(event => {\n    const newValue = event.target.dataset.value\n    setChoosen(newValue)\n    if (onChange) {\n      onChange(newValue)\n    }\n  }, [setChoosen, onChange])\n\n  return <div\n    aria-label={ariaLabel}\n    className={'buttonRow ' + (className || '')}\n    style={{\n      display: 'inline-block',\n      ...style\n    }}\n  >\n    {\n      items.map(item => {\n        const value = item.value\n        const title = item.title\n        const icon = item.icon || null\n        return <button\n          key={value+'_'+title}\n          className={`${choosen === value ? 'choosen' : ''} ${!!icon ? 'hasIcon' : ''}`}\n          onClick={handleClick}\n          data-value={value}\n        >\n          <span style={{pointerEvents: 'none'}}>\n            {!!icon ? icon : null}\n            {!!title ? <span style={{verticalAlign: 'middle'}}>{title}</span> : null}\n          </span>\n        </button>\n      })\n    }\n  </div>\n}\n\nexport default MultiButton\n","import { useState, useCallback, useEffect } from 'react'\n// import classes from './Chooser.module.css'\n\nimport {\n  InsertDriveFileSharp as PageIcon,\n  LinkSharp as RedirectIcon,\n  PersonSharp as PersonIcon,\n  // Crop75Sharp as ButtonIcon,\n  // TitleSharp as HeadlineIcon,\n  // NotesSharp as TextIcon,\n  // Remove as DividerIcon,\n} from '@mui/icons-material'\n\nimport { useApolloClient } from '@apollo/client'\nimport { getBlocksByType_Query } from '../graphql/queries'\nimport useSaveBlock from '../hooks/useSaveBlock.js'\n\nimport { Link, useHistory } from 'react-router-dom'\n\nimport { Localized, useLocalization } from '../fluent/Localized.js'\n// import useKeyPress from '../hooks/useKeyPress.js'\nimport useUser from '../hooks/useUser.js'\nimport Header from '../components/Header.js'\nimport MultiButton from '../components/MultiButton.js'\n\nfunction Chooser({ leftHeaderActions, rightHeaderActions }) {\n  const { getString, fluentByAny } = useLocalization()\n  const apollo_client = useApolloClient()\n\n  const [type, setType] = useState('page')\n  const [blocks, setBlocks] = useState([])\n  const saveBlock = useSaveBlock()\n\n  const user = useUser()\n  const user_editable_links = (user.editable || [])\n\n  const history = useHistory()\n\n  const queryBlocks = useCallback(type2query => {\n    apollo_client.query({\n      query: getBlocksByType_Query,\n      variables: {\n        type: type2query,\n      },\n    })\n      .then(async ({ data }) => {\n        if (typeof data.error === 'string' || !data.blocksByType) {\n          console.error('error', data.error)\n        } else {\n          setBlocks(data.blocksByType || [])\n        }\n      })\n      .catch(async error => {\n        console.error('error', error)\n      })\n  }, [ apollo_client, setBlocks ])\n\n  useEffect(() => {\n    queryBlocks(type)\n  }, [ queryBlocks, type ])\n\n  const handleTypeChange = useCallback(newType => {\n    setType(newType)\n    if (\n      typeof newType === 'string'\n      && newType !== ''\n      && newType !== type\n    ) {\n      queryBlocks(newType)\n    }\n  }, [ type, setType, queryBlocks ])\n\n  const createBlock = useCallback(() => {\n    saveBlock({ type })\n      .then(gottenBlock => {\n        history.push(`/edit/${gottenBlock._id}`)\n      })\n      .catch(error => {\n        console.error(error)\n      })\n  }, [ saveBlock, history, type ])\n\n  /*\n  useKeyPress(['Enter'], () => {\n    history.push(`/edit/${value}`)\n  })\n\n  const handleCheckIfPathExists = useCallback(event => {\n    const newValue = (event.target.value || '').toLowerCase()\n    setValue(newValue)\n\n    const forbidden_letters = (forbidden.letters || '').split('')\n    const newValue_split = (newValue || '').split('')\n    const forbidden_letters_filtered = forbidden_letters.filter(value => !newValue_split.includes(value))\n\n    const forbidden_codes = forbidden.codes || []\n    const value_is_a_forbidden_code = forbidden_codes.includes(newValue)\n\n    if (value_is_a_forbidden_code) {\n      setAlreadyExists(null)\n      setError('This path is not allowed.')\n    } else if (forbidden_letters_filtered.length < forbidden_letters.length) {\n      setAlreadyExists(null)\n      setError('This path contains forbidden characters.')\n    } else if (newValue.startsWith('volt')) {\n      setAlreadyExists(null)\n      setError('A path can\\'t start with \"volt\".')\n    } else if (newValue === '') {\n      setAlreadyExists(null)\n      setError('')\n    } else {\n      setError('')\n      fetch(`${window.domains.backend}quickcheck/${newValue}`, {\n        mode: 'cors',\n        credentials: 'include',\n      })\n        .then(response => response.json())\n        .then(data => {\n          if (data.allowed === false) {\n            setAlreadyExists(null)\n            setError('You are not allowed to edit this code.')\n          } else {\n            if (data.exists === true) {\n              setAlreadyExists(true)\n              setError('')\n            } else if (newValue_split.includes('.')) {\n              setAlreadyExists(null)\n              setError('Codes with a dot are restricted to people. Please contact thomas.rosen@volteuropa.org to use volt.link for your Volt Account.')\n            } else {\n              setAlreadyExists(false)\n              setError('')\n            }\n          }\n        })\n        .catch(error => {\n          console.error(error)\n          setAlreadyExists(false)\n        })\n    }\n  }, [setValue, setAlreadyExists, forbidden.letters, forbidden.codes])\n\n  useEffect(() => {\n    fetch(`${window.domains.backend}forbidden_codes/`, {\n      mode: 'cors',\n      credentials: 'include',\n    })\n      .then(response => response.json())\n      .then(data => {\n        setForbidden(data)\n      })\n      .catch(error => {\n        console.error(error)\n        setForbidden({})\n      })\n  }, [setForbidden])\n  */\n\n  return <div>\n    <Header\n      title=\"volt.link\"\n      leftActions={leftHeaderActions || null}\n      rightActions={rightHeaderActions || null}\n    />\n\n    <MultiButton\n      onChange={handleTypeChange}\n      defaultValue={type}\n      items={[\n        { value: 'page', icon: <PageIcon className=\"icon\"/>, title: getString('block_menu_type_label_page') },\n        { value: 'redirect', icon: <RedirectIcon className=\"icon\" />, title: getString('block_menu_type_label_redirect') },\n        { value: 'person', icon: <PersonIcon className=\"icon\" />, title: getString('block_menu_type_label_person') },\n        // { value: 'button', icon: <ButtonIcon className=\"icon\" />, title: getString('block_menu_type_label_button') },\n        // { value: 'headline', icon: <HeadlineIcon className=\"icon\" />, title: getString('block_menu_type_label_headline') },\n        // { value: 'text', icon: <TextIcon className=\"icon\" />, title: getString('block_menu_type_label_text') },\n        // { value: 'divider', icon: <DividerIcon className=\"icon\" />, title: getString('block_menu_type_label_divider') },\n      ]}\n    />\n\n    <br />\n    <br />\n    <button className=\"green\" onClick={createBlock} style={{ margin: '0' }}>\n      <Localized id={'create_new_'+type} />\n    </button>\n\n    {\n      user_editable_links.length > 0\n        ? <>\n          <div className=\"buttonRow usesLinks\">\n            {\n              blocks\n              .map(block => {\n                const title = fluentByAny(block.properties.text, getString('placeholder_main_headline'))\n                const description = fluentByAny(block.properties.description, '')\n                return <div key={block._id}>\n                  <hr />\n                  { title !== '' ? <h2>{title}</h2> : null }\n                  { description !== '' ? <p>{description}</p> : null }\n                  <Link to={`/edit/${block._id}`}>\n                    <button><Localized id=\"edit_block\" /></button>\n                  </Link>\n                  <Link to={`/view/${block._id}`}>\n                    <button><Localized id=\"view_block\" /></button>\n                  </Link>\n                </div>\n              })\n            }\n          </div>\n        </>\n        : null\n    }\n  </div>\n}\n\nexport default Chooser\n\n/*\n\n\n    <input\n      type=\"text\"\n      placeholder=\"title\"\n      style={{\n        marginRight: '0',\n        marginLeft: '0'\n      }}\n    />\n    <textarea\n      placeholder=\"description\"\n      style={{\n        marginRight: '0',\n        marginLeft: '0'\n      }}\n    />\n*/\n","import { useCallback, useState } from 'react'\n\nconst url_regex = /^([A-Z0-9+-.]+:(?:\\/\\/)?)[\\w\\u00C0-\\u00FF_.-]+(?:\\.[\\w\\u00C0-\\u00FF_.-]+)+[\\w\\u00C0-\\u00FF_~:/?#[\\]!%$&'()@*+,;=.-]+$/gui\nconst email_regex = /^(?:(?:[^<>()[\\]\\\\.,;:\\s@\"]+(?:\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(?:\".+\"))@(?:(?:\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})|(?:(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,})\\.?)$/gui\nconst is_email_not_url_regex = /^[^:/]+@.+$/gui\n\nfunction UrlInput({\n  defaultValue = '',\n  onChange,\n  onBlur,\n  onError,\n  placeholder = 'https://',\n  style,\n  className\n}) {\n  const [text, setText] = useState(defaultValue)\n\n  const handleTextChange = useCallback((event) => {\n    const value = event.target.value || ''\n    // let isSubmittable = false\n    let error = ''\n\n    if (value !== '') {\n      const schema_parts = value.split(':')\n      const schema = schema_parts.shift()\n      const after_schema = schema_parts.join(':')\n\n      if (schema === 'tel') {\n        // isSubmittable = true\n      } else if (schema === 'mailto' || value.match(is_email_not_url_regex)) {\n        if (after_schema.match(email_regex)) {\n          // isSubmittable = true\n        } else {\n          error = 'invalid_mailto_url'\n        }\n      } else {\n        if (value.match(url_regex)) {\n          // isSubmittable = true\n        } else {\n          error = 'invalid_url'\n        }\n      }\n    }\n\n    if (onChange) {\n      onChange(value)\n    }\n\n    if (onError) {\n      onError(error)\n    }\n\n    setText(value)\n  }, [onChange, onError])\n\n  const handleBlur = useCallback(() => {\n    if (onBlur) {\n      onBlur(text)\n    }\n  }, [onBlur, text])\n\n  return <input\n    type=\"url\"\n    onChange={handleTextChange}\n    onBlur={handleBlur}\n    defaultValue={defaultValue}\n    placeholder={placeholder}\n    style={style}\n    className={className}\n  />\n}\n\nexport default UrlInput\n","import { useState } from 'react'\n\nimport { Localized } from '../../fluent/Localized.js'\nimport classes from './FancyInput.module.css'\n\nfunction FancyInput({ children, className, style, ...props }) {\n  const [error, setError] = useState('')\n\n  return <div\n    className={className}\n    style={style}\n  >\n    {children({ setError })}\n    {error ? <div className={classes.error}><Localized id={'error_'+error} /></div> : null}\n  </div>\n}\n\nexport default FancyInput\n","import React, { useState, useCallback } from 'react'\nimport classes from './Shortcode.module.css'\n\nimport { useHistory } from 'react-router-dom'\n\nimport { withLocalization, Localized } from '../fluent/Localized.js'\nimport useKeyPress from '../hooks/useKeyPress.js'\nimport Header from '../components/Header.js'\nimport UrlInput from '../components/edit/UrlInput.js'\nimport FancyInput from '../components/edit/FancyInput.js'\n\nfunction Redirect({ getString, rightHeaderActions }) {\n  const history = useHistory()\n  const [redirectLink, setRedirectLink] = useState('')\n  const [isSubmittable, setIsSubmittable] = useState(false)\n  const [error, setError] = useState('')\n\n  useKeyPress(['Enter'], () => {\n    if (isSubmittable) {\n      generateRedirectLink()\n    }\n  })\n\n  const handleRedirectLink = useCallback(value => {\n    setRedirectLink(value)\n\n    if (value === '') {\n      setIsSubmittable(false)\n    } else {\n      setIsSubmittable(true)\n    }\n  }, [setRedirectLink, setIsSubmittable])\n\n  const generateRedirectLink = useCallback(() => {\n    if (isSubmittable) {\n      const data = {\n        use_as: 'redirect',\n        redirect: redirectLink,\n      }\n\n      fetch(`${window.domains.backend}set_redirect`, {\n        mode: 'cors',\n        credentials: 'include',\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json;charset=utf-8'\n        },\n        body: JSON.stringify(data)\n      })\n        .then(r => r.json())\n        .then(async data => {\n          if (typeof data.error === 'string') {\n            console.error(data.error)\n            setError(data.error)\n          } else if (typeof data.code === 'string') {\n            history.push(`/edit/${data.code}`)\n          } else {\n            setError('Undefined Error. Please contact thomas.rosen@volteuropa.org')\n          }\n        })\n        .catch(async error => {\n          console.error(error)\n          setError(error)\n        })\n    }\n  }, [isSubmittable, redirectLink, history])\n\n  return <div>\n    <Header\n      title={<Localized id=\"create_shortcode_headline\" />}\n      rightActions={rightHeaderActions || null}\n    />\n\n    <p><Localized id=\"create_shortcode_info\" /></p>\n\n    <div className={`${classes.input} ${isSubmittable === true ? '' : classes.hideSubmitButton }`}>\n      <FancyInput\n        style={{ flexGrow: '1', display: 'flex', flexDirection: 'column' }}\n      >\n        {({ setError }) => (\n          <UrlInput\n            onError={setError}\n            placeholder={getString('create_shortcode_url_placeholder')}\n            onChange={handleRedirectLink}\n          />\n        )}\n      </FancyInput>\n      {\n        isSubmittable === true\n          ? <button className=\"green\" onClick={generateRedirectLink}>\n              <Localized id=\"create_shortcode_url_submit\" />\n            </button>\n          : null\n      }\n    </div>\n\n    {\n      error !== ''\n        ? <>\n          <h3 className=\"red\"><Localized id=\"headline_errors\" /></h3>\n          <p>{error}</p>\n        </>\n        : null\n    }\n  </div>\n}\n\nexport default withLocalization(Redirect)\n","import { useEffect } from 'react'\n\nexport default function useKeyPress(keys, callback) {\n  useEffect(() => {\n    function onKeyup(event) {\n      if (keys.includes(event.key)) {\n        callback(event)\n      }\n    }\n    window.addEventListener('keyup', onKeyup)\n    return () => window.removeEventListener('keyup', onKeyup)\n  }, [keys, callback])\n}\n","import { useCallback } from 'react'\n\nimport { useLocalization } from '../fluent/Localized.js'\n\nimport { useApolloClient } from '@apollo/client'\nimport { getBlock_Query } from '../graphql/queries'\n\nimport { useSnackbar } from 'notistack'\n\nfunction useLoadBlock() {\n  const { getString } = useLocalization()\n\n  const apollo_client = useApolloClient()\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar()\n\n  const handleLoadBlock = useCallback(_id => {\n    return new Promise(final_resolve => {\n    let snackbarKey = null\n\n    if (!_id || _id === '') {\n      final_resolve({\n        type: 'text',\n      })\n    } else {\n      const loadingDataPromise = new Promise(resolve => {\n        apollo_client.query({\n          query: getBlock_Query,\n          variables: {\n            _id,\n          },\n        })\n          .then(async ({ data }) => {\n            resolve('got-data')\n\n            if (snackbarKey !== null) {\n              closeSnackbar(snackbarKey)\n            }\n\n            if (typeof data.error === 'string' || !data.block) {\n              if (data.error === 'no_edit_permission') {\n                enqueueSnackbar(getString('path_editor_edit_permission_error'), {\n                  variant: 'error',\n                  preventDuplicate: true,\n                  autoHideDuration: 5000,\n                })\n              } else {\n                enqueueSnackbar('' + data.error, {\n                  variant: 'error',\n                  preventDuplicate: true,\n                  autoHideDuration: 5000,\n                })\n              }\n            }else{\n              const loadedBlock = data.block\n              final_resolve(loadedBlock)\n            }\n          })\n          .catch(async error => {\n            console.error('error', error)\n            resolve('got-error')\n\n            if (snackbarKey !== null) {\n              closeSnackbar(snackbarKey)\n            }\n\n            enqueueSnackbar('[could not load data] '+error.message, {\n              variant: 'error',\n              preventDuplicate: true,\n              autoHideDuration: 2000,\n            })\n          })\n      })\n\n      // Show a loading-info-snackbar if loading the data takes too long.\n      Promise.race([\n        new Promise(resolve => {\n          setTimeout(() => {\n            resolve('show-loading')\n          }, 300)\n        }),\n        loadingDataPromise,\n      ])\n        .then(response => {\n          if (response === 'show-loading') {\n            snackbarKey = enqueueSnackbar(getString('path_editor_status_started_saving'), {\n              persist: true,\n              preventDuplicate: true,\n            })\n          }\n        })\n        .catch(error => console.error)\n    }\n    })\n  }, [\n    enqueueSnackbar,\n    closeSnackbar,\n    apollo_client,\n    getString,\n  ])\n\n  return handleLoadBlock\n}\n\nexport default useLoadBlock\n","import { useState, useRef } from 'react'\n\nimport {\n  Portal,\n  Fade,\n  Popper,\n} from '@mui/material'\n\nimport useOnOutsideClick from '../hooks/useOnOutsideClick.js'\n\nconst randomString = () => (Math.random() + 1).toString(36).substring(7)\n\nfunction Popover ({\n  trigger,\n  children = () => {},\n}) {\n  const anchorRef = useRef(null)\n  const [open, setOpen] = useState(false)\n\n  const paperRef = useRef(null)\n  useOnOutsideClick(paperRef, () => {\n    setOpen(false)\n  })\n\n  const handlePopoverToggleClick = event => {\n    setOpen((prevOpen) => !prevOpen)\n  }\n\n  const closePopover = () => {\n    setOpen(false)\n  }\n\n  const id = open ? 'popover-'+randomString() : undefined\n\n  return <>\n\n    {trigger({\n      ref: anchorRef,\n      'aria-describedby': id,\n      onClick: handlePopoverToggleClick,\n    })}\n\n  <Portal>\n    <div\n      style={{\n        display: (open ? 'block' : 'none'),\n        position: 'fixed',\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        zIndex: 1000,\n        cursor: 'pointer',\n      }}\n    />\n\n    <Popper\n      id={id}\n      open={open}\n      anchorEl={anchorRef.current}\n      transition\n      placement=\"bottom-start\"\n      disablePortal={true}\n      modifiers={[\n        {\n          name: 'flip',\n          enabled: true,\n          options: {\n            altBoundary: true,\n            rootBoundary: 'viewport',\n            padding: 8,\n          },\n        },\n        {\n          name: 'preventOverflow',\n          enabled: true,\n          options: {\n            altAxis: true,\n            altBoundary: true,\n            tether: true,\n            rootBoundary: 'viewport',\n            padding: 8,\n          },\n        },\n      ]}\n      style={{\n        zIndex: 1000,\n      }}\n    >\n      {({ TransitionProps }) => (\n        <Fade {...TransitionProps}>\n          <div>\n          {\n            !!children && typeof children === 'function'\n            ? children({\n              ref: paperRef,\n              style: {\n                transformOrigin: 'top left',\n              },\n              closePopover,\n            })\n            : null\n          }\n          </div>\n        </Fade>\n      )}\n    </Popper>\n\n    </Portal>\n  </>\n}\n\nexport default Popover\n","import { useEffect } from 'react'\n\nexport default function useOnOutsideClick(ref, handler) {\n  useEffect(\n    () => {\n      const listener = (event) => {\n        // Do nothing if clicking ref's element or descendent elements\n        if (!ref.current || ref.current.contains(event.target)) {\n          return\n        }\n\n        handler(event)\n      }\n\n      document.addEventListener(\"mousedown\", listener)\n      document.addEventListener(\"touchstart\", listener)\n\n      return () => {\n        document.removeEventListener(\"mousedown\", listener)\n        document.removeEventListener(\"touchstart\", listener)\n      }\n    },\n    // Add ref and handler to effect dependencies\n    // It's worth noting that because passed in handler is a new ...\n    // ... function on every render that will cause this effect ...\n    // ... callback/cleanup to run every render. It's not a big deal ...\n    // ... but to optimize you can wrap handler in useCallback before ...\n    // ... passing it into this hook.\n    [ref, handler]\n  )\n}\n","import React, {\n  useState,\n  useEffect,\n  useCallback,\n  createContext,\n  useContext,\n} from 'react'\n\nimport { Localized, useLocalization } from '../../fluent/Localized.js'\nimport { fluentByArray } from '../../fluent/fluentBy.js'\n\nimport {\n  Paper,\n  MenuList,\n  MenuItem,\n  Divider,\n  ListItemIcon,\n  ListItemText,\n  List,\n  ListSubheader,\n} from '@mui/material'\n\nimport {\n  CloseSharp as CloseIcon,\n  Visibility as ShowIcon,\n  VisibilityOff as HideIcon,\n} from '@mui/icons-material'\n\nimport Popover from '../Popover.js'\n\nimport classes from './TranslatedInput.module.css'\n\nconst TranslatedInputContext = createContext({\n  locale: 'en',\n  showTranslations: false,\n})\n\n\nfunction TranslatedInputProvider({ children }) {\n  const {\n    userLocales = [],\n    supportedLocales = [],\n    defaultLocale = 'en',\n  } = useLocalization()\n\n  const filterByLocale = useCallback(textArray => {\n    const filtered = fluentByArray(textArray, userLocales, 'locale')\n\n    if (Array.isArray(filtered)) {\n      return filtered\n    }\n\n    return []\n  }, [\n    userLocales,\n  ])\n\n  const [showTranslations, setShowTranslations] = useState(false)\n\n  const toggleShowTranslations = useCallback(() => {\n    setShowTranslations(oldShowTranslations => !oldShowTranslations)\n  }, [ setShowTranslations ])\n\n  const [currentLocale, setCurrentLocale] = useState(userLocales[0] || supportedLocales[0] || defaultLocale)\n\n  const setCurrentLocaleExternal = useCallback(newLocale => {\n    setCurrentLocale(newLocale)\n    setShowTranslations(true)\n  }, [ setCurrentLocale, setShowTranslations ])\n\n  return (\n    <TranslatedInputContext.Provider value={{\n      currentLocale,\n      setCurrentLocale: setCurrentLocaleExternal,\n      locales: supportedLocales,\n      filterByLocale,\n      showTranslations,\n      toggleShowTranslations,\n    }}>\n      {children}\n    </TranslatedInputContext.Provider>\n  )\n}\n\nfunction useTranslatedInputContext() {\n  return useContext(TranslatedInputContext)\n}\n\nfunction LocalesMenu({ trigger }) {\n  const { getString } = useLocalization()\n\n  let prefersDarkMode = false\n  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n    prefersDarkMode = true\n  }\n\n  const {\n    currentLocale,\n    setCurrentLocale,\n    showTranslations,\n    toggleShowTranslations,\n  } = useTranslatedInputContext()\n\n  const {\n    supportedLocales = [],\n  } = useLocalization()\n\n  const setLocale = useCallback(newLocale => {\n    if (typeof setCurrentLocale === 'function') {\n      setCurrentLocale(newLocale)\n    }\n  }, [ setCurrentLocale ])\n\n  return <>\n  <Popover trigger={trigger}>\n    {({closePopover, ...popoverProps}) => (\n        <Paper\n          {...popoverProps}\n          sx={{\n            maxWidth: 380,\n            height: 'auto',\n            maxHeight: 'calc(100vh - 32px)',\n            overflow: 'auto',\n          }}\n          elevation={8}\n        >\n          <MenuList\n            autoFocus={true}\n            style={{\n              width: '100%',\n              maxWidth: '100%',\n              marginTop: '-8px',\n            }}\n          >\n            <List\n              style={{\n                width: '100%',\n                maxWidth: '100%',\n                marginTop: '-8px',\n              }}\n            >\n              <ListSubheader\n                style={{\n                  whiteSpace: 'nowrap',\n                  lineHeight: '1',\n                  margin: '-4px 0 0 0',\n                  padding: '12px 16px 12px',\n                  backgroundColor: prefersDarkMode ? '#2e2e2e' : '#fff',\n                }}\n              >\n                <Localized id=\"locale_menu_choose_locale_label\" />\n              </ListSubheader>\n\n              <div style={{height: '4px'}}></div>\n\n              {\n                supportedLocales\n                .map((thisLocale, index) => (\n                  <MenuItem\n                    key={thisLocale}\n                    selected={thisLocale === currentLocale}\n                    onClick={() => setLocale(thisLocale)}\n                  >\n                    {getString('locale_'+thisLocale)}\n                  </MenuItem>\n              ))}\n            </List>\n\n            <Divider style={{opacity: 0.2}} />\n\n            <MenuItem style={{marginTop:'8px'}} onClick={toggleShowTranslations}>\n              <ListItemIcon>\n                {\n                  showTranslations\n                  ? <HideIcon />\n                  : <ShowIcon />\n                }\n              </ListItemIcon>\n              <ListItemText>\n                {\n                  showTranslations\n                  ? <Localized id=\"locale_menu_hide_translation_help_label\" />\n                  : <Localized id=\"locale_menu_show_translation_help_label\" />\n                }\n              </ListItemText>\n            </MenuItem>\n\n            <Divider style={{opacity: 0.2}} />\n\n            <MenuItem style={{marginTop:'8px'}} onClick={closePopover}>\n              <ListItemIcon>\n                <CloseIcon />\n              </ListItemIcon>\n              <ListItemText>\n                <Localized id=\"block_menu_close_menu\" />\n              </ListItemText>\n            </MenuItem>\n\n          </MenuList>\n        </Paper>\n    )}\n  </Popover>\n  </>\n}\n\nfunction TranslatedInput({\n  defaultValue,\n  onChange,\n  onBlur,\n  children = null,\n}) {\n  const [arrayWithLocales, setArrayWithLocales] = useState([])\n\n  useEffect(() => {\n    if (Array.isArray(defaultValue)) {\n      setArrayWithLocales(defaultValue)\n    } else {\n      setArrayWithLocales([])\n    }\n  }, [defaultValue, setArrayWithLocales])\n\n  // useEffect(() => {\n  //   if (defaultValue !== arrayWithLocales) {\n  //     setArrayWithLocales(defaultValue)\n  //   }\n  // }, [ arrayWithLocales, defaultValue, setArrayWithLocales ])\n\n  const {\n    currentLocale,\n    filterByLocale,\n    showTranslations,\n  } = useTranslatedInputContext()\n\n  let currentText = [...arrayWithLocales].filter(t => t.locale === currentLocale)\n  if (currentText.length > 0) {\n    currentText = currentText[0].value\n  } else {\n    currentText = ''\n  }\n\n  const handleChange = useCallback(newTextValue => {\n    let newValue = [...arrayWithLocales]\n    if (arrayWithLocales.length > 0) {\n      if (newValue.findIndex(t => t.locale === currentLocale) > -1) {\n        newValue = newValue\n          .map(t => {\n            if (t.locale === currentLocale) {\n              return {\n                ...t,\n                value: newTextValue,\n              }\n            }\n            return t\n          })\n          .filter(t => t.value !== '')\n      } else {\n        newValue = [\n          ...newValue,\n          {locale: currentLocale, value: newTextValue},\n        ]\n        .filter(t => t.value !== '')\n      }\n    } else {\n      newValue = [{locale: currentLocale, value: newTextValue}]\n    }\n\n    setArrayWithLocales(newValue)\n\n    if (onChange) {\n      onChange(newValue)\n    }\n  }, [setArrayWithLocales, arrayWithLocales, currentLocale, onChange])\n\n  const handleBlur = useCallback(() => {\n    if (onBlur) {\n      onBlur(arrayWithLocales)\n    }\n  }, [onBlur, arrayWithLocales])\n\n  const best = filterByLocale(arrayWithLocales.filter(t => t.locale !== currentLocale))\n\n  if (typeof children === 'function') {\n    return <div className={classes.translatedInput}>\n      {/* <div className={classes.content}> */}\n        <div style={{ flexGrow: '1', width: '100%' }}>\n          {children({\n            key: currentLocale,\n            defaultValue: currentText,\n            onChange: handleChange,\n            onBlur: handleBlur,\n          })}\n        </div>\n        {\n          showTranslations === true && best.length > 0\n            ? <div className={classes.translationHelp}>\n                {\n                  best\n                  .map(t => <p key={t.locale}>\n                    <strong>{t.locale.toUpperCase()}:</strong> {t.value}\n                  </p>)\n                }\n              </div>\n            : null\n        }\n      {/* </div> */}\n      {/* {locales_menu} */}\n    </div>\n  }\n\n  return null\n}\n\nexport {\n  LocalesMenu,\n  TranslatedInputContext,\n  TranslatedInputProvider,\n  useTranslatedInputContext,\n  TranslatedInput,\n  TranslatedInput as default,\n}\n","import { useCallback } from 'react'\n\nimport {\n  useHistory,\n} from 'react-router-dom'\n\nimport {\n  Paper,\n  MenuList,\n  MenuItem,\n  Divider,\n  ListItemIcon,\n  ListItemText,\n  List,\n  ListSubheader,\n} from '@mui/material'\n\nimport {\n  Visibility as VisibilityIcon,\n  VisibilityOff as VisibilityOffIcon,\n  Delete as DeleteIcon,\n  Close as CloseIcon,\n  VerticalAlignTop as VerticalAlignTopIcon,\n  VerticalAlignBottom as VerticalAlignBottomIcon,\n\n  InsertDriveFileSharp as PageIcon,\n  // LinkSharp as RedirectIcon,\n  PersonSharp as PersonIcon,\n  Crop75Sharp as ButtonIcon,\n  TitleSharp as HeadlineIcon,\n  NotesSharp as TextIcon,\n  Remove as DividerIcon,\n\n  PreviewSharp as ViewIcon,\n} from '@mui/icons-material'\n\nimport { Localized, withLocalization } from '../../fluent/Localized.js'\n\nimport Popover from '../Popover.js'\n\nfunction BlockMenu ({\n  block,\n  getString,\n\n  trigger,\n\n  setType,\n\n  toggle_active = null,\n  active = null,\n  onRemoveRow = null,\n  addRowBefore = null,\n  addRowAfter = null,\n}) {\n  let prefersDarkMode = false\n  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n    prefersDarkMode = true\n  }\n\n  const history = useHistory()\n\n  const { _id = '', type = '' } = block\n\n  const handleAddRowBefore = useCallback(() => {\n\n    // const newBlock = {\n    //   type,\n    // }\n\n    const newBlockId = ''\n\n    addRowBefore({\n      blockId: newBlockId,\n    })\n  }, [ addRowBefore ])\n\n  const viewBlock = useCallback(() => {\n    history.push(`/view/${_id}`)\n  }, [ _id, history ])\n\n  return <>\n  <Popover\n    trigger={trigger}\n  >\n    {({closePopover, ...popoverProps}) => (\n        <Paper\n          {...popoverProps}\n          sx={{\n            maxWidth: 380,\n            height: 325,\n            maxHeight: 'calc(100vh - 32px)',\n            overflow: 'auto',\n          }}\n          elevation={8}\n        >\n          <MenuList\n            autoFocus={true}\n            style={{\n              width: '100%',\n              maxWidth: '100%',\n              marginTop: '-8px',\n            }}\n          >\n            <List\n              style={{\n                width: '100%',\n                maxWidth: '100%',\n                marginTop: '-8px',\n              }}\n            >\n              <ListSubheader\n                style={{\n                  whiteSpace: 'nowrap',\n                  lineHeight: '1',\n                  margin: '-4px 0 0 0',\n                  padding: '12px 16px 12px',\n                  backgroundColor: prefersDarkMode ? '#2e2e2e' : '#fff',\n                }}\n              >\n                <Localized id=\"block_menu_choose_type_label\" />\n              </ListSubheader>\n\n              <div style={{height: '4px'}}></div>\n\n              {\n                [\n                  { value: 'page', icon: <PageIcon />, label: getString('block_menu_type_label_page') },\n                  // { value: 'redirect', icon: <RedirectIcon />, label: getString('block_menu_type_label_redirect') },\n                  { value: 'person', icon: <PersonIcon />, label: getString('block_menu_type_label_person') },\n                  { value: 'button', icon: <ButtonIcon />, label: getString('block_menu_type_label_button') },\n                  { value: 'headline', icon: <HeadlineIcon />, label: getString('block_menu_type_label_headline') },\n                  // { value: 'headline3', label: getString('block_menu_type_label_headline3') },\n                  { value: 'text', icon: <TextIcon />, label: getString('block_menu_type_label_text') },\n                  { value: 'divider', icon: <DividerIcon />, label: getString('block_menu_type_label_divider') },\n                ]\n                .map(option => (\n                  <MenuItem\n                    key={option.value}\n                    selected={option.value === type}\n                    onClick={() => setType(option.value)}\n                  >\n                    <ListItemIcon>\n                      {option.icon}\n                    </ListItemIcon>\n                    <ListItemText>\n                      {option.label}\n                    </ListItemText>\n                  </MenuItem>\n              ))}\n            </List>\n\n            {\n              (\n                addRowBefore\n                || addRowAfter\n                || (typeof active === 'boolean' && toggle_active)\n                || onRemoveRow\n              )\n                ? <Divider style={{opacity: 0.2}} />\n                : null\n            }\n\n            {\n              addRowBefore\n                ? <MenuItem style={{marginTop:'8px'}} onClick={handleAddRowBefore}>\n                    <ListItemIcon>\n                      <VerticalAlignTopIcon />\n                    </ListItemIcon>\n                    <ListItemText>\n                      <Localized id=\"block_menu_add_before\" />\n                    </ListItemText>\n                  </MenuItem>\n                : null\n            }\n\n            {\n              addRowAfter\n                ? <MenuItem style={{marginTop:'8px'}} onClick={addRowAfter}>\n                    <ListItemIcon>\n                      <VerticalAlignBottomIcon />\n                    </ListItemIcon>\n                    <ListItemText>\n                      <Localized id=\"block_menu_add_after\" />\n                    </ListItemText>\n                  </MenuItem>\n                : null\n            }\n\n            {\n              typeof active === 'boolean' && toggle_active\n                ? <MenuItem style={{marginTop:'8px'}} onClick={toggle_active}>\n                    <ListItemIcon>\n                      {\n                        active\n                        ? <VisibilityOffIcon />\n                        : <VisibilityIcon />\n                      }\n                    </ListItemIcon>\n                    <ListItemText>\n                      {\n                        active\n                        ? <Localized id=\"block_menu_hide\" />\n                        : <Localized id=\"block_menu_show\" />\n                      }\n                    </ListItemText>\n                  </MenuItem>\n                : null\n            }\n\n            {\n              onRemoveRow\n                ? <MenuItem style={{marginTop:'8px'}} onClick={onRemoveRow}>\n                    <ListItemIcon>\n                      <DeleteIcon />\n                    </ListItemIcon>\n                    <ListItemText>\n                      <Localized id=\"block_menu_delete\" />\n                    </ListItemText>\n                  </MenuItem>\n                : null\n            }\n\n            {\n              typeof _id === 'string' && _id !== ''\n                ? <>\n                    <Divider style={{opacity: 0.2}} />\n                    <MenuItem style={{marginTop:'8px'}} onClick={viewBlock}>\n                      <ListItemIcon>\n                        <ViewIcon />\n                      </ListItemIcon>\n                      <ListItemText>\n                        <Localized id=\"view_block\" />\n                      </ListItemText>\n                    </MenuItem>\n                  </>\n                : null\n            }\n\n            <Divider style={{opacity: 0.2}} />\n\n            <MenuItem style={{marginTop:'8px'}} onClick={closePopover}>\n              <ListItemIcon>\n                <CloseIcon />\n              </ListItemIcon>\n              <ListItemText>\n                <Localized id=\"block_menu_close_menu\" />\n              </ListItemText>\n            </MenuItem>\n\n          </MenuList>\n        </Paper>\n    )}\n  </Popover>\n  </>\n}\n\nexport default withLocalization(BlockMenu)\n","import React, { useCallback, useRef, useState, useEffect } from 'react'\n\nimport {\n  offset as getCaretOffset,\n  getOffset,\n} from 'caret-pos'\n\nimport classes from './HtmlInput.module.css'\n\n\nfunction getRangeLengthWithLinebreaks(element){\n  element.normalize()\n\n  if (!window.getSelection) {\n    return 0;\n  }\n\n  const selection = window.getSelection()\n  const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n\n  if (!range) {\n    return 0;\n  }\n\n  const clonedRange = range.cloneRange()\n  clonedRange.selectNodeContents(element)\n  clonedRange.setEnd(range.endContainer, range.endOffset)\n  const content = clonedRange.cloneContents()\n\n  let rangeLength = 0\n  for (const node of content.childNodes) {\n    if (node.nodeType === 3) { // node type = 3 is a text node\n      rangeLength += node.textContent.length\n    } else if (node.nodeType === 1 && node.nodeName === 'BR') { // node type = 1 is an element node\n      rangeLength += 1\n    }\n  }\n\n  clonedRange.detach()\n\n  return rangeLength\n}\n\nfunction getInLineRangeLength(element, whichLine){\n  element.normalize()\n\n  if (!window.getSelection) {\n    return 0;\n  }\n\n  const selection = window.getSelection()\n  const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n\n  if (!range) {\n    return 0;\n  }\n\n  const clonedRange = range.cloneRange()\n  clonedRange.selectNodeContents(element)\n  clonedRange.setEnd(range.endContainer, range.endOffset)\n  const content = clonedRange.cloneContents()\n\n  let rangeLength = 0\n  if (content.childNodes.length > 0) {\n    if (whichLine === 'first') {\n      if (content.childNodes[0].nodeType === 3) {\n        rangeLength = content.childNodes[0].length\n      } else {\n        rangeLength = 0\n      }\n    } else if (whichLine === 'last') {\n      if (content.childNodes[content.childNodes.length-1].nodeType === 3) {\n        rangeLength = content.childNodes[content.childNodes.length-1].length\n      } else {\n        if (content.childNodes.length > 1) {\n          if (content.childNodes[content.childNodes.length-2].nodeType === 3) {\n            rangeLength = content.childNodes[content.childNodes.length-2].length\n          } else {\n            rangeLength = 0\n          }\n        } else {\n          rangeLength = 0\n        }\n      }\n    }\n  }\n\n  clonedRange.detach()\n\n  return rangeLength\n}\n\nfunction getCaretPosition(element){\n  // get element height without padding and border\n  const cs = getComputedStyle(element)\n  const paddingY = parseFloat(cs.paddingTop) + parseFloat(cs.paddingBottom)\n  const borderY = parseFloat(cs.borderTopWidth) + parseFloat(cs.borderBottomWidth)\n  const elementHeight = element.offsetHeight - paddingY - borderY\n\n  // get caret position\n  const offset = getOffset(element)\n  const caretOffset = getCaretOffset(element)\n  caretOffset.top = caretOffset.top - offset.top\n  caretOffset.left = caretOffset.left - offset.left\n\n  // check if caret is in the first line\n  let inFirstLine = caretOffset.top < caretOffset.height\n\n  // check if caret is in the last line\n  let inLastLine = elementHeight - caretOffset.top < caretOffset.height\n\n  // define caret position from start of text\n  const caretPositionFromStart = getRangeLengthWithLinebreaks(element)\n\n  // calc caret position from end of text\n  let textLength = element.innerText.length || 0\n  if (textLength < 0) {\n    textLength = 0\n  }\n  const caretPositionFromEnd = textLength - caretPositionFromStart\n\n  return {\n    inFirstLine,\n    inLastLine,\n    left: caretOffset.left,\n    top: caretOffset.top,\n    height: caretOffset.height,\n    positionFromLineStart: getInLineRangeLength(element, (inFirstLine ? 'first' : 'last')),\n    positionFromStart: caretPositionFromStart,\n    positionFromEnd: caretPositionFromEnd,\n  }\n}\n\nfunction HtmlInput({\n  defaultValue = '',\n  children,\n  className,\n  onChange,\n  onBlur,\n  onError,\n  linebreaks,\n  style,\n  placeholder = '',\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  onSplitText,\n  onMergeToPrevInput,\n  onMergeToNextInput,\n\n  ...props\n}) {\n  const inputRef = useRef(null)\n  const [text, setText] = useState('')\n  const [fakeDefaultValue, setFakeDefaultValue] = useState({ __html: '' })\n\n  useEffect(() => {\n    setText(old_text => {\n      if (old_text !== defaultValue) {\n        setFakeDefaultValue((old_fakeDefaultValue) => {\n          const newHtmlValue = defaultValue\n            // .replace(/\\t/g, '&emsp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            // .replace(/\\n/g, '<br />')\n\n          if (old_fakeDefaultValue.__html !== newHtmlValue) {\n            return {__html: newHtmlValue}\n          }\n          return old_fakeDefaultValue\n        })\n\n        return defaultValue\n      }\n      return old_text\n    })\n  }, [defaultValue, setText, setFakeDefaultValue])\n\n  const handleTextChange = useCallback((event) => {\n    let value = event.target.innerHTML || ''\n    // .replace(/&emsp;/g, '\\t')\n    .replace(/&lt;/g, '<')\n    .replace(/&gt;/g, '>')\n\n    if (linebreaks === false) {\n      value = value.replace(/<\\/? ?br ?\\/?>/g, ' ')\n    } else {\n      value = value.replace(/<\\/? ?br ?\\/?>/g, '\\n')\n    }\n\n    value = value.trim()\n    setText(value)\n\n    if (onChange) {\n      onChange(value)\n    }\n  }, [onChange, setText, linebreaks])\n\n  const handleTextBlur = useCallback(() => {\n    if (onBlur) {\n      onBlur(text)\n    }\n  }, [onBlur, text])\n\n  const keyDownHandler = useCallback(event => {\n    if (event.key === 'Enter' && event.shiftKey === true) {\n      // source: StackOverflow (https://stackoverflow.com/a/61237402)\n      if (linebreaks !== false) {\n        document.execCommand('insertLineBreak')\n      }\n      event.preventDefault()\n    } else if (event.key === 'Tab') {\n      document.execCommand('insertText', false, '\\t')\n      event.preventDefault()\n    } else if (event.key === 'ArrowUp') {\n      if (onGoToPrevInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.inFirstLine) {\n          onGoToPrevInput({ caret })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'ArrowLeft') {\n      if (onGoToPrevInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.inFirstLine && caret.positionFromStart <= 0) {\n          caret.positionFromLineStart = -1\n          onGoToPrevInput({ caret })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'ArrowDown') {\n      if (onGoToNextInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.inLastLine) {\n          onGoToNextInput({ caret })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'ArrowRight') {\n      if (onGoToNextInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.inLastLine && caret.positionFromEnd <= 1) {\n          caret.positionFromLineStart = 0\n          onGoToNextInput({ caret })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'Enter') {\n      if (onSplitText) {\n        const caret = getCaretPosition(inputRef.current)\n\n        const innerText = inputRef.current.innerText\n        const start = innerText.slice(0, caret.positionFromStart)\n        const end = innerText.slice(caret.positionFromStart)\n\n        onSplitText({\n          texts: [start, end],\n        })\n        event.preventDefault()\n      }\n    } else if (event.key === 'Backspace') {\n      if (onMergeToPrevInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.positionFromStart === 0 && caret.inFirstLine) {\n          onMergeToPrevInput({\n            caret,\n            text: inputRef.current.innerText,\n          })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'Delete') {\n      if (onMergeToNextInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.positionFromEnd === 0 && caret.inLastLine) {\n          onMergeToNextInput({\n            caret,\n            text: inputRef.current.innerText,\n          })\n          event.preventDefault()\n        }\n      }\n    }\n  }, [inputRef, linebreaks, onGoToPrevInput, onGoToNextInput, onSplitText, onMergeToPrevInput, onMergeToNextInput])\n\n  useEffect(() => {\n    if (onInputRef) {\n      onInputRef(inputRef)\n    }\n  }, [onInputRef, inputRef])\n\n  const handlePaste = useCallback(event => {\n    // only accept plain text\n\n    // cancel paste\n    event.preventDefault()\n\n    // get text representation of clipboard\n    let text = (event.originalEvent || event).clipboardData.getData('text/plain')\n\n    if (linebreaks === false) {\n      text = text.replace(/\\n/g, ' ')\n    }\n\n    // insert text manually\n    document.execCommand('insertText', false, text)\n  }, [linebreaks])\n\n  return <div\n    ref={inputRef}\n    onKeyDown={keyDownHandler}\n    onInput={handleTextChange}\n    onBlur={handleTextBlur}\n    onPaste={handlePaste}\n    className={`${classes.rebuild_textarea} ${text.length === 0 ? classes.show_placeholder : ''} ${className}`}\n    contentEditable={true}\n    dangerouslySetInnerHTML={fakeDefaultValue}\n    style={style}\n    placeholder={placeholder}\n  />\n}\n\nexport default HtmlInput\n","import React, { useEffect, useState, useCallback } from 'react'\n\nimport {\n  Modal,\n} from '@mui/material'\nimport {\n  QrCodeSharp as QrCodeIcon,\n  AssessmentSharp as AssessmentIcon,\n  ContentCopySharp as CopyIcon,\n} from '@mui/icons-material'\n\nimport { Localized } from '../../fluent/Localized.js' // useLocalization\n\nimport classes from './SharingEditor.module.css'\n\nimport HtmlInput from './HtmlInput.js'\n\nfunction SharingEditor({\n  defaultBlock = {},\n  open = false,\n  onChange,\n  onClose,\n}) {\n\n  const [ newPath, setNewPath ] = useState('')\n  const [ properties, setProperties ] = useState({})\n\n  const {\n    trigger = {},\n  } = properties\n\n  const {\n\t\tpath = '',\n  } = trigger\n\n  useEffect(() => {\n    console.log('defaultBlock', defaultBlock)\n\n    setProperties(defaultBlock.properties)\n  }, [ setProperties, defaultBlock ])\n\n  const savePath = useCallback(() => {\n    setProperties(oldProperties => {\n      const newProperties = {...oldProperties}\n      if (newPath === '') {\n        if (newProperties.hasOwnProperty('trigger')) {\n          delete newProperties.trigger\n        }\n        if (newProperties.hasOwnProperty('action')) {\n          delete newProperties.action\n        }\n      } else {\n        newProperties.trigger = {\n\t\t    \ttype: 'path',\n\t\t    \tpath: newPath,\n\t\t    }\n\t\t    newProperties.action = {\n\t\t    \ttype: 'render_block',\n\t\t    }\n      }\n\n      return newProperties\n    })\n  }, [ newPath, setProperties ])\n\n  const viewStatistics = () => {\n    const a = document.createElement('a')\n    a.href = `https://umami.qiekub.org/share/s0ZHBZbb/volt.link?url=%2F${path}`\n    a.target = '_blank'\n    a.rel = 'noreferrer'\n    a.click()\n  }\n\n  const gotoQrcodePage = () => {\n    const a = document.createElement('a')\n    a.href = `https://qrcode.volt.link/?c=volt.link/${path}`\n    a.target = '_blank'\n    a.rel = 'noreferrer'\n    a.click()\n  }\n\n  if (!open) {\n    return null\n  }\n\n  return (\n    <Modal\n      open={open}\n      onClose={onClose}\n      hideBackdrop={true}\n      // BackdropComponent={<Backdrop open={true} className={classes.backdrop} />}\n      // aria-labelledby=\"modal-modal-title\"\n      // aria-describedby=\"modal-modal-description\"\n    >\n      <>\n        <div className={classes.backdrop} onClick={onClose}></div>\n\n        <div className={classes.dialog}>\n\n            <h1 style={{ margin: '0 0 var(--basis_x4) 0' }}>Get the link</h1>\n            {/* <p>Enter @volteuropa.org addresses to give editing rights.<br/>Groups addresses are not supported.</p> */}\n\n            {/* <hr style={{ opacity: 0.2 }} /> */}\n\n            <div className={classes.inputWrapper}>\n              <HtmlInput\n                defaultValue={path}\n                onChange={setNewPath}\n                linebreak={false}\n                className={classes.input}\n              />\n              <button\n                onClick={savePath}\n              >\n                Save\n              </button>\n            </div>\n\n            <hr style={{ opacity: 0.2 }} />\n\n            <pre>\n              {JSON.stringify(properties, null, 4)}\n            </pre>\n\n            <hr style={{ opacity: 0.2 }} />\n\n            <div className={classes.actions}>\n              {\n                path !== ''\n                ? <div>\n                    <button className=\"text hasIcon\" onClick={gotoQrcodePage} style={{ marginInlineStart: '0' }}>\n                      <QrCodeIcon className=\"icon\" />\n                      <span className=\"hideOnSmallScreen\"><Localized id=\"sharing_qrcode\" /></span>\n                    </button>\n                    <button className=\"text hasIcon\" onClick={viewStatistics}>\n                      <AssessmentIcon className=\"icon\" />\n                      <span className=\"hideOnSmallScreen\"><Localized id=\"sharing_statistics\" /></span>\n                    </button>\n                    <button className=\"text hasIcon\" onClick={viewStatistics}>\n                      <CopyIcon className=\"icon\" />\n                      <span className=\"hideOnSmallScreen\"><Localized id=\"sharing_copy_url\" /></span>\n                    </button>\n                  </div>\n                : <div></div>\n              }\n\n              <button onClick={onClose} className=\"green\" style={{ marginInlineEnd: '0' }}>Done</button>\n            </div>\n        </div>\n      </>\n    </Modal>\n  )\n}\n\nexport default SharingEditor\n","import { useCallback } from 'react'\n\nconst email_regex = /^(?:(?:[^<>()[\\]\\\\.,;:\\s@\"]+(?:\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(?:\".+\"))@(?:(?:\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})|(?:(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,})\\.?)$/gui // is surrounded by start and end tags\nconst emails_regex = /((?:(?:[^<>()[\\]\\\\.,;:\\s@\"]+(?:\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(?:\".+\"))@(?:(?:\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})|(?:(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,})\\.?))/gui // is surrounded by a group\n\nfunction EmailInput({ multiple = false, onChange, onError, ...props }) {\n  const handleTextChange = useCallback((event) => {\n    if (onChange || onError) {\n      let value = event.target.value || ''\n      let isSubmittable = false\n      let error = ''\n\n      if (value !== '') {\n        if (multiple === true) {\n          const emails = value.match(emails_regex)\n          if (emails) {\n            value = emails\n            isSubmittable = true\n          } else {\n            error = 'Invalid email(s) format'\n          }\n        } else {\n          if (value.match(email_regex)) {\n            isSubmittable = true\n          } else {\n            error = 'invalid_email'\n          }\n        }\n      }\n\n      if (onChange) {\n        if (isSubmittable) {\n          onChange(value)\n        } else {\n          if (multiple === true) {\n            onChange([])\n          } else {\n            onChange('')\n          }\n        }\n      }\n\n      if (onError) {\n        onError(error)\n      }\n    }\n  }, [multiple, onChange, onError])\n\n  return <input\n    type=\"email\"\n    onChange={handleTextChange}\n    {...props}\n  />\n}\n\nexport default EmailInput\n","import React, { useState, useCallback, useEffect } from 'react'\n\nimport {\n  Modal,\n  Menu,\n  MenuItem,\n  Divider,\n  ListItemIcon,\n  ListItemText,\n} from '@mui/material'\nimport {\n  KeyboardArrowDown as KeyboardArrowDownIcon,\n  Delete as DeleteIcon,\n  Close as CloseIcon,\n  Visibility as ViewerIcon,\n  Edit as EditorIcon,\n} from '@mui/icons-material'\nimport { v4 as uuidv4 } from 'uuid'\n\nimport { Localized, useLocalization } from '../../fluent/Localized.js'\n\nimport useUser from '../../hooks/useUser.js'\n\nimport FancyInput from './FancyInput.js'\nimport EmailInput from './EmailInput.js'\n\nimport classes from './PermissionsEditor.module.css'\n\nfunction addTmpIds(array) {\n  return [...array].map(obj => {\n    const obj_new = { ...obj }\n    obj_new.tmp_id = uuidv4()\n    return obj_new\n  })\n}\n\nfunction LocalizedRole({ role }) {\n  return <Localized id={'role-'+role} />\n}\n\nfunction RolesMenu({\n  role,\n  trigger,\n  changeRole,\n  removePermission,\n}){\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const open = Boolean(anchorEl)\n  const handleOpen = event => {\n    setAnchorEl(event.currentTarget)\n  }\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  return <>\n    {trigger({\n      onClick: handleOpen,\n    })}\n\n    <Menu\n      anchorEl={anchorEl}\n      open={open}\n      onClose={handleClose}\n      MenuListProps={{\n        style: {\n          maxWidth: '100%',\n        },\n      }}\n    >\n        {\n          role === 'editor'\n          ? <MenuItem onClick={() => changeRole('viewer')}>\n              <ListItemIcon>\n                <ViewerIcon />\n              </ListItemIcon>\n              <ListItemText>\n                <LocalizedRole role=\"viewer\" />\n              </ListItemText>\n            </MenuItem>\n          : <MenuItem onClick={() => changeRole('editor')}>\n              <ListItemIcon>\n                <EditorIcon />\n              </ListItemIcon>\n              <ListItemText>\n                <LocalizedRole role=\"editor\" />\n              </ListItemText>\n            </MenuItem>\n        }\n\n        {\n          typeof removePermission === 'function'\n          ? <MenuItem onClick={removePermission}>\n              <ListItemIcon>\n                <DeleteIcon />\n              </ListItemIcon>\n              <ListItemText>\n                Remove\n              </ListItemText>\n            </MenuItem>\n          : null\n        }\n\n        <Divider style={{opacity: 0.2}} />\n\n        <MenuItem onClick={handleClose}>\n          <ListItemIcon>\n            <CloseIcon />\n          </ListItemIcon>\n          <ListItemText>\n            Close\n          </ListItemText>\n        </MenuItem>\n    </Menu>\n  </>\n}\n\nfunction sortPermissions(permissions) {\n  const owner = permissions\n    .filter(p => p.role === 'owner')\n    .sort((a, b) => a.email.localeCompare(b.email))\n\n  const special = permissions\n    .filter(p => p.email === '@volteuropa.org' || p.email === '@public')\n    .sort((a, b) => a.email.localeCompare(b.email))\n\n  const other = permissions\n    .filter(p => p.role !== 'owner' && p.email !== '@volteuropa.org' && p.email !== '@public')\n    .sort((a, b) => a.email.localeCompare(b.email))\n\n  return [\n    ...owner,\n    ...special,\n    ...other,\n  ]\n}\n\nfunction PermissionsEditor({\n  defaultPermissions,\n  open = false,\n  onChange,\n  onClose,\n}) {\n  const { getString } = useLocalization()\n\n  const { email: user_email = '' } = useUser()\n\n  const [inputRepaintKey, setInputRepaintKey] = useState(0)\n  const [permissions, setPermissions] = useState([])\n  const [newEmails, setNewEmails] = useState([])\n  const [newRole, setNewRole] = useState('editor')\n\n  const setNewPermission = useCallback(newPermissions => {\n    if (user_email !== '') {\n      newPermissions = addTmpIds(newPermissions || [])\n\n      const doesNotHaveOwner = newPermissions.filter(permission => permission.role === 'owner').length === 0\n      if (doesNotHaveOwner) {\n        newPermissions.unshift({ tmp_id: uuidv4(), email: user_email, role: 'owner' })\n      }\n\n      setPermissions(newPermissions)\n    }\n  }, [ user_email, setPermissions ])\n\n  useEffect(() => {\n    if (Array.isArray(defaultPermissions)) {\n      setNewPermission(defaultPermissions)\n    } else {\n      setNewPermission([])\n    }\n  }, [ setNewPermission, defaultPermissions ])\n\n  const removePermission = useCallback(email => {\n    let newPermissions = permissions.filter(p => p.email !== email)\n    if (email === '@volteuropa.org') {\n      newPermissions = newPermissions.filter(p => p.email !== '@public')\n    }\n\n    const doesNotHaveOwner = permissions.filter(p => p.role === 'owner').length === 0\n    if (doesNotHaveOwner) {\n      newPermissions.unshift({ tmp_id: uuidv4(), email: user_email, role: 'owner' })\n    }\n\n    setPermissions(newPermissions)\n    onChange(newPermissions)\n  }, [permissions, user_email, setPermissions, onChange])\n\n  const changeRole = useCallback((email, newRole) => {\n    const newPermissions = permissions.map(permission => {\n      if (permission.email === email) {\n        return {\n          ...permission,\n          role: newRole,\n        }\n      }\n      return permission\n    })\n\n    setPermissions(newPermissions)\n    onChange(newPermissions)\n  }, [permissions, setPermissions, onChange])\n\n  const addPermissions = useCallback((newEmails, newRole) => {\n    if (newEmails.includes('@public')) {\n      newEmails.push('@volteuropa.org')\n    }\n    let newPermissions = permissions.filter(permission => !newEmails.includes(permission.email))\n    for (const newEmail of newEmails) {\n      newPermissions.unshift({ tmp_id: uuidv4(), email: newEmail, role: newRole })\n    }\n\n    setPermissions(newPermissions)\n    onChange(newPermissions)\n  }, [permissions, setPermissions, onChange])\n\n  const addNewPermissionFromInput = useCallback(() => {\n    addPermissions(newEmails, newRole)\n    setNewEmails([]) // reset the email-input | don't reset the role-input so it can be reused when entering multiple emails after each other // setNewRole('editor')\n    setInputRepaintKey(oldInputRepaintKey => oldInputRepaintKey + 1) // redraw the email-input\n  }, [ newEmails, newRole, addPermissions ])\n\n  if (!open) {\n    return null\n  }\n\n  const doesNotHaveVoltEuropa = permissions.filter(permission => permission.email === '@volteuropa.org').length === 0\n  const doesNotHavePublic = permissions.filter(permission => permission.email === '@public').length === 0\n\n  return (\n    <Modal\n      open={open}\n      onClose={onClose}\n      hideBackdrop={true}\n      // BackdropComponent={<Backdrop open={true} className={classes.backdrop} />}\n      // aria-labelledby=\"modal-modal-title\"\n      // aria-describedby=\"modal-modal-description\"\n    >\n      <>\n        <div className={classes.backdrop} onClick={onClose}></div>\n\n        <div className={classes.dialogsWrapper}>\n\n        <div className={classes.dialog}>\n          <h1 style={{ margin: '0 0 var(--basis_x4) 0' }}>Give viewing and editing rights</h1>\n          <p>Enter @volteuropa.org addresses to give editing rights.<br/>Groups addresses are not supported.</p>\n          <div className={classes.inputWrapper} key={inputRepaintKey}>\n            <FancyInput className={classes.emailInput}>\n              {({ setError }) => (\n                <EmailInput\n                  multiple={true}\n                  onError={setError}\n                  defaultValue=\"\"\n                  onChange={setNewEmails}\n                  aria-label={getString('path_editor_permissions_edit_label')}\n                  placeholder={getString('path_editor_permissions_edit_placeholder')}\n                  style={{\n                    flexGrow: '1',\n                    // margin: '0',\n                    margin: 'var(--basis) 0',\n                    width: 'calc(100% - var(--basis_x2))',\n                  }}\n                />\n              )}\n            </FancyInput>\n            <RolesMenu\n              role={newRole}\n              changeRole={setNewRole}\n              trigger={triggerProps => <button className={classes.menuButton} {...triggerProps}><LocalizedRole role={newRole} /> <KeyboardArrowDownIcon/></button>}\n            />\n          </div>\n\n          {\n            newEmails.length > 0 && newEmails[0].length > 0\n            ? <>\n                <hr />\n\n                <div className={classes.actions}>\n                  <button onClick={addNewPermissionFromInput} className=\"green\" style={{margin: '0'}}>\n                    {\n                      newEmails.length > 1\n                      ? <>Add People</>\n                      : <>Add Person</>\n                    }\n                  </button>\n                </div>\n              </>\n            : <>\n                {\n                  doesNotHaveVoltEuropa || doesNotHavePublic\n                  ? <div style={{ marginTop: 'var(--basis_x2)' }}>\n                    Make visible for…\n                    {\n                      doesNotHaveVoltEuropa\n                      ? <button onClick={() => addPermissions(['@volteuropa.org'], 'viewer')}>Volt Europa</button>\n                      : null\n                    }\n                    {\n                      doesNotHavePublic\n                      ? <button onClick={() => addPermissions(['@public'], 'viewer')}>Public</button>\n                      : null\n                    }\n                  </div>\n                  : null\n                }\n\n                {\n                  permissions.length === 0\n                   ? null\n                   : <hr style={{ opacity: 0.2 }} />\n                }\n\n                {\n                  sortPermissions(permissions)\n                  .map(p => <div key={p.tmp_id} className={classes.permissionRow}>\n                    {\n                      p.email === '@public'\n                        ? <strong>Public</strong>\n                        : (\n                          p.email === '@volteuropa.org'\n                            ? <strong>Volt Europa</strong>\n                            : <span>{p.email}</span>\n                        )\n                    }\n\n                    {\n                      p.role === 'owner'\n                      ? <strong className={`type_button ${classes.ownerInfo}`}><LocalizedRole role={p.role} /></strong>\n                      : <RolesMenu\n                          role={p.role}\n                          removePermission={() => removePermission(p.email)}\n                          changeRole={(newRole) => changeRole(p.email, newRole)}\n                          trigger={triggerProps => <button className={classes.menuButton} {...triggerProps}><LocalizedRole role={p.role} /> <KeyboardArrowDownIcon/></button>}\n                        />\n                    }\n                  </div>)\n                }\n\n                <hr style={{ opacity: 0.2 }} />\n\n                <div className={classes.actions}>\n                  <button onClick={onClose} className=\"green\" style={{margin: '0'}}>Done</button>\n                </div>\n              </>\n          }\n        </div>\n\n        </div>\n      </>\n    </Modal>\n  )\n}\n\nexport default PermissionsEditor\n","export default __webpack_public_path__ + \"static/media/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.3f9289d0.png\";","export default __webpack_public_path__ + \"static/media/Aktion.89c1bcdf.png\";","export default __webpack_public_path__ + \"static/media/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.6824f6ef.png\";","export default __webpack_public_path__ + \"static/media/Welcome-to-Volt.39e04eca.png\";","\nimport classes from './CoverphotoPicker.module.css'\n\nimport Popover from '../Popover.js'\n\nimport { Paper } from '@mui/material'\n\nimport { Localized, withLocalization } from '../../fluent/Localized.js'\n\nimport MultiButton from '../MultiButton.js'\nimport FancyInput from './FancyInput.js'\nimport UrlInput from './UrlInput.js'\n\nimport plakatschlange_thumb from '../../images/coverphotos/thumbs/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.png'\nimport aktion_thumb from '../../images/coverphotos/thumbs/Aktion.png'\nimport volt_bonn_thumb from '../../images/coverphotos/thumbs/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.png'\nimport welcome_to_volt_thumb from '../../images/coverphotos/thumbs/Welcome-to-Volt.png'\n\n\nfunction CoverphotoPicker({ getString, defaultValue, onChange }) {\n  return (\n    <Popover\n      trigger={(triggerProps) => (\n        <div\n          className={`${classes.coverphoto} ${!defaultValue ? classes.no_image : ''}`}\n          style={{\n            backgroundImage: `url(${window.domains.backend}/download_url?url=${defaultValue})`,\n          }}\n        >\n          <button {...triggerProps} className={classes.changeCoverphotoButton}>Set Coverphoto</button>\n        </div>\n      )}\n    >\n      {({closePopover, ...popoverProps}) => (\n        <Paper\n          {...popoverProps}\n          sx={{\n            maxWidth: 'calc(calc(100vw - 32px) - var(--basis_x8))',\n            maxHeight: 'calc(calc(100vh - 32px) - var(--basis_x8))',\n            overflow: 'auto',\n            padding: 'var(--basis_x4)',\n          }}\n          elevation={8}\n        >\n          <h3><Localized id=\"path_editor_coverphoto_label\" /></h3>\n\n          <div>\n            <em className=\"body2\" style={{ display: 'block', marginBottom: 'var(--basis)' }}>\n              <Localized id=\"path_editor_coverphoto_info\" vars={{\n                // width: type === 'person' ? '400px' : '1200px',\n                // height: type === 'person' ? '400px' : '400px',\n                // ratio: type === 'person' ? '1/1' : '3/1',\n                width: '1200px',\n                height: '400px',\n                ratio: '3/1',\n              }}/>\n            </em>\n\n            <FancyInput>\n              {({ setError }) => (\n                <UrlInput\n                  onError={setError}\n                  onChange={onChange}\n                  value={defaultValue}\n                  type=\"text\"\n                  style={{\n                    marginRight: '0',\n                    marginLeft: '0',\n                    width: 'calc(100% - var(--basis_x2))'\n                  }}\n                />\n              )}\n            </FancyInput>\n\n            <MultiButton\n              onChange={onChange}\n              ariaLabel={getString('path_editor_coverphoto_label')}\n              defaultValue={defaultValue || ''}\n              items={[\n                {\n                  value: '',\n                  title: getString('path_editor_no_coverphoto'),\n                },\n                ...[\n                  {\n                    value: 'https://assets.volteuropa.org/styles/scale_2880x/public/inline-images/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.jpg',\n                    icon: volt_bonn_thumb,\n                  },\n                  {\n                    value: 'https://assets.volteuropa.org/styles/scale_1920x/public/2020-11/Welcome-to-Volt.jpg',\n                    icon: welcome_to_volt_thumb,\n                  },\n                  {\n                    value: 'https://assets.volteuropa.org/styles/scale_1920x/public/2021-07/20200912_Plakatschlange_Ko%CC%88ln_Matteo%20Sant_Unione_011.jpeg',\n                    icon: plakatschlange_thumb,\n                  },\n                  {\n                    value: 'https://assets.volteuropa.org/styles/scale_1920x/public/2021-05/Aktion.jpeg',\n                    icon: aktion_thumb,\n                  },\n                  // 'https://www.volteuropa.org/stripes/hero-desktop-green.jpg',\n                  // 'https://www.volteuropa.org/stripes/hero-desktop-red.jpg',\n                  // 'https://www.volteuropa.org/stripes/hero-desktop-blue.jpg',\n                  // 'https://www.volteuropa.org/stripes/hero-desktop-yellow.jpg',\n                  // 'https://assets.volteuropa.org/styles/scale_1920x/public/2021-05/Colours-Background-Big.jpeg',\n                  // 'https://www.volteuropa.org/stripes/intermediate-green.jpg',\n                  // 'https://www.volteuropa.org/stripes/intermediate-red.jpg',\n                  // 'https://www.volteuropa.org/stripes/intermediate-blue.jpg',\n                  // 'https://www.volteuropa.org/stripes/intermediate-yellow.jpg',\n                  // 'https://www.volteuropa.org/og-default.png',\n                  // 'https://www.volteuropa.org/hero-default.jpg',\n                ]\n                .map(({value = '', icon = ''}) => ({\n                  value,\n                  icon: <img alt=\"\" src={icon} className=\"icon image\" />\n                }))\n              ]}\n            />\n\n          </div>\n        </Paper>\n      )}\n    </Popover>\n  )\n}\n\nexport default withLocalization(CoverphotoPicker)\n","import { useState, useCallback, useEffect } from 'react'\n\nimport { v4 as uuidv4 } from 'uuid'\n\nimport classes from './PropertiesEditor.module.css'\n\nimport { Localized, withLocalization } from '../../fluent/Localized.js'\nimport UrlInput from './UrlInput.js'\nimport HtmlInput from './HtmlInput.js'\nimport FancyInput from './FancyInput.js'\nimport CoverphotoPicker from './CoverphotoPicker.js'\nimport TranslatedInput from './TranslatedInput.js'\n\n// function stripTmpIds(array){\n//   return [...array].map(obj => {\n//     const obj_new = { ...obj }\n//     delete obj_new._id\n//     return obj_new\n//   })\n// }\n\nfunction addTmpIds(array) {\n  return [...(array || [])].map(obj => {\n    if (!obj.tmp_id) {\n      const obj_new = { ...obj }\n      obj_new.tmp_id = uuidv4()\n      return obj_new\n    }\n\n    return obj\n  })\n}\n\nfunction PropertiesEditor({ getString, type, defaultProperties = {}, onChange }) {\n  const [properties, setProperties] = useState({})\n\n  // const [coverphoto, setCoverphoto] = useState('')\n  // const [imprint, setImprint] = useState('')\n  // const [privacy_policy, setPrivacyPolicy] = useState('')\n  // const [link, setLink] = useState('')\n\n  // let [voltTeams, setVoltTeams] = useState([])\n  // voltTeams = voltTeams.map(({ id, name }) => ({ value: id, label: name }))\n\n  // const [voltTeamInfos, setVoltTeamInfos] = useState({\n  //   id: null,\n  //   name: ''\n  // })\n  // const setVoltTeamInfosFromSelect = useCallback((data) => {\n  //   setVoltTeamInfos({\n  //     id: data.value,\n  //     name: data.label,\n  //   })\n  // }, [setVoltTeamInfos])\n\n\n  const updateProperty = useCallback((propertyKey, newPropertyValue) => {\n    const propertyTypes = {\n      text: 'array',\n      slug: 'string',\n      link: 'string',\n      description: 'array',\n      coverphoto: 'string',\n      imprint: 'string',\n      privacy_policy: 'string',\n      tags: 'string',\n    }\n\n    const newProperties = { ...properties }\n\n    if (propertyTypes.hasOwnProperty(propertyKey)) {\n      switch (propertyTypes[propertyKey]) {\n        case 'array':\n          if (newPropertyValue.length > 0) {\n            newProperties[propertyKey] = newPropertyValue\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        case 'string':\n          if (newPropertyValue !== '') {\n            newProperties[propertyKey] = newPropertyValue\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        default:\n          newProperties[propertyKey] = newPropertyValue\n      }\n\n      if (JSON.stringify(newProperties) !== JSON.stringify(properties)) {\n        setProperties(newProperties)\n        if (onChange) {\n          onChange(newProperties)\n        }\n      }\n    }\n  }, [\n    properties,\n    setProperties,\n    onChange,\n  ])\n\n  useEffect(() => {\n    setProperties({\n      ...defaultProperties,\n      text: addTmpIds(defaultProperties.text || []),\n      description: addTmpIds(defaultProperties.description || []),\n    })\n  }, [\n    defaultProperties,\n    setProperties,\n  ])\n\n\n  // useEffect(() => {\n  //   fetch(`${window.domains.backend}teams_simple.json`, {\n  //     mode: 'cors',\n  //     credentials: 'include',\n  //   })\n  //     .then(response => response.json())\n  //     .then(data => {\n  //       if (typeof data.error === 'string') {\n  //         setVoltTeams([])\n  //       } else {\n  //         setVoltTeams(data)\n  //       }\n  //     })\n  //     .catch(error => {\n  //       console.error(error)\n  //       setVoltTeams([])\n  //     })\n  // }, [ setVoltTeams ])\n\n  return <>\n    <CoverphotoPicker\n      defaultValue={properties.coverphoto}\n      onChange={coverphoto => updateProperty('coverphoto', coverphoto)}\n    />\n\n    <div className={classes.main_headline}>\n      <TranslatedInput\n        defaultValue={properties.text}\n        onBlur={(value) => updateProperty('text', value)}\n      >\n        {(translatedInputProps) => {\n          return (\n          <HtmlInput\n            placeholder={getString('placeholder_main_headline')}\n            style={{ margin: '0' }}\n            linebreaks={true}\n            className={`show_border_on_active type_h1`}\n            {...translatedInputProps}\n          />\n          )\n        }}\n      </TranslatedInput>\n\n      <TranslatedInput\n        defaultValue={properties.description}\n        onBlur={(value) => updateProperty('description', value)}\n      >\n        {(translatedInputProps) => {\n          return (\n          <HtmlInput\n            aria-label={getString('path_editor_description_label')}\n            placeholder={getString('path_editor_description_placeholder')}\n            style={{ margin: '0' }}\n            linebreaks={true}\n            className={`show_border_on_active type_text`}\n            {...translatedInputProps}\n          />\n          )\n        }}\n      </TranslatedInput>\n    </div>\n\n    <div className={classes.propertiesFrame} style={\n      type === 'page' || type === 'person'\n        ? null\n        : { display: 'none' }\n    }>\n\n      {/* <div className={classes.properties_row}>\n        <h3><Localized id=\"path_editor_tags_label\" /></h3>\n        <HtmlInput\n          onBlur={(value) => updateProperty('tags', value)}\n          type=\"text\"\n          placeholder={getString('path_editor_tags_placeholder')}\n          aria-label={getString('path_editor_tags_label')}\n          defaultValue={properties.tags}\n          style={{\n            marginRight: '0',\n            marginLeft: '0',\n            width: 'calc(100% - var(--basis_x2))'\n          }}\n        />\n      </div> */}\n\n      {/*\n        voltTeams && voltTeams.length > 0\n        ? <>\n          <h3><Localized id=\"path_editor_belongs_to_team_label\" /></h3>\n          <em className=\"body2\" style={{ display: 'block', marginBottom: 'var(--basis)' }}><Localized id=\"path_editor_belongs_to_team_info\" /></em>\n          <Select\n            defaultValue={{\n              value: voltTeamInfos !== null ? voltTeamInfos.id || null : null,\n              label: voltTeamInfos !== null ? voltTeamInfos.name || '' : '',\n            }}\n            defaultInputValue={voltTeamInfos !== null ? voltTeamInfos.name || '' : ''}\n            onChange={setVoltTeamInfosFromSelect}\n            ariaLabel={getString('path_editor_belongs_to_team_search_placeholder')}\n            label={getString('path_editor_belongs_to_team_search_placeholder')}\n            placeholder={getString('path_editor_belongs_to_team_search_placeholder')}\n            options={voltTeams}\n            styles={custom_react_select_styles}\n            theme={custom_react_select_theme}\n          />\n        </>\n        : null\n      */}\n\n      {\n        type === 'page' || type === 'person'\n          ? <>\n            <div className={classes.properties_row}>\n            <h3><Localized id=\"path_editor_imprint_label\" /></h3>\n            <div>\n            <FancyInput>\n              {({ setError }) => (\n                <UrlInput\n                  onError={setError}\n                  onBlur={(value) => updateProperty('imprint', value)}\n                  defaultValue={properties.imprint}\n                  type=\"text\"\n                  style={{\n                    margin: '0',\n                    width: 'calc(100% - var(--basis_x2))'\n                  }}\n                  className=\"show_border_on_active\"\n                />\n              )}\n            </FancyInput>\n            </div>\n            </div>\n\n            <div className={classes.properties_row}>\n            <h3><Localized id=\"path_editor_privacy_policy_label\" /></h3>\n            <div>\n            <FancyInput>\n              {({ setError }) => (\n                <UrlInput\n                  onError={setError}\n                  onBlur={(value) => updateProperty('privacy_policy', value)}\n                  defaultValue={properties.privacy_policy}\n                  type=\"text\"\n                  style={{\n                    margin: '0',\n                    width: 'calc(100% - var(--basis_x2))'\n                  }}\n                  className=\"show_border_on_active\"\n                />\n              )}\n            </FancyInput>\n            </div>\n            </div>\n          </>\n          : (\n            type === 'redirect'\n              ? <>\n                <div className={classes.properties_row}>\n                <h3><Localized id=\"path_editor_redirect_label\" /></h3>\n                <FancyInput>\n                  {({ setError }) => (\n                    <UrlInput\n                      onError={setError}\n                      onBlur={(value) => updateProperty('link', value)}\n                      type=\"text\"\n                      placeholder={getString('path_editor_redirect_placeholder')}\n                      aria-label={getString('path_editor_redirect_label')}\n                      defaultValue={properties.link}\n                      style={{\n                        marginRight: '0',\n                        marginLeft: '0',\n                        width: 'calc(100% - var(--basis_x2))'\n                      }}\n                      className=\"show_border_on_active\"\n                    />\n                  )}\n                </FancyInput>\n                </div>\n              </>\n              : null\n          )\n      }\n    </div>\n  </>\n}\n\nexport default withLocalization(PropertiesEditor)\n","import React, { useState, useEffect, useCallback } from 'react'\n\nimport { withLocalization } from '../../fluent/Localized.js'\n\n// import { v4 as uuidv4 } from 'uuid'\n\nimport HtmlInput from './HtmlInput.js'\nimport TranslatedInput from './TranslatedInput.js'\n// import TranslationRepeater from '../TranslationRepeater.js'\n\nfunction InlineEditorBlockTextRaw({\n  getString,\n  block = {},\n  onChange,\n  onSaveBlock,\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  // onSplitText,\n  onMergeToPrevInput,\n  onMergeToNextInput,\n\n  onAddRowAfter,\n}) {\n  // const defaultLocale = getString('default_locale')\n  // const currentLocale = 'en'\n\n  const properties = block.properties || {}\n  const [text, setText] = useState([])\n  // const [key, setKey] = useState(0)\n\n  useEffect(() => {\n    setText(properties.text || [])\n  }, [properties.text, setText])\n\n  const publishTextChange = useCallback(() => {\n    if (onChange) {\n      onChange({\n        ...block,\n        properties: {\n          ...block.properties,\n          text,\n        },\n      })\n    }\n  }, [onChange, block, text])\n\n  // const handleSplitText = useCallback(({ texts })=>{\n  //   if (onAddRowAfter) {\n  //     let firstNewTextValue = text\n  //     if (text.length > 0) {\n  //       if (firstNewTextValue.findIndex(t => t.locale === currentLocale) > -1) {\n  //         firstNewTextValue = firstNewTextValue.map(t => {\n  //           if (t.locale === currentLocale) {\n  //             return {\n  //               ...t,\n  //               value: texts[0],\n  //             }\n  //           }\n  //           return t\n  //         })\n  //       } else {\n  //         firstNewTextValue = [\n  //           ...firstNewTextValue,\n  //           {locale: currentLocale, value: texts[0]},\n  //         ]\n  //       }\n  //     } else {\n  //       firstNewTextValue = [{locale: currentLocale, value: texts[0]}]\n  //     }\n  //\n  //     // const firstBlock = {\n  //     //   ...block,\n  //     //   properties: {\n  //     //     ...block.properties,\n  //     //     text: firstNewTextValue,\n  //     //   },\n  //     // }\n  //\n  //     const secondBlock = {\n  //       type: block.type,\n  //       properties: {\n  //         text: [{\n  //           locale: currentLocale,\n  //           value: texts[1],\n  //         }],\n  //       },\n  //     }\n  //\n  //     setText(firstNewTextValue)\n  //     setKey(key + 1)\n  //\n  //     onSaveBlock(secondBlock, blockId => {\n  //       onAddRowAfter({\n  //         blockId,\n  //       })\n  //     })\n  //   }\n  // }, [key, setKey, setText, onSaveBlock, onAddRowAfter, block, text, currentLocale])\n\n  const handleMergeToPrevInput = useCallback(()=>{\n    if (onMergeToPrevInput) {\n      onMergeToPrevInput(block)\n    }\n  }, [onMergeToPrevInput, block])\n\n  const handleMergeToNextInput = useCallback(()=>{\n    if (onMergeToNextInput) {\n      onMergeToNextInput(block)\n    }\n  }, [onMergeToNextInput, block])\n\n  return <TranslatedInput\n    defaultValue={text}\n    onChange={setText}\n    onBlur={publishTextChange}\n    // key={key}\n  >\n    {(translatedInputProps) => {\n      return (\n      <HtmlInput\n        placeholder={getString('placeholder_text')}\n        style={{ margin: '0' }}\n        linebreaks={true}\n        className=\"hide_border type_text\"\n\n        onInputRef={onInputRef}\n        onGoToPrevInput={onGoToPrevInput}\n        onGoToNextInput={onGoToNextInput}\n        onMergeToPrevInput={handleMergeToPrevInput}\n        onMergeToNextInput={handleMergeToNextInput}\n        // onSplitText={handleSplitText}\n\n        {...translatedInputProps}\n      />\n      )\n    }\n    }\n  </TranslatedInput>\n}\n\nconst InlineEditorBlockText = withLocalization(InlineEditorBlockTextRaw)\n\nexport default InlineEditorBlockText\n\n/*\nreturn <TranslationRepeater\n    onChange={handleChange}\n    defaultValue={text}\n    addDefaultValue={() => ({ tmp_id: uuidv4(), locale: defaultLocale, value: '' })}\n    addButtonText={getString('path_editor_add_translation')}\n    input={InputWithLocal_props => {\n      const { onChange, ...InputWithLocal_rest } = InputWithLocal_props\n      return <HtmlInput\n        placeholder={getString('placeholder_text')}\n        {...InputWithLocal_rest}\n        onBlur={onChange}\n        style={{ ...InputWithLocal_props.style, margin: '0' }}\n        linebreaks={true}\n        className=\"hide_border type_text\"\n      />\n    }}\n  />\n*/\n","import React, { useState, useCallback } from 'react'\n\nimport { withLocalization } from '../../fluent/Localized.js'\n\nimport FancyInput from './FancyInput.js'\nimport HtmlInput from './HtmlInput.js'\nimport UrlInput from './UrlInput.js'\nimport TranslatedInput from './TranslatedInput.js'\n\nfunction InlineEditorBlockButtonRaw({\n  getString,\n  block = {},\n  onChange,\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  // onSplitText,\n  // onMergeToPrevInput,\n  // onMergeToNextInput,\n}) {\n  const properties = block.properties || {}\n  const [text, setText] = useState(properties.text || [])\n  const [link, setLink] = useState(properties.link || '')\n\n  const publishChanges = useCallback(() => {\n    if (onChange) {\n      onChange({\n        ...block,\n        properties: {\n          ...block.properties,\n          text,\n          link,\n        },\n      })\n    }\n  }, [onChange, block, text, link])\n\n  return <div style={{\n    padding: 'var(--basis) 0',\n  }}>\n    <TranslatedInput\n      defaultValue={text}\n      onChange={setText}\n      onBlur={publishChanges}\n    >\n      {(translatedInputProps) => {\n        return (\n        <HtmlInput\n          placeholder={getString('placeholder_button')}\n          style={{ margin: '0' }}\n          linebreaks={true}\n          className=\"hide_border type_button\"\n\n          onInputRef={onInputRef}\n          onGoToPrevInput={onGoToPrevInput}\n          onGoToNextInput={onGoToNextInput}\n\n          {...translatedInputProps}\n        />\n        )\n      }\n      }\n    </TranslatedInput>\n\n    <FancyInput>\n      {({ setError }) => (\n        <UrlInput\n          onError={setError}\n          onChange={setLink}\n          onBlur={publishChanges}\n          type=\"text\"\n          defaultValue={link}\n          placeholder={getString('path_editor_item_link_label')}\n          style={{\n            margin: 'var(--basis) 0',\n            width: 'calc(100% - var(--basis_x2))',\n          }}\n        />\n      )}\n    </FancyInput>\n  </div>\n}\n\nconst InlineEditorBlockButton = withLocalization(InlineEditorBlockButtonRaw)\n\nexport default InlineEditorBlockButton\n","import React, { useState, useEffect, useCallback } from 'react'\n\nimport { withLocalization } from '../../fluent/Localized.js'\n\nimport HtmlInput from './HtmlInput.js'\nimport TranslatedInput from './TranslatedInput.js'\n\nfunction InlineEditorBlockHeadlineRaw({\n  getString,\n  block = {},\n  onChange,\n  onSaveBlock,\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  // onSplitText,\n  onMergeToPrevInput,\n  onMergeToNextInput,\n\n  onAddRowAfter,\n}) {\n  const properties = block.properties || {}\n  const [text, setText] = useState([])\n\n  useEffect(() => {\n    setText(properties.text || [])\n  }, [properties.text, setText])\n\n  const publishTextChange = useCallback(() => {\n    if (onChange) {\n      onChange({\n        ...block,\n        properties: {\n          ...block.properties,\n          text,\n        },\n      })\n    }\n  }, [onChange, block, text])\n\n  const handleMergeToPrevInput = useCallback(()=>{\n    if (onMergeToPrevInput) {\n      onMergeToPrevInput(block)\n    }\n  }, [onMergeToPrevInput, block])\n\n  const handleMergeToNextInput = useCallback(()=>{\n    if (onMergeToNextInput) {\n      onMergeToNextInput(block)\n    }\n  }, [onMergeToNextInput, block])\n\n  return <TranslatedInput\n    defaultValue={text}\n    onChange={setText}\n    onBlur={publishTextChange}\n  >\n    {(translatedInputProps) => {\n      return (\n      <HtmlInput\n        placeholder={getString('placeholder_headline')}\n        style={{ margin: '0' }}\n        linebreaks={true}\n        className=\"hide_border type_h2\"\n\n        onInputRef={onInputRef}\n        onGoToPrevInput={onGoToPrevInput}\n        onGoToNextInput={onGoToNextInput}\n        onMergeToPrevInput={handleMergeToPrevInput}\n        onMergeToNextInput={handleMergeToNextInput}\n\n        {...translatedInputProps}\n      />\n      )\n    }\n    }\n  </TranslatedInput>\n}\n\nconst InlineEditorBlockHeadline = withLocalization(InlineEditorBlockHeadlineRaw)\n\nexport default InlineEditorBlockHeadline\n","export default function InlineEditorBlockDivider() {\n  return <hr style={{\n    margin: 'calc(3.4 * var(--basis)) 0',\n  }} />\n}\n","import React, { useState, useCallback, useEffect } from 'react'\n\nimport { withLocalization } from '../../fluent/Localized.js'\n\nimport BlockMenu from './BlockMenu.js'\nimport useSaveBlock from '../../hooks/useSaveBlock.js'\nimport useLoadBlock from '../../hooks/useLoadBlock.js'\n\nimport InlineEditorBlockText from './InlineEditorBlockText.js'\nimport InlineEditorBlockButton from './InlineEditorBlockButton.js'\nimport InlineEditorBlockHeadline from './InlineEditorBlockHeadline.js'\nimport InlineEditorBlockDivider from './InlineEditorBlockDivider.js'\n\nimport classes from './InlineEditorBlock.module.css'\n\n// function addIds(array){\n//   if (Array.isArray(array)) {\n//     return array.map(item => {\n//       let new_item = { ...item }\n//       if (!new_item.hasOwnProperty('_id')) {\n//         new_item._id = uuidv4()\n//       }\n//       return new_item\n//     })\n//   }\n//   return array\n// }\n\n// function stripIDs(array){\n//   return [...array].map(obj => {\n//     const obj_new = { ...obj }\n//     delete obj_new._id\n//     return obj_new\n//   })\n// }\n\nfunction InlineEditorBlockInbetweenComponent({ type = 'text', ...props }){\n  let component = null\n\n  switch (type) {\n    case 'button':\n      component = <InlineEditorBlockButton {...props} />\n    break;\n    case 'headline':\n      component = <InlineEditorBlockHeadline {...props} />\n    break;\n    case 'divider':\n      component = <InlineEditorBlockDivider {...props} />\n    break;\n    default:\n      component = <InlineEditorBlockText {...props} />\n  }\n\n  return component\n}\n\nfunction InlineEditorBlockRaw({\n  fluentByObject,\n  getString,\n  defaultContentConfig = {},\n  className,\n  onChange,\n  reorderHandle,\n  onRemoveRow,\n  actionButton,\n  dataset = {},\n  addRowBefore,\n  addRowAfter,\n  permissions = [],\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  onSplitText,\n  onMergeToPrevInput,\n  onMergeToNextInput,\n}) {\n  const saveBlock = useSaveBlock()\n  const loadBlock = useLoadBlock()\n\n  // const defaultLocale = getString('default_locale')\n\n  const [block, setBlock] = useState({\n    _id: defaultContentConfig.blockId || null,\n  })\n  const properties = block.properties || {}\n  const active = typeof properties.active === 'boolean' ? properties.active : true\n\n  useEffect(() => {\n    if (Object.keys(block).length === 1 && block.hasOwnProperty('_id')) {\n      loadBlock(block._id)\n        .then(loadedBlock => {\n          setBlock(loadedBlock)\n        })\n    }\n  }, [\n    loadBlock,\n    setBlock,\n    block,\n  ])\n\n  const handleChange_Type = useCallback(newValue => {\n    const newBlock = {\n      ...block,\n      type: newValue,\n    }\n\n    saveBlock(newBlock)\n      .then((newBlock) => {\n        setBlock(newBlock)\n        if (!block._id || block._id !== newBlock._id) {\n          onChange({\n            blockId: newBlock._id,\n          })\n        }\n      })\n  }, [setBlock, block, saveBlock, onChange])\n\n  // const handleChange = useCallback(newBlock => {\n  //   setBlock(newBlock)\n\n  //   if (onChange) {\n  //     const target = wrapperDiv.current\n  //     target.value = newBlock\n  //     onChange({ target })\n  //   }\n  // }, [setBlock, onChange])\n\n  const toggle_active = useCallback(() => {\n    const newBlock = {\n      ...block,\n      properties: {\n        ...block.properties,\n        active: !active,\n      },\n    }\n\n    saveBlock(newBlock)\n      .then((newBlock) => {\n        setBlock(newBlock)\n        if (!block._id || block._id !== newBlock._id) {\n          onChange({\n            blockId: newBlock._id,\n          })\n        }\n      })\n  }, [block, active, saveBlock, setBlock, onChange])\n\n  const handleSaveBlock = useCallback(newBlock => {\n    if (JSON.stringify(newBlock) !== JSON.stringify(block)) {\n      saveBlock(newBlock)\n        .then((newBlock) => {\n          setBlock(newBlock)\n          if (!block._id || block._id !== newBlock._id) {\n            onChange({\n              blockId: newBlock._id,\n            })\n          }\n        })\n    }\n  }, [saveBlock, block, onChange])\n\n  return <div\n    className={`${classes.block} ${className}`}\n    {...dataset}\n  >\n\n    <BlockMenu\n      {...{\n        block,\n        setType: handleChange_Type,\n        toggle_active,\n        active,\n        onRemoveRow,\n        addRowBefore,\n        addRowAfter,\n      }}\n\n      trigger={props => (\n        <div\n          {...props}\n          className={classes.reorderHandle}\n        >\n          {reorderHandle}\n        </div>\n      )}\n    />\n\n    <div className={`${classes.block_input} ${(active ? classes.form_active : classes.form_deactivated)}`}>\n      <InlineEditorBlockInbetweenComponent\n        type={block.type}\n        block={block}\n        onChange={handleSaveBlock}\n        onSaveBlock={handleSaveBlock}\n\n        onInputRef={onInputRef}\n        onGoToPrevInput={onGoToPrevInput}\n        onGoToNextInput={onGoToNextInput}\n        onSplitText={onSplitText}\n        onMergeToPrevInput={onMergeToPrevInput}\n        onMergeToNextInput={onMergeToNextInput}\n\n        onAddRowAfter={addRowAfter}\n      />\n    </div>\n\n  </div>\n}\n\nconst InlineEditorBlock = withLocalization(InlineEditorBlockRaw)\n\nexport default InlineEditorBlock\n","import { useState, useEffect, useCallback } from 'react'\n\nimport { v4 as uuidv4 } from 'uuid'\n\nimport {\n  Add as AddIcon,\n} from '@mui/icons-material'\nimport {\n  Tooltip,\n} from '@mui/material'\n\nimport { Localized } from '../../fluent/Localized.js'\nimport InlineEditorBlock from './InlineEditorBlock.js'\n\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\nimport DragIndicatorIcon from '@mui/icons-material/DragIndicator'\n\nimport classes from './ContentEditor.module.css'\n\n// function stripTmpIds(array){\n//   return [...array].map(obj => {\n//     const obj_new = { ...obj }\n//     delete obj_new._id\n//     return obj_new\n//   })\n// }\n\nfunction addTmpIds(array) {\n  return [...array].map(obj => {\n    const obj_new = { ...obj }\n    obj_new.tmp_id = uuidv4()\n    return obj_new\n  })\n}\n\nfunction getFirstLineStartNode(element){\n  element.normalize()\n\n  const childNodes = element.childNodes\n  if (childNodes.length > 0) {\n    return childNodes[0]\n  }\n\n  return element\n}\n\nfunction getLastLineStartNode(element) {\n  element.normalize()\n\n  const childNodes = [...element.childNodes].reverse()\n  if (childNodes.length > 0) {\n    let lastLineNode = element\n    if (childNodes[0].nodeType === 3) {\n      for (const childNode of childNodes) {\n        if (childNode.nodeType === 3) {\n          lastLineNode = childNode\n        } else if (childNode.nodeType === 1) {\n          break\n        }\n      }\n    } else {\n      if (childNodes.length > 1) {\n        if (childNodes[1].nodeType === 3) {\n          const thisChildNodes = childNodes.slice(1)\n          for (const childNode of thisChildNodes) {\n            if (childNode.nodeType === 3) {\n              lastLineNode = childNode\n            } else if (childNode.nodeType === 1) {\n              break\n            }\n          }\n        }\n      }\n    }\n\n    return lastLineNode\n  }\n\n  return element\n}\n\nfunction moveCursorToOffsetInLine(contentEditableElement, lastLineStartNode, offset = 0) {\n  contentEditableElement.focus()\n\n  // If this function exists... (IE 9+)\n  if (window.getSelection) {\n    const lastLineStartNodeLength = (\n      lastLineStartNode.nodeType === 3\n        ? lastLineStartNode.length\n        : lastLineStartNode.innerText.length\n    )\n\n    if (offset === -1 || offset > lastLineStartNodeLength) {\n      offset = lastLineStartNodeLength\n    }\n\n    const range = document.createRange()\n    range.setStart(lastLineStartNode, 0)\n    range.setEnd(lastLineStartNode, offset)\n    range.collapse(false) // false = collapse to end\n    const sel = window.getSelection()\n    sel.removeAllRanges()\n    sel.addRange(range)\n  }\n}\n\nfunction reorder(list, startIndex, endIndex) {\n  const result = Array.from(list)\n  const [removed] = result.splice(startIndex, 1)\n  result.splice(endIndex, 0, removed)\n\n  return result\n}\n\nfunction ContentEditor({ defaultValue = [], onChange }) {\n  const [contentConfigs, setContentConfigs] = useState([])\n  const [inputRefs, setInputRefs] = useState({})\n\n  useEffect(()=>{\n    if (contentConfigs.length === 0) {\n      if (defaultValue.length > 0) {\n        let newContentConfigs = addTmpIds(defaultValue)\n        setContentConfigs(newContentConfigs)\n      }\n    }\n  }, [contentConfigs, defaultValue, setContentConfigs])\n\n  const saveInputRef = useCallback((keys, inputRef) => {\n    const newInputRefs = {...inputRefs}\n\n    if (\n      !newInputRefs.hasOwnProperty(keys.tmp_id)\n      || newInputRefs[keys.tmp_id] !== inputRef\n    ) {\n      newInputRefs[keys.tmp_id] = inputRef\n      setInputRefs(newInputRefs)\n    }\n  }, [ inputRefs, setInputRefs ])\n\n  const goToPrevInput = useCallback((keys, { caret }) => {\n    const index = keys.index\n\n    let prevInputRef = null\n    for (let thisIndex = contentConfigs.length-1; thisIndex >= 0; thisIndex--) {\n      const tmp_id = contentConfigs[thisIndex].tmp_id\n      if (thisIndex < index && inputRefs[tmp_id] && inputRefs[tmp_id].current) {\n        prevInputRef = inputRefs[tmp_id]\n        break\n      }\n    }\n\n    if (prevInputRef) {\n      const lastLineStartNode = getLastLineStartNode(prevInputRef.current)\n      moveCursorToOffsetInLine(prevInputRef.current, lastLineStartNode, caret.positionFromLineStart)\n    }\n  }, [ contentConfigs, inputRefs ])\n\n  const goToNextInput = useCallback((keys, { caret }) => {\n    const index = keys.index\n\n    let nextInputRef = null\n    for (let thisIndex = 0; thisIndex < contentConfigs.length; thisIndex++) {\n      const tmp_id = contentConfigs[thisIndex].tmp_id\n      if (thisIndex > index && inputRefs[tmp_id] && inputRefs[tmp_id].current) {\n        nextInputRef = inputRefs[tmp_id]\n        break\n      }\n    }\n\n    if (nextInputRef) {\n      const firstLineStartNode = getFirstLineStartNode(nextInputRef.current)\n      moveCursorToOffsetInLine(nextInputRef.current, firstLineStartNode, caret.positionFromLineStart)\n    }\n  }, [ contentConfigs, inputRefs ])\n\n  const focusLastLine = useCallback(() => {\n    let lastInputRef = null\n    for (let thisIndex = contentConfigs.length-1; thisIndex >= 0; thisIndex--) {\n      const tmp_id = contentConfigs[thisIndex].tmp_id\n      if (inputRefs[tmp_id] && inputRefs[tmp_id].current) {\n        lastInputRef = inputRefs[tmp_id]\n        break\n      }\n    }\n\n    if (lastInputRef) {\n      const lastLineStartNode = getLastLineStartNode(lastInputRef.current)\n      moveCursorToOffsetInLine(lastInputRef.current, lastLineStartNode, -1)\n    }\n  }, [ contentConfigs, inputRefs ])\n\n  /*const splitText = useCallback((keys, { blocks: replacerBlocks }) => {\n    // const index = keys.index\n\n    // const newBlocks = [...blocks].splice(index, 0, ...replacerBlocks)\n    // setContentConfigs(newBlocks)\n\n    // let nextInputRef = null\n    // for (let thisIndex = 0; thisIndex < blocks.length; thisIndex++) {\n    //   const tmp_id = blocks[thisIndex].tmp_id\n    //   if (thisIndex > index + 1 && inputRefs[tmp_id] && inputRefs[tmp_id].current) {\n    //     nextInputRef = inputRefs[tmp_id]\n    //     break\n    //   }\n    // }\n\n    // if (nextInputRef) {\n    //   const firstLineStartNode = getFirstLineStartNode(nextInputRef.current)\n    //   moveCursorToOffsetInLine(nextInputRef.current, firstLineStartNode, caret.positionFromLineStart)\n    // }\n  }, []) // blocks, inputRefs\n  */\n\n  const handleRowChange = useCallback((keys, newContentConfig) => {\n    const newContentConfigs = [...contentConfigs]\n      .map(oldContentConfig => {\n        if (oldContentConfig.tmp_id === keys.tmp_id) {\n          return {\n            ...oldContentConfig,\n            ...newContentConfig,\n          }\n        }\n        return oldContentConfig\n      })\n\n    setContentConfigs(newContentConfigs)\n    onChange(newContentConfigs)\n  }, [contentConfigs, setContentConfigs, onChange])\n\n  const addRowByIndex = useCallback((index, offset = 0, newValue) => {\n    if (typeof newValue === 'object') {\n      newValue = {\n        tmp_id: uuidv4(),\n        ...newValue,\n      }\n    } else {\n      newValue = newValue || { tmp_id: uuidv4() }\n    }\n\n    if (typeof index === 'number' && !isNaN(index)) {\n      let new_rows = [...contentConfigs]\n      new_rows.splice(index + offset, 0, newValue)\n      setContentConfigs(new_rows)\n      onChange(new_rows)\n    }\n  }, [contentConfigs, setContentConfigs, onChange])\n\n\n  function onDragEnd(result) {\n    if (!result.destination) {\n      return\n    }\n\n    if (result.destination.index === result.source.index) {\n      return\n    }\n\n    const newContentConfigs = reorder(\n      contentConfigs,\n      result.source.index,\n      result.destination.index\n    )\n\n    setContentConfigs(newContentConfigs)\n    onChange(newContentConfigs)\n  }\n\n  const filteredContentConfigs = contentConfigs\n    .filter(contentConfig => contentConfig.tmp_id)\n\n  return <>\n  <div\n    style={{\n      position: 'relative',\n      width: 'calc(1000px + var(--basis_x8))',\n      maxWidth: '100%',\n      margin: 'var(--basis_x8) auto 0 auto',\n    }}\n  >\n    <div>\n      <button\n        onClick={() => addRowByIndex(0, 0, {})}\n        className=\"text hasIcon\"\n        style={{\n          margin: '0 0 var(--basis_x2) 0',\n        }}\n      >\n        <span style={{pointerEvents: 'none'}}>\n          <AddIcon className=\"icon\" />\n          <span style={{marginInlineStart: 'var(--basis_x2)', verticalAlign: 'middle'}}>\n            <Localized id=\"add_content_before\" />\n          </span>\n        </span>\n      </button>\n    </div>\n\n    <DragDropContext onDragEnd={onDragEnd}>\n      <Droppable\n        droppableId=\"list\"\n        isDropDisabled={false}\n      >\n        {provided => (\n          <div ref={provided.innerRef} {...provided.droppableProps}>\n            {\n              filteredContentConfigs\n              .map(\n                (contentConfig, index) => {\n                  const tmp_id = contentConfig.tmp_id\n                  const keys = {\n                    index,\n                    tmp_id,\n                  }\n\n                  return <Draggable\n                    key={tmp_id}\n                    draggableId={tmp_id}\n                    index={index}\n                    isDragDisabled={false}\n                    disableInteractiveElementBlocking={true}\n                    shouldRespectForcePress={true}\n                  >\n                    {provided => (\n                      <div\n                        ref={provided.innerRef}\n                        {...provided.draggableProps}\n\n                        key={tmp_id}\n                        className={classes.row}\n                      >\n                      <div className={classes.form}>\n                        <InlineEditorBlock\n                          key={tmp_id}\n                          className={classes.item}\n                          dataset={{\n                            'data-index': index,\n                            'data-id': tmp_id,\n                          }}\n                          defaultContentConfig={contentConfig}\n\n                          reorderHandle={\n                            <Tooltip title={<div style={{ textAlign: 'center' }}>\n                              <strong>Drag</strong> to move.<br />\n                              <strong>Click</strong> to open menu.\n                            </div>}>\n                              <button\n                                className={`text ${classes.inlineRowButton} ${classes.dragHandleButton}`}\n                                {...provided.dragHandleProps}\n                              >\n                                <DragIndicatorIcon />\n                              </button>\n                            </Tooltip>\n                          }\n\n                          onRemoveRow={ () => {/*handleRemoveRow(index)*/} }\n                          addRowBefore={ (newValue) => addRowByIndex(index, 0, newValue) }\n                          addRowAfter={ (newValue) => addRowByIndex(index, 1, newValue) }\n\n                          onInputRef={(inputRef) => saveInputRef(keys, inputRef)}\n                          onGoToPrevInput={(attr) => goToPrevInput(keys, attr)}\n                          onGoToNextInput={(attr) => goToNextInput(keys, attr)}\n                          // onSplitText={(attr) => splitText(keys, attr)}\n                          onChange={(attr) => handleRowChange(keys, attr)}\n                          // onSplitText,\n                          // onMergeToPrevInput,\n                          // onMergeToNextInput,\n                          // {...repeater_props}\n                        />\n                      </div>\n                    </div>\n                    )}\n                  </Draggable>\n                }\n              )\n            }\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </DragDropContext>\n  </div>\n\n  <div\n    style={{\n      position: 'relative',\n      height: '50vh',\n      cursor: (filteredContentConfigs.length === 0 ? 'default' : 'text'),\n    }}\n    onClick={filteredContentConfigs.length === 0 ? null : focusLastLine}\n  ></div>\n  </>\n}\n\nexport default ContentEditor\n","import { useRef, useState, useCallback, useEffect } from 'react'\n\nimport {\n  useParams,\n  Link,\n} from 'react-router-dom'\n\nimport useSaveBlock from '../hooks/useSaveBlock.js'\nimport useLoadBlock from '../hooks/useLoadBlock.js'\n\n// import Select from 'react-select'\n\nimport {\n  ArrowBackSharp as BackIcon,\n\n  TranslateSharp as TranslateIcon,\n  IosShareSharp as ShareIcon,\n  LockSharp as PermissionsIcon,\n  SaveSharp as SaveIcon,\n  MoreHorizSharp as BlockMenuIcon,\n} from '@mui/icons-material'\n\nimport classes from './Editor.module.css'\n\nimport { Localized, useLocalization } from '../fluent/Localized.js'\nimport { useTranslatedInputContext, LocalesMenu } from '../components/edit/TranslatedInput.js'\n\nimport Header from '../components/Header.js'\nimport BlockMenu from '../components/edit/BlockMenu.js'\nimport SharingEditor from '../components/edit/SharingEditor.js'\nimport PermissionsEditor from '../components/edit/PermissionsEditor.js'\nimport PropertiesEditor from '../components/edit/PropertiesEditor.js'\nimport ContentEditor from '../components/edit/ContentEditor.js'\n\n// const custom_react_select_styles = {\n//   menu: (provided, state) => ({\n//     ...provided,\n//     background: 'var(--purple)',\n//   }),\n// }\n// const custom_react_select_theme = theme => ({\n//   ...theme,\n//   borderRadius: 0,\n//   colors: {\n//     ...theme.colors,\n//     primary: 'var(--green)',\n//     primary25: 'var(--purple-dark)',\n//   },\n// })\n\nfunction Editor() {\n  const { getString } = useLocalization()\n\n  const saveBlock = useSaveBlock()\n  const loadBlock = useLoadBlock()\n\n  const { currentLocale } = useTranslatedInputContext()\n\n  const [ isSharingEditorOpen, setIsSharingEditorOpen ] = useState(false)\n  const openSharingEditor = useCallback(() => setIsSharingEditorOpen(true), [ setIsSharingEditorOpen ])\n  const closeSharingEditor = useCallback(() => setIsSharingEditorOpen(false), [ setIsSharingEditorOpen ])\n\n  const [ isPermissionsEditorOpen, setIsPermissionsEditorOpen ] = useState(false)\n  const openPermissionsEditor = useCallback(() => setIsPermissionsEditorOpen(true), [ setIsPermissionsEditorOpen ])\n  const closePermissionsEditor = useCallback(() => setIsPermissionsEditorOpen(false), [ setIsPermissionsEditorOpen ])\n\n  const loadedTheBlock = useRef(false)\n  let { id = '' } = useParams()\n\n  const [block, setBlock] = useState({\n    type: 'page',\n    properties: {},\n    content: [],\n  })\n  const type = block.type\n  const properties = block.properties\n  const content = block.content\n  const permissions = block.permissions\n\n  useEffect(() => {\n    if (\n      typeof id === 'string'\n      && id !== ''\n      && (\n        !loadedTheBlock.current\n        || id !== block._id\n      )\n    ) {\n      loadBlock(id)\n        .then(loadedBlock => {\n          loadedTheBlock.current = true\n          setBlock(loadedBlock)\n        })\n    }\n  }, [\n    id,\n    block,\n    loadBlock,\n    setBlock,\n  ])\n\n  const saveType = useCallback(newType => {\n    if (newType !== block.type) {\n      const newBlock = {\n        ...block,\n        type: newType,\n      }\n\n      saveBlock(newBlock)\n        .then(gottenBlock => {\n          setBlock(gottenBlock)\n        })\n    }\n  }, [block, saveBlock, setBlock])\n\n  const saveProperties = useCallback(newProperties => {\n    if (newProperties !== block.properties) {\n      const newBlock = {\n        ...block,\n        properties: newProperties,\n      }\n\n      saveBlock(newBlock)\n        .then(gottenBlock => {\n          setBlock(gottenBlock)\n        })\n    }\n  }, [block, saveBlock, setBlock])\n\n  const saveContent = useCallback(newContent => {\n    if (newContent !== block.content) {\n      const newBlock = {\n        ...block,\n        content: newContent,\n      }\n\n      saveBlock(newBlock)\n        .then(gottenBlock => {\n          setBlock(gottenBlock)\n        })\n    }\n  }, [block, saveBlock, setBlock])\n\n  const savePermissions = useCallback(newPermissions => {\n    if (newPermissions !== block.permissions) {\n      const newBlock = {\n        ...block,\n        permissions: newPermissions,\n      }\n\n      saveBlock(newBlock)\n        .then(gottenBlock => {\n          setBlock(gottenBlock)\n        })\n    }\n  }, [block, saveBlock, setBlock])\n\n  const manuallySaveEverything = useCallback(() => {\n    saveBlock(block)\n      .then(gottenBlock => {\n        if (gottenBlock._id !== block._id) {\n          setBlock(gottenBlock)\n        }\n      })\n  }, [saveBlock, block, setBlock])\n\n  // const isFirstRun = useRef(true)\n  // useEffect(() => {\n  //   if (isFirstRun.current) {\n  //     isFirstRun.current = false\n  //     return;\n  //   }\n  //\n  //   if (\n  //     Object.keys(block).length > 0\n  //     && JSON.stringify(initialBlock) !== JSON.stringify(block)\n  //   ) {\n  //     console.log('initialBlock', initialBlock)\n  //     console.log('block', block)\n  //   }\n  // }, [isFirstRun, initialBlock, block])\n\n  const rightHeaderActions = <div className=\"buttonRow\" style={{ whiteSpace: 'nowrap' }}>\n    {/* <button className=\"text\"><Localized id=\"path_editor_share\"/></button> */}\n\n\n    <LocalesMenu\n      trigger={triggerProps => (\n        <button {...triggerProps} className=\"text hasIcon\">\n          <TranslateIcon className=\"icon\" />\n          <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}>\n            {/* <Localized id=\"path_editor_translate\" /> */}\n            {getString('locale_'+currentLocale)}\n          </span>\n        </button>\n      )}\n    />\n\n    {\n      isSharingEditorOpen\n      ? <SharingEditor\n          defaultBlock={block}\n          open={isSharingEditorOpen}\n          onClose={closeSharingEditor}\n          onChange={savePermissions}\n        />\n      : null\n    }\n    <button className=\"text hasIcon\" onClick={openSharingEditor}>\n      <ShareIcon className=\"icon\" />\n      <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}><Localized id=\"path_editor_share\" /></span>\n    </button>\n\n    {\n      isPermissionsEditorOpen\n      ? <PermissionsEditor\n          defaultPermissions={permissions}\n          open={isPermissionsEditorOpen}\n          onClose={closePermissionsEditor}\n          onChange={savePermissions}\n        />\n      : null\n    }\n    <button className=\"text hasIcon\" onClick={openPermissionsEditor}>\n      <PermissionsIcon className=\"icon\" />\n      <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}><Localized id=\"path_editor_permissions\" /></span>\n    </button>\n\n    <button className=\"text hasIcon\" onClick={manuallySaveEverything}>\n      <SaveIcon className=\"icon\" />\n      <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}><Localized id=\"path_editor_save\" /></span>\n    </button>\n\n    <BlockMenu\n      {...{\n        block,\n        setType: saveType,\n      }}\n\n      trigger={props => (\n        <button\n          {...props}\n          className=\"white hasIcon\"\n        >\n          <BlockMenuIcon className=\"icon\" />\n        </button>\n      )}\n    />\n  </div>\n\n  return <div className={`hasHeader ${classes.editor}`}>\n    <Header\n      // title={<a href={`https://volt.link/${slug}`} target=\"_blank\" rel=\"noopener noreferrer\"><span className=\"hideOnSmallScreen\">volt.link</span>/{slug}</a>}\n      title={\n        <Link key={block._id} to=\"/\">\n          <button className=\"text hasIcon\" style={{ margin: '0' }}>\n            <BackIcon className=\"icon\"/>\n          </button>\n        </Link>\n      }\n      rightActions={rightHeaderActions}\n    />\n\n    <PropertiesEditor\n      type={type}\n      defaultProperties={properties}\n      onChange={saveProperties}\n    />\n\n    <ContentEditor\n      onChange={saveContent}\n      defaultValue={content}\n    />\n  </div>\n}\n\nexport default Editor\n","import { useCallback } from 'react'\n\nimport { useApolloClient } from '@apollo/client'\nimport { getBlocksByIds_Query } from '../graphql/queries'\n\nfunction useLoadBlocksByIds() {\n  const apollo_client = useApolloClient()\n\n  const handleLoadBlocksByIds = useCallback(ids => {\n    return new Promise(resolve => {\n      if (Array.isArray(ids) || ids.length > 0) {\n        apollo_client.query({\n          query: getBlocksByIds_Query,\n          variables: {\n            ids,\n          },\n        })\n          .then(async ({ data }) => {\n            if (typeof data.error === 'string' || !data.blocksByIds) {\n              console.error(data.error)\n              resolve([])\n            }else{\n              resolve(data.blocksByIds)\n            }\n          })\n          .catch(async error => {\n            console.error('error', error)\n            resolve([])\n          })\n      } else {\n        resolve([])\n      }\n    })\n  }, [apollo_client])\n\n  return handleLoadBlocksByIds\n}\n\nexport default useLoadBlocksByIds\n","import { useLocalization } from '../../fluent/Localized.js'\n\nfunction ViewerHeadline ({ block }) {\n  const { fluentByAny } = useLocalization()\n\n  const text = fluentByAny(block.properties.text, '')\n  return <h2 dir=\"auto\">{text}</h2>\n}\n\nexport default ViewerHeadline\n","import { useLocalization } from '../../fluent/Localized.js'\n\nfunction ViewerText ({ block }) {\n  const { fluentByAny } = useLocalization()\n\n  // console.log('block.properties.text', block.properties.text)\n  const text = fluentByAny(block.properties.text, '')\n  // console.log('text', text)\n  return <p dir=\"auto\">{text}</p>\n}\n\nexport default ViewerText\n","import { useLocalization } from '../../fluent/Localized.js'\n\nfunction ViewerButton ({ block }) {\n  const { fluentByAny } = useLocalization()\n\n  const text = fluentByAny(block.properties.text, '')\n  return <button dir=\"auto\" style={{ marginLeft: '0', marginRight: '0' }}>{text}</button>\n}\n\nexport default ViewerButton\n","export default function ViewerDivider () {\n  return <hr />\n}\n","import { useRef, useState, useEffect } from 'react'\n\nimport {\n  useParams,\n  Link,\n} from 'react-router-dom'\n\nimport { useLocalization, Localized } from '../fluent/Localized.js'\nimport useLoadBlock from '../hooks/useLoadBlock.js'\nimport useLoadBlocksByIds from '../hooks/useLoadBlocksByIds.js'\nimport useUser from '../hooks/useUser.js'\n\nimport Header from '../components/Header.js'\nimport ViewerHeadline from '../components/view/ViewerHeadline.js'\nimport ViewerText from '../components/view/ViewerText.js'\nimport ViewerButton from '../components/view/ViewerButton.js'\nimport ViewerDivider from '../components/view/ViewerDivider.js'\n\nimport classes from './Viewer.module.css'\n\nimport {\n  ArrowBackSharp as BackIcon,\n  EditSharp as EditIcon,\n} from '@mui/icons-material'\n\nfunction Viewer () {\n  const loadingTheBlock = useRef(false)\n\n  const { loggedIn } = useUser()\n\n  const loadBlock = useLoadBlock()\n  const loadBlocksByIds = useLoadBlocksByIds()\n\n  const { fluentByAny } = useLocalization()\n\n  let { id = '' } = useParams()\n\n  const [block, setBlock] = useState({\n    type: 'page',\n    properties: {},\n    content: [],\n  })\n  const [contentBlocks, setContentBlocks] = useState([])\n\n  useEffect(() => {\n    if (\n      loadingTheBlock.current === false\n      && typeof id === 'string'\n      && id !== ''\n      && id !== block._id\n    ) {\n      loadingTheBlock.current = true\n      loadBlock(id)\n        .then(loadedBlock => {\n          setBlock(loadedBlock)\n          const ids = loadedBlock.content.map(content => content.blockId)\n          loadBlocksByIds(ids)\n            .then(loadedContentBlocks => {\n              const contentBlocksOrdered = [...ids].map(id => loadedContentBlocks.find(block => block._id === id))\n              setContentBlocks([...contentBlocksOrdered])\n              loadingTheBlock.current = false\n            })\n        })\n    }\n  }, [\n    id,\n    block._id,\n    loadBlock,\n    setBlock,\n    loadBlocksByIds,\n    setContentBlocks,\n  ])\n\n  const title = fluentByAny(block.properties.text, '')\n  const description = fluentByAny(block.properties.description, '')\n  const coverphoto_url = block.properties.coverphoto || ''\n  const icon_url = block.properties.icon || ''\n\n  const leftHeaderActions = (\n    <Link to=\"/\">\n      <button className=\"text hasIcon\" style={{ margin: '0' }}>\n        <BackIcon className=\"icon\"/>\n      </button>\n    </Link>\n  )\n\n  const rightHeaderActions = <div className=\"buttonRow\" style={{ whiteSpace: 'nowrap' }}>\n    <Link to={`/edit/${block._id}`}>\n      <button className=\"text hasIcon\">\n        <EditIcon className=\"icon\" />\n        <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}><Localized id=\"edit_block\" /></span>\n      </button>\n    </Link>\n  </div>\n\n  return <>\n    {\n      loggedIn\n        ? <Header\n          leftActions={leftHeaderActions}\n          title=\"\"\n          rightActions={rightHeaderActions}\n        />\n        : null\n    }\n    <div className={`basis_x1 ${classes.app} ${classes.spine_aligned}`} dir=\"auto\">\n      {\n        coverphoto_url !== ''\n          ? <div style={{ backgroundImage: `url(${window.domains.backend}/download_url?url=${coverphoto_url})` }} className={classes.coverphoto}></div>\n          : null\n      }\n      <main className={`${classes.contentWrapper}`}>\n        {\n          icon_url !== ''\n            ? <div style={{ backgroundImage: `url(${window.domains.backend}/download_url?url=${icon_url})` }} className={classes.icon}></div>\n            : null\n        }\n        { title !== '' ? <h1 dir=\"auto\">{title}</h1> : null }\n        { description !== '' ? <p dir=\"auto\">{description.split(/\\n/g).flatMap(i => [i, <br key={i}/>])}<br/></p> : null }\n        <div className={classes.items}>\n          {\n            contentBlocks\n            .map(contentBlock => {\n              let component = null\n\n              switch (contentBlock.type) {\n                case 'headline':\n                  component = <ViewerHeadline key={contentBlock._id} block={contentBlock} />\n                  break\n                case 'text':\n                  component = <ViewerText key={contentBlock._id} block={contentBlock} />\n                  break\n                case 'button':\n                  component = <ViewerButton key={contentBlock._id} block={contentBlock} />\n                  break\n                case 'divider':\n                  component = <ViewerDivider key={contentBlock._id} block={contentBlock} />\n                  break\n                default:\n                  component = null\n              }\n\n              return <div key={contentBlock._id}>{component}</div>\n            })\n          }\n        </div>\n      </main>\n    </div>\n  </>\n}\n\nexport default Viewer\n","import React, { useState, useCallback, useEffect } from 'react'\n\nimport classes from './App.module.css'\n\nimport {\n  Switch,\n  Route,\n  useLocation,\n} from 'react-router-dom'\n\nimport {\n  SwipeableDrawer,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n} from '@mui/material'\n\nimport {\n  Menu as MenuIcon,\n  Email as ContactIcon,\n  GitHub as SourceCodeIcon,\n  Login as LoginIcon,\n  Logout as LogoutIcon,\n} from '@mui/icons-material'\n\nimport { withLocalization } from '../fluent/Localized.js'\n\nimport Localized from '../fluent/Localized.js'\nimport useUser from '../hooks/useUser.js'\nimport Chooser from './Chooser.js'\nimport Shortcode from './Shortcode.js'\nimport Editor from './Editor.js'\nimport Viewer from './Viewer.js'\n\nfunction App({ getString }) {\n  const { loggedIn } = useUser()\n\n  const location = useLocation()\n\n  const [customLocation, setCustomLocation] = useState({})\n\n  useEffect(() => {\n    const urlParams = new URLSearchParams(location.search)\n    const real_path = urlParams.get('real_path')\n\n    if (\n      customLocation.pathname !== real_path\n    ) {\n      if (\n        typeof real_path === 'string'\n        && real_path.length > 0\n      ) {\n        window.history.replaceState(null, '', location.pathname)\n        setCustomLocation({\n          pathname: real_path,\n        })\n      } else {\n        setCustomLocation(location)\n      }\n    }\n  }, [ location, customLocation, setCustomLocation ])\n\n  const [drawerIsOpen, setDrawerIsOpen] = useState(false)\n  const toggleDrawer = useCallback(() => {\n    setDrawerIsOpen(oldOpen => !oldOpen)\n  }, [ setDrawerIsOpen ])\n\n  const iOS = (typeof navigator !== 'undefined' && /iPad|iPhone|iPod/.test(navigator.userAgent))\n\n  const leftHeaderActions = <>\n    <button onClick={toggleDrawer} className=\"text hasIcon\" style={{ margin: '0' }}>\n      <MenuIcon className=\"icon\" />\n    </button>\n    <SwipeableDrawer\n      anchor=\"left\"\n      open={drawerIsOpen}\n      onOpen={toggleDrawer}\n      onClose={toggleDrawer}\n      disableBackdropTransition={!iOS}\n      disableDiscovery={iOS}\n    >\n      <List style={{ maxWidth: '100%' }}>\n        <a href=\"mailto:thomas.rosen@volteuropa.org\">\n          <ListItem button>\n            <ListItemIcon>\n              <ContactIcon />\n            </ListItemIcon>\n            <ListItemText primary={<Localized id=\"contact\" />} />\n          </ListItem>\n        </a>\n        <a href=\"https://github.com/voltbonn/edit.volt.link\" target=\"_blank\" rel=\"noopener noreferrer\">\n          <ListItem button>\n            <ListItemIcon>\n              <SourceCodeIcon />\n            </ListItemIcon>\n            <ListItemText primary={<Localized id=\"source_code\" />} />\n          </ListItem>\n        </a>\n        <br />\n        {\n          loggedIn\n            ? <a href={`${window.domains.backend}logout?redirect_to=${encodeURIComponent(window.location.toString())}`}>\n                <ListItem button>\n                  <ListItemIcon>\n                    <LogoutIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={<Localized id=\"logout\" />} />\n                </ListItem>\n              </a>\n            : <a href={`${window.domains.backend}login?redirect_to=${encodeURIComponent(window.location.toString())}`}>\n                <ListItem button>\n                  <ListItemIcon>\n                    <LoginIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={<Localized id=\"login\" />} />\n                </ListItem>\n              </a>\n        }\n      </List>\n    </SwipeableDrawer>\n  </>\n\n  return (<>\n    <div className={classes.app}>\n      {\n        loggedIn\n        ? <Switch location={customLocation}>\n            <Route path=\"/view/:id\">\n              <Viewer leftHeaderActions={leftHeaderActions} />\n            </Route>\n            <Route path=\"/edit/:id\">\n              <Editor leftHeaderActions={leftHeaderActions} />\n            </Route>\n            <Route path=\"/shortcode\">\n              <Shortcode leftHeaderActions={leftHeaderActions} />\n            </Route>\n            <Route path=\"/\">\n              <Chooser leftHeaderActions={leftHeaderActions} />\n            </Route>\n          </Switch>\n        : <Switch location={customLocation}>\n            <Route path=\"/view/:id\">\n              <Viewer leftHeaderActions={leftHeaderActions} />\n            </Route>\n            <Route path=\"/\">\n              <h1>Login to view content</h1>\n              <a href={`${window.domains.backend}login?redirect_to=${encodeURIComponent(window.location.toString())}`}>\n                <button className=\"hasIcon\" style={{ margin: 'var(--basis_x4) 0 0 0' }}>\n                  <LoginIcon className=\"icon\" />\n                  <span>\n                    <Localized id=\"login\" />\n                  </span>\n                </button>\n              </a>\n            </Route>\n          </Switch>\n      }\n    </div>\n  </>)\n}\n\nexport default withLocalization(App)\n","import React, { useEffect, useState } from 'react'\n\n// https://projectfluent.org/play/\n\n// import { LocalizationProvider, Localized } from '@fluent/react' // '@fluent/react/compat'\nimport { ReactLocalization, LocalizationProvider } from '@fluent/react'\nimport { FluentBundle, FluentResource } from '@fluent/bundle'\nimport { negotiateLanguages } from '@fluent/langneg'\n\n\nexport const locales = {\n  de: 'Deutsch',\n  en: 'English',\n  // es: 'Español',\n  // pt: 'Português',\n  fr: 'Français',\n  // it: 'Italiano',\n  // nl: 'Dutch',\n  // pl: 'Polska',\n  // ru: 'Pусский',\n}\n\nconst _supportedLocales_ = Object.keys(locales)\nconst _defaultLocale_ = 'en'\n\n\nasync function fetchMessages(locale) {\n  const path = await import('../locales/' + locale + '.ftl')\n\n  const response = await fetch(path.default)\n  const messages = await response.text()\n\n  return { [locale]: new FluentResource(messages) }\n}\n\nfunction getDefaultBundles() {\n  const bundle = new FluentBundle('')\n  bundle.addResource(new FluentResource(''))\n  return new ReactLocalization([bundle])\n}\n\nasync function createMessagesGenerator(currentLocales) {\n  const fetched = await Promise.all(\n    currentLocales.map(fetchMessages)\n  )\n  const messages = fetched.reduce(\n    (obj, cur) => Object.assign(obj, cur)\n  )\n\n  return function* generateBundles() {\n    for (const locale of currentLocales) {\n      const bundle = new FluentBundle(locale)\n      bundle.addResource(messages[locale])\n      yield bundle\n    }\n  }\n}\n\nexport function AppLocalizationProvider({ userLocales, children, onLocaleChange }) {\n  const [bundles, setBundles] = useState(getDefaultBundles())\n\n  useEffect(() => {\n    async function loadBundles() {\n      const currentLocales = negotiateLanguages(\n        userLocales,\n        _supportedLocales_,\n        { defaultLocale: _defaultLocale_ }\n      )\n\n      if (!!onLocaleChange) {\n        onLocaleChange(currentLocales)\n      }\n\n      const generateBundles = await createMessagesGenerator(currentLocales)\n\n      const new_bundles = new ReactLocalization(generateBundles())\n      new_bundles.userLocales = userLocales\n      new_bundles.defaultLocale = _defaultLocale_\n      new_bundles.supportedLocales = _supportedLocales_\n      setBundles(new_bundles)\n    }\n    loadBundles()\n  }, [userLocales, onLocaleChange])\n\n  if (!bundles) {\n    // Show a loader.\n    return <div>Loading texts…</div>\n  }\n\n  return <LocalizationProvider l10n={bundles}>\n    {children}\n  </LocalizationProvider>\n}\n\n","import React, { useState, useEffect, useCallback } from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './pages/App.js'\n// import reportWebVitals from './reportWebVitals'\nimport { BrowserRouter as Router } from 'react-router-dom'\n\nimport 'intl-pluralrules'\nimport { AppLocalizationProvider, locales } from './fluent/l10n.js'\nimport { TranslatedInputProvider } from './components/edit/TranslatedInput.js'\n\nimport useMediaQuery from '@mui/material/useMediaQuery'\nimport { createTheme, ThemeProvider } from '@mui/material/styles'\n\nimport { SnackbarProvider } from 'notistack'\n\nimport {\n  ApolloClient,\n  InMemoryCache,\n  ApolloProvider,\n} from '@apollo/client'\n\nwindow.domains = {\n  frontend: 'https://beta.volt.link',\n  // frontend: 'http://localhost:3000/',\n  backend: 'https://api.volt.link/',\n  // backend: 'http://localhost:4004/',\n}\n\nconst client = new ApolloClient({\n  uri: window.domains.backend+'graphql/v1/',\n  cache: new InMemoryCache(),\n  defaultOptions: {\n    watchQuery: {\n      fetchPolicy: 'cache-and-network',\n    },\n  },\n})\n\n// client\n//   .query({\n//     query: gql`\n//       query GetRates {\n//         rates(currency: \"USD\") {\n//           currency\n//         }\n//       }\n//     `\n//   })\n//   .then(result => console.info(result));\n\nfunction Start() {\n  // const [userLocales, setUserLocales] = useState(['de'])\n  const [userLocales, setUserLocales] = useState(navigator.languages)\n  const [currentLocale, setCurrentLocale] = useState(null)\n\n  useEffect(() => {\n    if (!!window.umami) {\n      let systemLocales = navigator.languages\n      if (!!systemLocales || Array.isArray(systemLocales)) {\n        for (let locale of systemLocales) {\n          locale = locale.toLowerCase() // Not really correct but the system locales sadly don't conform to the standard.\n\n          const language = locale.split('-')[0]\n          if (language !== locale) {\n            window.umami.trackEvent('L: ' + language) // Log just the language.\n          }\n          window.umami.trackEvent('L: ' + locale) // Log the full locale.\n        }\n      }\n    }\n  }, [])\n\n  const handleLanguageChange = useCallback(event => {\n    setUserLocales([event.target.dataset.locale])\n  }, [setUserLocales])\n\n  const handleCurrentLocalesChange = useCallback(currentLocales => {\n    setCurrentLocale(currentLocales.length > 0 ? currentLocales[0] : '')\n  }, [setCurrentLocale])\n\n\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)')\n\n  const theme = React.useMemo(\n    () =>\n      createTheme({\n        palette: {\n          mode: prefersDarkMode ? 'dark' : 'light',\n        },\n      }),\n    [prefersDarkMode],\n  )\n\n  return <>\n  <div\n    id=\"react-notification\"\n    key=\"react-notification\"\n    style={{zIndex: '10000'}}\n  ></div>\n\n  <AppLocalizationProvider\n    key=\"AppLocalizationProvider\"\n    userLocales={userLocales}\n    onLocaleChange={handleCurrentLocalesChange}\n  >\n    <ApolloProvider client={client}>\n      <ThemeProvider theme={theme}>\n        <SnackbarProvider\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'right',\n          }}\n          domRoot={document.getElementById('react-notification')}\n        >\n          <TranslatedInputProvider>\n            <Router>\n              <App locales={locales} currentLocale={currentLocale} onLanguageChange={handleLanguageChange} />\n            </Router>\n          </TranslatedInputProvider>\n        </SnackbarProvider>\n      </ThemeProvider>\n    </ApolloProvider>\n  </AppLocalizationProvider>\n  </>\n}\n\nReactDOM.render(<Start />, document.getElementById('root'))\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.info))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogsWrapper\":\"PermissionsEditor_dialogsWrapper__1xVvi\",\"dialog\":\"PermissionsEditor_dialog__2rpyk\",\"backdrop\":\"PermissionsEditor_backdrop__1dRPN\",\"inputWrapper\":\"PermissionsEditor_inputWrapper__4DGsr\",\"emailInput\":\"PermissionsEditor_emailInput__1uH8s\",\"permissionRow\":\"PermissionsEditor_permissionRow__2HaWO\",\"menuButton\":\"PermissionsEditor_menuButton__2jIMI\",\"ownerInfo\":\"PermissionsEditor_ownerInfo__EEKXP\",\"actions\":\"PermissionsEditor_actions__k4oBn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"Viewer_app__1_jMF\",\"spine_aligned\":\"Viewer_spine_aligned__2mJuq\",\"coverphoto\":\"Viewer_coverphoto__16R-U\",\"icon\":\"Viewer_icon__219E5\",\"contentWrapper\":\"Viewer_contentWrapper__1HLN8\",\"items\":\"Viewer_items__2FgjF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog\":\"SharingEditor_dialog__22jfY\",\"backdrop\":\"SharingEditor_backdrop__1Gra9\",\"inputWrapper\":\"SharingEditor_inputWrapper__1UyBD\",\"input\":\"SharingEditor_input__brkXK\",\"actions\":\"SharingEditor_actions__2zz6x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_headline\":\"PropertiesEditor_main_headline__3wy7R\",\"propertiesFrame\":\"PropertiesEditor_propertiesFrame__1uBEz\",\"properties_row\":\"PropertiesEditor_properties_row__2tX7M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"InlineEditorBlock_block__14-zd\",\"block_input\":\"InlineEditorBlock_block_input__2I1iu\",\"form_deactivated\":\"InlineEditorBlock_form_deactivated__2oktp\",\"form_active\":\"InlineEditorBlock_form_active__hi5HC\",\"reorderHandle\":\"InlineEditorBlock_reorderHandle__2_s23\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"ContentEditor_row__JonRI\",\"form\":\"ContentEditor_form__wtoB9\",\"item\":\"ContentEditor_item__3U0XE\",\"inlineRowButton\":\"ContentEditor_inlineRowButton__2pw6r\",\"dragHandleButton\":\"ContentEditor_dragHandleButton__1Y_RP\"};"],"sourceRoot":""}