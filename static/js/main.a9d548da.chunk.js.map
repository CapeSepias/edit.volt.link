{"version":3,"sources":["pages/Editor.module.css","components/Repeater.module.css","components/Header.module.css","pages/Chooser.module.css","pages/Shortcode.module.css","pages/App.module.css","components/FancyInput.module.css","locales lazy /^/.//.*/.ftl$/ groupOptions: {} namespace object","fluent/Localized.js","hooks/useUser.js","components/Header.js","hooks/useKeyPress.js","pages/Chooser.js","components/UrlInput.js","components/FancyInput.js","pages/Shortcode.js","images/layout-default.svg","images/layout-person.svg","images/qr_code_24pd.svg","images/assessment_24dp.svg","images/publish_24dp.svg","images/coverphotos/thumbs/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.png","images/coverphotos/thumbs/Aktion.png","images/coverphotos/thumbs/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.png","images/coverphotos/thumbs/Welcome-to-Volt.png","components/MultiButton.js","components/InputWithLocal.js","components/PermissionInput.js","components/EmailInput.js","components/HtmlInput.js","components/Repeater.js","pages/Editor.js","pages/App.js","fluent/l10n.js","index.js"],"names":["module","exports","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","Localized","props","elems","br","Fragment","children","withLocalization","Inner","l10n","React","useContext","FluentContext","createElement","fluentByObject","object","fallback","globalSupportedLocales","supportedLocales","thisSupportedLocales","filter","locale","includes","currentLocales","negotiateLanguages","userLocales","defaultLocale","getString","args","useUser","forceRefetch","useState","user","setUser","loggedIn","setLoggedIn","useEffect","window","hasOwnProperty","useUser_user","useUser_loggedIn","fetch","domains","backend","mode","credentials","response","json","data","status","username","email","split","catch","error","console","Header","title","rightActions","notificationBanner","className","classes","header","headerBar","useKeyPress","callback","onKeyup","event","key","addEventListener","removeEventListener","rightHeaderActions","user_editable_links","editable","userPageAlreadyExists","setUserPageAlreadyExists","history","useHistory","forbidden","setForbidden","value","setValue","alreadyExists","setAlreadyExists","setError","push","handleCheckIfPathExists","useCallback","newValue","target","toLowerCase","forbidden_letters","letters","newValue_split","forbidden_letters_filtered","codes","length","startsWith","allowed","exists","to","style","marginLeft","marginRight","vars","chooserInput","hideSubmitButton","domainPrefix","type","placeholder","onChange","content","href","slug","flatMap","slice","role","rel","url_regex","email_regex","is_email_not_url_regex","UrlInput","defaultValue","onError","handleTextChange","log","isSubmittable","schema_parts","schema","shift","after_schema","join","match","FancyInput","redirectLink","setRedirectLink","setIsSubmittable","generateRedirectLink","handleRedirectLink","use_as","redirect","method","headers","body","JSON","stringify","r","a","input","flexGrow","display","flexDirection","onClick","MultiButton","ariaLabel","items","choosen","setChoosen","handleClick","dataset","item","icon","pointerEvents","verticalAlign","locales","en","de","es","pt","fr","it","nl","da","sv","nb","fi","mt","ru","tr","ar","entries","nativeName","InputWithLocal","reorderHandle","wrapperDiv","useRef","changedLocale","setChangedLocale","changedValue","setChangedValue","handleLocaleChange","current","event_or_value","ref","alignItems","maxWidth","margin","PermissionInput","changedRole","setChangedRole","handleRoleChange","EmailInput","HtmlInput","fake_defaultValue","__html","replace","innerHTML","trim","addLineBreaks","document","execCommand","preventDefault","handlePaste","text","originalEvent","clipboardData","getData","onKeyDown","onInput","onPaste","whiteSpace","paddingBottom","contentEditable","dangerouslySetInnerHTML","Repeater","addDefaultValue","addButtonText","reorderLabel","render","prependNewItems","showReorderControls","isReorderable","rows","setRows","tmp_defaultValue","Array","isArray","handleRemoveRow","index","new_rows","splice","rows_from_onChange","handleRowChange","_id","handleAddRow","parseInt","isNaN","hasOnlyOneRow","addButton","textAlign","addRowButton","marginBottom","onDragEnd","result","destination","source","list","startIndex","endIndex","from","removed","reorder","droppableId","isDropDisabled","provided","innerRef","droppableProps","subDefaultValue","draggableId","isDragDisabled","disableInteractiveElementBlocking","draggableProps","row","middleActions","trigger","inlineRowButton","form","dragHandleProps","Item","setType","setTitle","setText","link","setLink","active","setActive","handleChange_Type","handleChange_Title","handleChange_Text","handleChange_Link","toggle_Active","chooseTypeScreen","itemSettingsRow","itemSettingsRowLeft","active_toggle_wrapper","Visibility","active_toggle_icon","VisibilityOff","form_active","form_deactivated","marginTop","uuidv4","repeater_props","InputWithLocal_props","width","Items","addIds","array","delay","time","setTimeout","useParams","loadingContent","setLoadingContent","canEdit","setCanEdit","savingMessage","setSavingMessage","useAs","setUseAs","handleUseAsChange","layout","setLayout","handleLayoutChange","description","setDescription","permissionsDefault","useMemo","permissions","setPermissions","handleChange_Permissions","p","unshift","viewPermission","setViewPermission","coverphoto","setCoverphoto","imprintOverwrite","setImprintOverwrite","privacyPolicyOverwrite","setPrivacyPolicyOverwrite","setRedirect","setItems","handleChange_Items","overwrites","imprint","privacy_policy","viewPermissionTmp","handleSave","permissionsTmp","message","viewStatistics","click","src","icon_qr_code","icon_assessment","icon_publish","editor_form","layoutDefault","layoutPerson","height","ratio","volt_bonn_thumb","welcome_to_volt_thumb","plakatschlange_thumb","aktion_thumb","alt","editor","menuRouteMatch","useRouteMatch","selected_route","params","loginLogoutButton","new_selected","open","encodeURIComponent","location","toString","app","path","Shortcode","_supportedLocales_","_defaultLocale_","fetchMessages","default","messages","FluentResource","createMessagesGenerator","all","fetched","reduce","obj","cur","assign","generateBundles","bundle","FluentBundle","addResource","f","AppLocalizationProvider","onLocaleChange","ReactLocalization","getDefaultBundles","bundles","setBundles","new_bundles","loadBundles","AppLanguageWrapper","navigator","languages","setUserLocales","currentLocale","setCurrentLocale","umami","systemLocales","language","trackEvent","handleLanguageChange","handleCurrentLocalesChange","onLanguageChange","frontend","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a9d548da.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"editor\":\"Editor_editor__2hX0g\",\"loadingContent\":\"Editor_loadingContent__2fqdK\",\"item\":\"Editor_item__3sX2B\",\"chooseTypeScreen\":\"Editor_chooseTypeScreen__3G3o8\",\"itemSettingsRow\":\"Editor_itemSettingsRow__2Z6Xh\",\"itemSettingsRowLeft\":\"Editor_itemSettingsRowLeft__235UR\",\"active_toggle_wrapper\":\"Editor_active_toggle_wrapper__3tPCG\",\"ion_toggle\":\"Editor_ion_toggle__2lGcG\",\"active_label\":\"Editor_active_label__3qS1e\",\"form_deactivated\":\"Editor_form_deactivated__2bH62\",\"form_active\":\"Editor_form_active__3nax4\",\"active_toggle_icon\":\"Editor_active_toggle_icon__O5fBq\",\"active\":\"Editor_active__mXNFR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"Repeater_row__1ODoF\",\"middleActions\":\"Repeater_middleActions__3nRoT\",\"trigger\":\"Repeater_trigger__1VtG5\",\"content\":\"Repeater_content__110R9\",\"form\":\"Repeater_form__2N6kw\",\"item\":\"Repeater_item__2OI78\",\"inlineRowButton\":\"Repeater_inlineRowButton__uqk8Y\",\"addRowButton\":\"Repeater_addRowButton__3huSP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3mObx\",\"headerBar\":\"Header_headerBar__2YU41\",\"notificationBanner\":\"Header_notificationBanner__104SP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chooserInput\":\"Chooser_chooserInput__JXUde\",\"hideSubmitButton\":\"Chooser_hideSubmitButton__5jsIt\",\"domainPrefix\":\"Chooser_domainPrefix__2HRVV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"Shortcode_input__Av6rm\",\"hideSubmitButton\":\"Shortcode_hideSubmitButton__mbXgB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3hbGO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"FancyInput_error__2dhxG\"};","var map = {\n\t\"./de.ftl\": [\n\t\t72,\n\t\t3\n\t],\n\t\"./en.ftl\": [\n\t\t73,\n\t\t4\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 70;\nmodule.exports = webpackAsyncContext;","import React from 'react'\nimport {\n  Localized as LocalizedOriginal,\n  // withLocalization,\n} from '@fluent/react'\nimport { negotiateLanguages } from '@fluent/langneg'\n\nimport { FluentContext } from '../../node_modules/@fluent/react/esm/context.js'\n\nconst Localized = props => (\n  <LocalizedOriginal\n    key={props.id}\n    {...props}\n    elems={{\n      br: <br />,\n      ...props.elems,\n    }}\n  >\n    <React.Fragment>{props.children}</React.Fragment>\n  </LocalizedOriginal>\n)\n\n// A custom withLocalization to have an empty fallback.\n// It is nearly identical to the original.\nfunction withLocalization(Inner) {\n  function WithLocalization(props) {\n    const l10n = React.useContext(FluentContext)\n\n    const getString = (id, args, fallback) => l10n.getString(id, args, fallback || ' ')\n\n    const fluentByObject = (object, fallback) => {\n      if (!(!!fallback)) {\n        fallback = null\n      }\n\n      if (!!object) {\n        const globalSupportedLocales = l10n.supportedLocales || []\n        const thisSupportedLocales = Object.keys(object).filter(locale => globalSupportedLocales.includes(locale))\n\n        const currentLocales = negotiateLanguages(\n          l10n.userLocales,\n          thisSupportedLocales,\n          { defaultLocale: l10n.defaultLocale }\n        )\n\n        for (const locale of currentLocales) {\n          if (!!object[locale]) {\n            return object[locale]\n          }\n        }\n\n        return fallback\n      }\n\n      return fallback\n    }\n\n    return React.createElement(Inner, { fluentByObject, getString, ...props })\n  }\n  return WithLocalization\n}\n\nexport {\n  withLocalization,\n  Localized,\n  Localized as default,\n}\n\n/*\n\nimport { Localized, withLocalization } from '../Localized/'\n\n<Localized id=\"translation_id\" />\nexport default withLocalization(componentName)\n\n\nimport Localized from '../Localized/'\n<Localized id=\"translation_id\" />\n\nimport { withLocalization } from '@fluent/react'\nexport default withLocalization(componentName)\n\n*/\n","import { useState, useEffect } from 'react'\n\nexport default function useUser(forceRefetch = false) {\n  const [user, setUser] = useState({})\n  const [loggedIn, setLoggedIn] = useState(false)\n\n  useEffect(() => {\n    if (forceRefetch !== true && window.hasOwnProperty('useUser_user') && window.hasOwnProperty('useUser_loggedIn')) {\n      setUser(window.useUser_user)\n      setLoggedIn(window.useUser_loggedIn)\n    }else{\n      fetch(`${window.domains.backend}user.json`, {\n        mode: 'cors',\n        credentials: 'include',\n      })\n        .then(response => response.json())\n        .then(data => {\n          if (\n            !!data\n            && !!data.user\n            && !!data.user.id\n            && !!data.user.status\n          ) {\n            data.user.username = (!!data.user.email ? data.user.email || '' : '').split('@')[0]\n\n            window.useUser_user = data.user\n            window.useUser_loggedIn = true\n            setUser(data.user)\n            setLoggedIn(true)\n          } else {\n            window.useUser_user = {}\n            window.useUser_loggedIn = false\n            setUser({})\n            setLoggedIn(false)\n          }\n        })\n        .catch(error => console.error(error))\n    }\n  }, [forceRefetch, setUser, setLoggedIn])\n\n  return [user, loggedIn]\n}\n","import classes from './Header.module.css'\n\nexport default function Header({ title, rightActions, notificationBanner }) {\n  return <header className={classes.header}>\n    <div className={classes.headerBar}>\n      <h2>{title}</h2>\n      {rightActions}\n    </div>\n    {\n      !!notificationBanner\n        ? <div className={classes.notificationBanner}>{notificationBanner}</div>\n        : null\n    }\n  </header>\n}\n","import { useEffect } from 'react'\n\nexport default function useKeyPress(keys, callback) {\n  useEffect(() => {\n    function onKeyup(event) {\n      if (keys.includes(event.key)) {\n        callback(event)\n      }\n    }\n    window.addEventListener('keyup', onKeyup)\n    return () => window.removeEventListener('keyup', onKeyup)\n  }, [keys, callback])\n}\n","import { Fragment, useState, useCallback, useEffect } from 'react'\nimport classes from './Chooser.module.css'\n\nimport { Link, useHistory } from 'react-router-dom'\n\nimport { withLocalization, Localized } from '../fluent/Localized.js'\nimport useKeyPress from '../hooks/useKeyPress.js'\nimport useUser from '../hooks/useUser.js'\nimport Header from '../components/Header.js'\n\nfunction Chooser({ getString, rightHeaderActions }) {\n  const [user, ] = useUser()\n  const username = user.username || ''\n  const user_editable_links = (user.editable || [])\n  const [userPageAlreadyExists, setUserPageAlreadyExists] = useState(null)\n\n  const history = useHistory()\n  const [forbidden, setForbidden] = useState({})\n  const [value, setValue] = useState('')\n  const [alreadyExists, setAlreadyExists] = useState(null)\n  const [error, setError] = useState('')\n\n  useKeyPress(['Enter'], () => {\n    history.push(`/edit/${value}`)\n  })\n\n  const handleCheckIfPathExists = useCallback(event => {\n    const newValue = (event.target.value || '').toLowerCase()\n    setValue(newValue)\n\n    const forbidden_letters = (forbidden.letters || '').split('')\n    const newValue_split = (newValue || '').split('')\n    const forbidden_letters_filtered = forbidden_letters.filter(value => !newValue_split.includes(value))\n\n    const forbidden_codes = forbidden.codes || []\n    const value_is_a_forbidden_code = forbidden_codes.includes(newValue)\n\n    if (value_is_a_forbidden_code) {\n      setAlreadyExists(null)\n      setError('This path is not allowed.')\n    } else if (forbidden_letters_filtered.length < forbidden_letters.length) {\n      setAlreadyExists(null)\n      setError('This path contains forbidden characters.')\n    } else if (newValue.startsWith('volt')) {\n      setAlreadyExists(null)\n      setError('A path can\\'t start with \"volt\".')\n    } else if (newValue === '') {\n      setAlreadyExists(null)\n      setError('')\n    } else {\n      setError('')\n      fetch(`${window.domains.backend}quickcheck/${newValue}`, {\n        mode: 'cors',\n        credentials: 'include',\n      })\n        .then(response => response.json())\n        .then(data => {\n          if (data.allowed === false) {\n            setAlreadyExists(null)\n            setError('You are not allowed to edit this code.')\n          } else {\n            if (data.exists === true) {\n              setAlreadyExists(true)\n              setError('')\n            } else if (newValue_split.includes('.')) {\n              setAlreadyExists(null)\n              setError('Codes with a dot are restricted to people. Please contact thomas.rosen@volteuropa.org to use volt.link for your Volt Account.')\n            } else {\n              setAlreadyExists(false)\n              setError('')\n            }\n          }\n        })\n        .catch(error => {\n          console.error(error)\n          setAlreadyExists(false)\n        })\n    }\n  }, [setValue, setAlreadyExists, forbidden.letters, forbidden.codes])\n\n  useEffect(() => {\n    fetch(`${window.domains.backend}forbidden_codes/`, {\n      mode: 'cors',\n      credentials: 'include',\n    })\n      .then(response => response.json())\n      .then(data => {\n        setForbidden(data)\n      })\n      .catch(error => {\n        console.error(error)\n        setForbidden({})\n      })\n  }, [setForbidden])\n\n  useEffect(() => {\n    const newValue = (username || '').toLowerCase()\n\n    if (newValue !== '') {\n      fetch(`${window.domains.backend}quickcheck/${newValue}`, {\n        mode: 'cors',\n        credentials: 'include',\n      })\n        .then(response => response.json())\n        .then(data => {\n          if (data.allowed === false) {\n            setUserPageAlreadyExists(null)\n          } else {\n            if (data.exists === true) {\n              setUserPageAlreadyExists(true)\n            } else {\n              setUserPageAlreadyExists(false)\n            }\n          }\n        })\n        .catch(error => {\n          console.error(error)\n          setUserPageAlreadyExists(false)\n        })\n    } else {\n      setUserPageAlreadyExists(null)\n    }\n  }, [username, setUserPageAlreadyExists])\n\n  return <div>\n    <Header\n      title={<Localized id=\"chooser_header_title\" />}\n      rightActions={rightHeaderActions || null}\n    />\n\n    {\n      username !== ''\n        ? <>\n          <h2><Localized id={userPageAlreadyExists === true ? 'edit_user_page_headline' : 'create_user_page_headline'} /></h2>\n          <p><Localized id={userPageAlreadyExists === true ? 'edit_user_page_info' : 'create_user_page_info'} /></p>\n          <Link to={`/edit/${username}`}>\n            <button style={{ marginLeft: '0', marginRight: '0' }}>\n              <Localized\n                id={userPageAlreadyExists === true ? 'edit_user_page_button' : 'create_user_page_button'}\n                vars={{ username }}\n              />\n            </button>\n          </Link>\n          <br />\n          <br />\n        </>\n        : null\n    }\n    <h2><Localized id=\"chooser_any_link_headline\" /></h2>\n    <p><Localized id=\"chooser_any_link_info\" /></p>\n\n    <div className={`${classes.chooserInput} ${alreadyExists === null ? classes.hideSubmitButton : ''}`}>\n      <p className={classes.domainPrefix}>volt.link/</p>\n      <input type=\"text\" placeholder={getString('type_a_path')} onChange={handleCheckIfPathExists}/>\n      {\n        alreadyExists === null\n          ? null\n          : <Link to={`/edit/${value}`}>\n              <button className=\"green\">\n              {alreadyExists ? getString('edit_path_button') : getString('create_path_button')}\n              </button>\n            </Link>\n      }\n    </div>\n    {\n      error !== ''\n        ? <>\n          <h3 className=\"red\"><Localized id=\"headline_errors\" /></h3>\n          <p>{error}</p>\n        </>\n        : null\n    }\n\n    {\n      user_editable_links.length > 0\n        ? <>\n          <br />\n          <div className=\"buttonRow usesLinks\">\n            {user_editable_links.map(content => <a key={content.slug} href={`/edit/${content.slug}`}><button>{content.slug}</button></a>)}\n          </div>\n        </>\n        : null\n    }\n\n    <br />\n    <hr />\n\n    <h2>Restrictions</h2>\n    <ul>\n      <li>These letters are not allowed: <code>{forbidden.letters || ''}</code> (And of course: Don't use whitespace!)</li>\n      <li>\n        These paths are not allowed: {\n          (forbidden.codes || [])\n          .filter(code => !code.includes('/') && !code.includes('.'))\n          .flatMap(code => [<code key={code}>{code}</code>, <Fragment key={code+'separator'}>, </Fragment>])\n          .slice(0, -1)\n        }\n      </li>\n      <li>The dot (<code>.</code>) is used for Volt Accounts.</li>\n    </ul>\n\n    <h2>Best Practices</h2>\n\n    <h3>General</h3>\n    <ul>\n      <li>Keep it short!</li>\n      <li>Seperate words with hyphens (<code>-</code>). This makes it readable by humans and parsable by search engines. (Try not to use underscores (<code>_</code>). Your favorite search provider will thank you :D)</li>\n      <li>It is not important if you use upper- or lower-case letters.</li>\n      <li>Use letters people can type. The less international characters the better.</li>\n      <li>\n        <span role=\"img\" aria-label=\"EU-flag-emoji\">🇪🇺</span> Emojis are possible. But like before. Use them sparingly and check if others can type and see them on their device.<br/>\n        <a href=\"https://emojipedia.org/emoji-11.0/\" target=\"_blank\" rel=\"noopener noreferrer\">Emoji 11</a> and earlier should be okay.<br/>\n        And better don't mix emojis and normals letters.\n      </li>\n    </ul>\n\n    <h3>City Teams</h3>\n    <p>Use the name of your city team without the Volt prefix or a common international name.</p>\n    <p>If two cities have the same name, add your country's <a href=\"https://en.wikipedia.org/wiki/List_of_ISO_3166_country_codes\" target=\"_blank\" rel=\"noopener noreferrer\">two letter shortcode</a> before it (eg: <code className=\"filled\">de-bonn</code>).</p>\n    <p>Use the full city/state/team name if possible. Not everybody knows the abbreviation. But keep it short.</p>\n    <p>Example:</p>\n    <ul>\n      <li>Volt Bonn → <code className=\"filled\">bonn</code></li>\n      <li>Volt Köln → <code className=\"filled\">köln</code> or <code className=\"filled\">cologne</code></li>\n    </ul>\n\n    <h3>Personal Pages</h3>\n    <p>The link of your personal page should match your Volt Europa account.</p>\n    <p>We want to look professional, so please don't use your socialmedia handle.</p>\n    <p>We are a lot of people in Volt. People with the same first or lastname exist. To prevent name collisions, use your Volt Account username. (The part before the @ sign.)</p>\n    <p>Examples for \"Thomas Rosen\":</p>\n    <ul>\n      <li>Do → <code className=\"filled\">thomas.rosen</code></li>\n      <li>Don't → <code className=\"filled\">thomas_rosen_official_123</code>, <code className=\"filled\">thomas</code> or <code className=\"filled\">rosen</code></li>\n    </ul>\n\n    <h3>Redirects</h3>\n    <p>There are three options of naming redirects:</p>\n    <ul>\n      <li>random letters or words (<code className=\"filled\">123abc</code>),</li>\n      <li>words describing the redirect content (<code className=\"filled\">de-events</code>) and</li>\n      <li>words describing where the redirect content is used (<code className=\"filled\">flyer-bonn</code>).</li>\n    </ul>\n    <p>Use a random text or describe where the redirect is used if you'll change the link in the future.</p>\n\n    <h3>Translation</h3>\n    <p>You can provide translations for text for these langues:</p>\n    <ul>\n      <li>English</li>\n      <li>Deutsch</li>\n      <li>Español</li>\n      <li>Francais</li>\n      <li>Italiano</li>\n      <li>Nederlands</li>\n      <li>Portugues</li>\n    </ul>\n    <p>Contact <a href=\"mailto:thomas.rosen@volteuropa.org\">Thomas</a> for more languages. We'll add more as needed. {/*(We're aspecially interested in people speaking Arabic.)*/}</p>\n\n    <h3>Email Addresses</h3>\n    <p>You can of course link to email addresses.</p>\n    <p>But like you write <code className=\"filled\">https://</code> before normal links, you need to write <code className=\"filled\">mailto:</code> before email addresses.</p>\n    <p>Examples:</p>\n    <ul>\n      <li>bonn@voltdeutschland.org → <code className=\"filled\">mailto:bonn@voltdeutschland.org</code></li>\n    </ul>\n\n    <h3>Legal</h3>\n    <p>The default imprint is the one from Volt Europa. You can change it to the correct link of your chapter.</p>\n\n    <h3>Statistics</h3>\n    <p>As with the whole volt.link project, the statistics are currently in beta.</p>\n\n    <h3>Deletion</h3>\n    <p>Links can't be deleted as nobody likes to scan a QR-Code, just to receive an <a href=\"https://volt.link/error\">error page</a>.</p>\n    <p>But links can of course be reused. Contact <a href=\"mailto:thomas.rosen@volteuropa.org\">Thomas</a> if you need get access to a link.</p>\n  </div>\n}\n\nexport default withLocalization(Chooser)\n\n/*\n\n\n    <input\n      type=\"text\"\n      placeholder=\"title\"\n      style={{\n        marginRight: '0',\n        marginLeft: '0'\n      }}\n    />\n    <textarea\n      placeholder=\"description\"\n      style={{\n        marginRight: '0',\n        marginLeft: '0'\n      }}\n    />\n*/\n","import { useCallback } from 'react'\n\nconst url_regex = /^([A-Z0-9+-.]+:(?:\\/\\/)?)?[\\w\\u00C0-\\u00FF_.-]+(?:\\.[\\w\\u00C0-\\u00FF_.-]+)+[\\w\\u00C0-\\u00FF_~:/?#[\\]!%$&'()@*+,;=.-]+$/gui\nconst email_regex = /^(?:(?:[^<>()[\\]\\\\.,;:\\s@\"]+(?:\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(?:\".+\"))@(?:(?:\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})|(?:(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,})\\.?)$/gui\nconst is_email_not_url_regex = /^[^:/]+@.+$/gui\n\nfunction UrlInput({ defaultValue, onChange, onError, ...props }) {\n  const handleTextChange = useCallback((event) => {\n        console.log('-----')\n    if (onChange || onError) {\n      const value = event.target.value || ''\n      let isSubmittable = false\n      let error = ''\n\n      if (value !== '') {\n        const schema_parts = value.split(':')\n        const schema = schema_parts.shift()\n        const after_schema = schema_parts.join(':')\n\n        if (schema === 'tel') {\n          isSubmittable = true\n        } else if (schema === 'mailto' || value.match(is_email_not_url_regex)) {\n          if (after_schema.match(email_regex)) {\n            isSubmittable = true\n          } else {\n            error = 'invalid_mailto_url'\n          }\n        } else {\n          if (value.match(url_regex)) {\n            isSubmittable = true\n          } else {\n            error = 'invalid_url'\n          }\n        }\n      }\n\n      if (onChange) {\n        if (isSubmittable) {\n          onChange(value)\n        } else {\n          onChange('')\n        }\n      }\n\n      if (onError) {\n        onError(error)\n      }\n    }\n  }, [onChange, onError])\n\n  return <input\n    type=\"url\"\n    onChange={handleTextChange}\n    defaultValue={defaultValue}\n    {...props}\n  />\n}\n\nexport default UrlInput\n","import { useState } from 'react'\n\nimport { Localized } from '../fluent/Localized.js'\nimport classes from './FancyInput.module.css'\n\nfunction FancyInput({ children, className, ...props }) {\n  const [error, setError] = useState('')\n\n  return <div\n    {...props}\n  >\n    {children({ setError })}\n    {error ? <div className={classes.error}><Localized id={'error_'+error} /></div> : null}\n  </div>\n}\n\nexport default FancyInput\n","import React, { useState, useCallback } from 'react'\nimport classes from './Shortcode.module.css'\n\nimport { useHistory } from 'react-router-dom'\n\nimport { withLocalization, Localized } from '../fluent/Localized.js'\nimport useKeyPress from '../hooks/useKeyPress.js'\nimport Header from '../components/Header.js'\nimport UrlInput from '../components/UrlInput.js'\nimport FancyInput from '../components/FancyInput.js'\n\nfunction Redirect({ getString, rightHeaderActions }) {\n  const history = useHistory()\n  const [redirectLink, setRedirectLink] = useState('')\n  const [isSubmittable, setIsSubmittable] = useState(false)\n  const [error, setError] = useState('')\n\n  useKeyPress(['Enter'], () => {\n    if (isSubmittable) {\n      generateRedirectLink()\n    }\n  })\n\n  const handleRedirectLink = useCallback(value => {\n    setRedirectLink(value)\n\n    if (value === '') {\n      setIsSubmittable(false)\n    } else {\n      setIsSubmittable(true)\n    }\n  }, [setRedirectLink, setIsSubmittable])\n\n  const generateRedirectLink = useCallback(() => {\n    if (isSubmittable) {\n      const data = {\n        use_as: 'redirect',\n        redirect: redirectLink,\n      }\n\n      fetch(`${window.domains.backend}set_redirect`, {\n        mode: 'cors',\n        credentials: 'include',\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json;charset=utf-8'\n        },\n        body: JSON.stringify(data)\n      })\n        .then(r => r.json())\n        .then(async data => {\n          if (typeof data.error === 'string') {\n            console.error(data.error)\n            setError(data.error)\n          } else if (typeof data.code === 'string') {\n            history.push(`/edit/${data.code}`)\n          } else {\n            setError('Undefined Error. Please contact thomas.rosen@volteuropa.org')\n          }\n        })\n        .catch(async error => {\n          console.error(error)\n          setError(error)\n        })\n    }\n  }, [isSubmittable, redirectLink, history])\n\n  return <div>\n    <Header\n      title={<Localized id=\"create_shortcode_headline\" />}\n      rightActions={rightHeaderActions || null}\n    />\n\n    <p><Localized id=\"create_shortcode_info\" /></p>\n\n    <div className={`${classes.input} ${isSubmittable === true ? '' : classes.hideSubmitButton }`}>\n      <FancyInput\n        style={{ flexGrow: '1', display: 'flex', flexDirection: 'column' }}\n      >\n        {({ setError }) => (\n          <UrlInput\n            onError={setError}\n            placeholder={getString('create_shortcode_url_placeholder')}\n            onChange={handleRedirectLink}\n          />\n        )}\n      </FancyInput>\n      {\n        isSubmittable === true\n          ? <button className=\"green\" onClick={generateRedirectLink}>\n              <Localized id=\"create_shortcode_url_submit\" />\n            </button>\n          : null\n      }\n    </div>\n\n    {\n      error !== ''\n        ? <>\n          <h3 className=\"red\"><Localized id=\"headline_errors\" /></h3>\n          <p>{error}</p>\n        </>\n        : null\n    }\n  </div>\n}\n\nexport default withLocalization(Redirect)\n","export default __webpack_public_path__ + \"static/media/layout-default.e50ac204.svg\";","export default __webpack_public_path__ + \"static/media/layout-person.3608bb84.svg\";","export default __webpack_public_path__ + \"static/media/qr_code_24pd.b620c9c2.svg\";","export default __webpack_public_path__ + \"static/media/assessment_24dp.7a4e5a03.svg\";","export default __webpack_public_path__ + \"static/media/publish_24dp.ae37f206.svg\";","export default __webpack_public_path__ + \"static/media/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.3f9289d0.png\";","export default __webpack_public_path__ + \"static/media/Aktion.89c1bcdf.png\";","export default __webpack_public_path__ + \"static/media/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.6824f6ef.png\";","export default __webpack_public_path__ + \"static/media/Welcome-to-Volt.39e04eca.png\";","import { useState, useCallback, useEffect } from 'react'\n\nfunction MultiButton({ ariaLabel, items, defaultValue, onChange, style, className }) {\n  const [choosen, setChoosen] = useState()\n\n  useEffect(() => setChoosen(defaultValue), [defaultValue, setChoosen])\n\n  const handleClick = useCallback(event => {\n    const newValue = event.target.dataset.value\n    setChoosen(newValue)\n    if (onChange) {\n      onChange(newValue)\n    }\n  }, [setChoosen, onChange])\n\n  return <div\n    aria-label={ariaLabel}\n    className={'buttonRow ' + (className || '')}\n    style={{\n      display: 'inline-block',\n      ...style\n    }}\n  >\n    {\n      items.map(item => {\n        const value = item.value\n        const title = item.title\n        const icon = item.icon || null\n        return <button\n          key={value+'_'+title}\n          className={`${choosen === value ? 'choosen' : ''} ${!!icon ? 'hasIcon' : ''}`}\n          onClick={handleClick}\n          data-value={value}\n        >\n          <span style={{pointerEvents: 'none'}}>\n            {!!icon ? icon : null}\n            {!!title ? <span style={{verticalAlign: 'middle'}}>{title}</span> : null}\n          </span>\n        </button>\n      })\n    }\n  </div>\n}\n\nexport default MultiButton\n","import { useState, useCallback, useRef } from 'react'\n\nlet locales = {\n  en: 'English',\n  de: 'Deutsch',\n  es: 'Español',\n  pt: 'Português',\n  fr: 'Français',\n  it: 'Italiano',\n  nl: 'Nederlands', // Dutch\n  da: 'Dansk', // Danish\n  sv: 'Svenska', // Swedish\n  nb: 'Norsk bokmål', // Norwegian\n  fi: 'Suomi', // Finish\n  mt: 'Malti', // Maltese\n  // pl: 'Język polski', // Polish\n  ru: 'русский язык', // Russian\n  // bg: 'български език', // Bulgarian\n  tr: 'Türkçe',\n  ar: 'اَلْعَرَبِيَّة', // Arabic\n  // el: 'ελληνικά', // Greek\n  // ro: 'limba română', // Romanian\n  // sl: 'slovenščina', // Slovenian\n  // uk: 'украї́нська мо́ва', // Ukrainian\n  // cy: 'Cymraeg', // Welsh\n}\nlocales = Object.entries(locales)\n.map(([code, nativeName]) => ({code, nativeName}))\n\nfunction InputWithLocal({ reorderHandle, locale, defaultValue, children, style, onChange, ...props }) {\n  const wrapperDiv = useRef(null)\n\n  const [changedLocale, setChangedLocale] = useState(locale)\n  const [changedValue, setChangedValue] = useState(defaultValue)\n\n  const handleLocaleChange = useCallback((event) => {\n    setChangedLocale(event.target.value)\n    if (onChange) {\n      const target = wrapperDiv.current\n      target.value = {\n        locale: event.target.value,\n        value: changedValue,\n      }\n      onChange({ target })\n    }\n  }, [setChangedLocale, onChange, changedValue])\n\n  const handleTextChange = useCallback((event_or_value) => {\n    let value = event_or_value\n    if (\n      !!event_or_value\n      && !!event_or_value.target\n      && !!event_or_value.target.value\n    ) {\n      value = event_or_value.target.value\n    }\n\n    setChangedValue(value)\n    if (onChange) {\n      const target = wrapperDiv.current\n      target.value = {\n        locale: changedLocale,\n        value,\n      }\n      onChange({ target })\n    }\n  }, [setChangedValue, onChange, changedLocale])\n\n  return <div\n    ref={wrapperDiv}\n    style={{\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'flex-start',\n      maxWidth: '100%',\n      ...style\n    }}\n    {...props}\n  >\n    <select\n      onChange={handleLocaleChange}\n      defaultValue={locale}\n      style={{\n        margin: '0 var(--basis) 0 0'\n      }}\n    >\n      {locales.map(({ code, nativeName }) => <option key={code} value={code}>{nativeName}</option>) }\n    </select>\n    {\n      !!children\n        ? children({\n          onChange: handleTextChange,\n          defaultValue: defaultValue,\n          style: {\n            flexGrow: '1',\n          }\n        })\n        : null\n    }\n  </div>\n}\n\nexport default InputWithLocal\n","import { useState, useCallback, useRef } from 'react'\n\nfunction PermissionInput({ reorderHandle, role, defaultValue, children, style, onChange, ariaLabel, placeholder, ...props }) {\n  const wrapperDiv = useRef(null)\n\n  const [changedRole, setChangedRole] = useState(role || 'editor')\n  const [changedValue, setChangedValue] = useState(defaultValue)\n\n  const handleRoleChange = useCallback((event) => {\n    setChangedRole(event.target.value)\n    if (onChange) {\n      const target = wrapperDiv.current\n      target.value = {\n        role: event.target.value,\n        value: changedValue,\n      }\n      onChange({ target })\n    }\n  }, [setChangedRole, onChange, changedValue])\n\n  const handleTextChange = useCallback(value => {\n    setChangedValue(value)\n    if (onChange) {\n      const target = wrapperDiv.current\n      target.value = {\n        role: changedRole,\n        value,\n      }\n      onChange({ target })\n    }\n  }, [setChangedValue, onChange, changedRole])\n\n  return <div\n    ref={wrapperDiv}\n    style={{\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'flex-start',\n      maxWidth: '100%',\n      ...style\n    }}\n    {...props}\n  >\n    {\n      !!children\n        ? children({\n          onChange: handleTextChange,\n          defaultValue: defaultValue,\n          style: {\n            flexGrow: '1',\n          }\n        })\n        : null\n    }\n    <select\n      onChange={handleRoleChange}\n      defaultValue={role}\n      style={{\n        margin: '0 0 0 var(--basis)',\n        display: 'none',\n      }}\n    >\n      <option key=\"editor\" value=\"editor\">Editor</option>\n      <option key=\"viewer\" value=\"viewer\">Viewer</option>\n    </select>\n  </div>\n}\n\nexport default PermissionInput\n","import { useCallback } from 'react'\n\nconst email_regex = /^(?:(?:[^<>()[\\]\\\\.,;:\\s@\"]+(?:\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(?:\".+\"))@(?:(?:\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})|(?:(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,})\\.?)$/gui\n\nfunction EmailInput({ defaultValue, onChange, onError, ...props }) {\n  const handleTextChange = useCallback((event) => {\n    if (onChange || onError) {\n      const value = event.target.value || ''\n      let isSubmittable = false\n      let error = ''\n\n      if (value !== '') {\n        if (value.match(email_regex)) {\n          isSubmittable = true\n        } else {\n          error = 'invalid_email'\n        }\n      }\n\n      if (onChange) {\n        if (isSubmittable) {\n          onChange(value)\n        } else {\n          onChange('')\n        }\n      }\n\n      if (onError) {\n        onError(error)\n      }\n    }\n  }, [onChange, onError])\n\n  return <input\n    type=\"email\"\n    onChange={handleTextChange}\n    defaultValue={defaultValue}\n    {...props}\n  />\n}\n\nexport default EmailInput\n","import React, { useCallback, useRef } from 'react'\n\nfunction HtmlInput({ defaultValue, children, style, onChange, onError, ...props }) {\n  const fake_defaultValue = useRef({__html:\n    defaultValue\n    // .replace(/\\t/g, '&emsp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    // .replace(/\\n/g, '<br />')\n  })\n\n  const handleTextChange = useCallback((event) => {\n    try {\n      if (onChange) {\n        const value = (event.target.innerHTML || '')\n        // .replace(/&emsp;/g, '\\t')\n        .replace(/&lt;/g, '<')\n        .replace(/&gt;/g, '>')\n        .replace(/<\\/? ?br ?\\/?>/g, '\\n')\n        .trim('\\n')\n\n        onChange(value)\n      }\n    } catch (error) {\n      if (onError) {\n        onError(error)\n      }\n    }\n  }, [onChange, onError])\n\n  const addLineBreaks = useCallback(event => {\n    if (event.key === 'Enter') {\n      // source: StackOverflow (https://stackoverflow.com/a/61237402)\n      document.execCommand ('insertLineBreak')\n      event.preventDefault()\n    }\n  }, [])\n\n  const handlePaste = useCallback(event => {\n    // only accept plain text\n\n    // cancel paste\n    event.preventDefault()\n\n    // get text representation of clipboard\n    const text = (event.originalEvent || event).clipboardData.getData('text/plain')\n\n    // insert text manually\n    document.execCommand('insertText', false, text)\n  }, [])\n\n  return <div\n    onKeyDown={addLineBreaks}\n    onInput={handleTextChange}\n    onPaste={handlePaste}\n    style={{\n      flexGrow: '1',\n      whiteSpace: 'pre-wrap',\n      display: 'inline-block',\n      paddingBottom: 'var(--basis)',\n      ...style,\n    }}\n    contentEditable={true}\n    dangerouslySetInnerHTML={fake_defaultValue.current}\n    {...props}\n  />\n}\n\nexport default HtmlInput\n","import { useState, useCallback, useEffect } from 'react'\n\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\n\nimport classes from './Repeater.module.css'\n\nfunction reorder(list, startIndex, endIndex) {\n  const result = Array.from(list)\n  const [removed] = result.splice(startIndex, 1)\n  result.splice(endIndex, 0, removed)\n\n  return result\n}\n\nfunction Repeater({ defaultValue, addDefaultValue, addButtonText, reorderLabel = 'Reorder', render, style, onChange, prependNewItems, showReorderControls = true, isReorderable = false }) {\n  if (!(!!addButtonText)) {\n    addButtonText = 'Add Row'\n  }\n\n  const [rows, setRows] = useState([])\n\n  useEffect(() => {\n    let tmp_defaultValue = defaultValue\n    if (!Array.isArray(defaultValue) || defaultValue.length === 0) {\n      tmp_defaultValue = [addDefaultValue()]\n    }\n    setRows(tmp_defaultValue)\n  }, [defaultValue, addDefaultValue, setRows])\n\n  const handleRemoveRow = useCallback(event => {\n    const index = event.target.dataset.index\n    let new_rows = [...rows]\n    new_rows.splice(index, 1)\n    const rows_from_onChange = onChange(new_rows)\n    if (Array.isArray(rows_from_onChange)) {\n      new_rows = rows_from_onChange\n    }\n    setRows(new_rows)\n  }, [rows, setRows, onChange])\n\n  const handleRowChange = useCallback(event => {\n    const index = event.target.dataset.index\n    const _id = event.target.dataset.id\n    const newValue = event.target.value\n\n    const new_rows = [...rows]\n    if (typeof newValue !== 'object' || Array.isArray(newValue)) {\n      new_rows[index] = {\n        _id,\n        value: newValue\n      }\n    } else if (typeof newValue === 'object') {\n      new_rows[index] = {\n        _id,\n        ...newValue\n      }\n    }\n    setRows(new_rows)\n    onChange(new_rows)\n  }, [rows, setRows, onChange])\n\n  const handleAddRow = useCallback(event => {\n    const newValue = addDefaultValue()\n\n    let index = null\n    if (!!event.target.dataset.index) {\n      index = parseInt(event.target.dataset.index)\n      if (isNaN(index)) {\n        index = null\n      }\n    }\n\n    let new_rows = null\n    if (index !== null && index >= 0) {\n      new_rows = [...rows]\n      new_rows.splice(index, 0, newValue)\n    } else {\n      if (prependNewItems === true) {\n        new_rows = [newValue, ...rows]\n      } else {\n        new_rows = [...rows, newValue]\n      }\n    }\n\n    setRows(new_rows)\n    onChange(new_rows)\n  }, [rows, addDefaultValue, setRows, onChange, prependNewItems])\n\n  function onDragEnd(result) {\n    if (!result.destination) {\n      return\n    }\n\n    if (result.destination.index === result.source.index) {\n      return\n    }\n\n    const new_rows = reorder(\n      rows,\n      result.source.index,\n      result.destination.index\n    )\n    setRows(new_rows)\n    onChange(new_rows)\n  }\n\n  const hasOnlyOneRow = rows.length === 1\n\n  const addButton = <div style={{ textAlign: 'right' }}>\n    <button className={`green ${classes.addRowButton}`} onClick={handleAddRow}>{addButtonText}</button>\n  </div>\n\n  return <div style={style}>\n    {!hasOnlyOneRow && prependNewItems ? <div style={{ marginBottom: 'var(--basis)' }}>{addButton}</div> : null}\n\n    <DragDropContext onDragEnd={onDragEnd}>\n      <Droppable\n        droppableId=\"list\"\n        isDropDisabled={isReorderable === true ? false : true}\n      >\n        {provided => (\n          <div ref={provided.innerRef} {...provided.droppableProps}>\n            {\n              rows\n              .filter(subDefaultValue => subDefaultValue._id)\n              .map(\n                (subDefaultValue, index) => <Draggable\n                  key={subDefaultValue._id}\n                  draggableId={subDefaultValue._id}\n                  index={index}\n                  isDragDisabled={isReorderable === true ? false : true}\n                  disableInteractiveElementBlocking={true}\n                >\n                  {provided => (\n                    <div\n                      ref={provided.innerRef}\n                      {...provided.draggableProps}\n\n                      key={subDefaultValue._id}\n                      className={classes.row}\n                    >\n                      {\n                        index !== 0\n                        ? <div className={classes.middleActions}>\n                          <div className={classes.trigger}></div>\n                          <div className={classes.content}>\n                            <button className={`green ${classes.inlineRowButton}`} data-index={index} onClick={handleAddRow}>+</button>\n                          </div>\n                        </div>\n                        : null\n                      }\n\n                      <div className={classes.form}>\n                        {\n                          isReorderable === true && showReorderControls === true\n                            ? <button aria-label={reorderLabel} className={`text ${classes.inlineRowButton}`} {...provided.dragHandleProps}>☰</button>\n                            : null\n                        }\n                        {\n                          render({\n                            key: subDefaultValue._id,\n                            defaultValue: subDefaultValue,\n                            className: classes.item,\n                            'data-index': index,\n                            'data-id': subDefaultValue._id,\n                            onChange: handleRowChange,\n                            reorderHandle: <button aria-label={reorderLabel} className={`text ${classes.inlineRowButton}`} {...provided.dragHandleProps}>☰</button>,\n                          })\n                        }\n                        {\n                          hasOnlyOneRow\n                            ? <button className={`green ${classes.inlineRowButton}`} onClick={handleAddRow}>+</button>\n                            : <button className={`red ${classes.inlineRowButton}`} data-index={index} onClick={handleRemoveRow}>–</button>\n                        }\n                      </div>\n                    </div>\n                  )}\n                </Draggable>\n              )\n            }\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </DragDropContext>\n\n    {!hasOnlyOneRow && !prependNewItems ? addButton : null}\n  </div>\n}\n\nexport default Repeater\n","import { useState, useCallback, useRef, useEffect, useMemo } from 'react'\n\nimport { v4 as uuidv4 } from 'uuid'\n\nimport {\n  useParams\n} from 'react-router-dom'\n\nimport { Visibility, VisibilityOff } from '@material-ui/icons'\n\nimport SVG from 'react-inlinesvg'\nimport layoutDefault from '../images/layout-default.svg'\nimport layoutPerson from '../images/layout-person.svg'\nimport icon_qr_code from '../images/qr_code_24pd.svg'\nimport icon_assessment from '../images/assessment_24dp.svg'\nimport icon_publish from '../images/publish_24dp.svg'\n\nimport plakatschlange_thumb from '../images/coverphotos/thumbs/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.png'\nimport aktion_thumb from '../images/coverphotos/thumbs/Aktion.png'\nimport volt_bonn_thumb from '../images/coverphotos/thumbs/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.png'\nimport welcome_to_volt_thumb from '../images/coverphotos/thumbs/Welcome-to-Volt.png'\n\nimport classes from './Editor.module.css'\nimport { Localized, withLocalization } from '../fluent/Localized.js'\nimport useUser from '../hooks/useUser.js'\nimport Header from '../components/Header.js'\nimport MultiButton from '../components/MultiButton.js'\nimport InputWithLocal from '../components/InputWithLocal.js'\nimport PermissionInput from '../components/PermissionInput.js'\nimport UrlInput from '../components/UrlInput.js'\nimport EmailInput from '../components/EmailInput.js'\nimport HtmlInput from '../components/HtmlInput.js'\nimport FancyInput from '../components/FancyInput.js'\nimport Repeater from '../components/Repeater.js'\n\nfunction ItemRaw({ fluentByObject, getString, item, className, onChange, reorderHandle, ...props }) {\n  const defaultLocale = getString('default_locale')\n\n  const wrapperDiv = useRef(null)\n\n  const [type, setType] = useState(item.type || null)\n  const [title, setTitle] = useState(item.title || [])\n  const [text, setText] = useState(item.text || [])\n  const [link, setLink] = useState(item.link || '')\n  const [active, setActive] = useState(item.active || true)\n\n  const handleChange_Type = useCallback(newValue => {\n    setType(newValue)\n    if (onChange) {\n      const target = wrapperDiv.current\n      target.value = { type: newValue, title, text, link, active }\n      onChange({ target })\n    }\n  }, [setType, onChange, title, text, link, active])\n\n  const handleChange_Title = useCallback(rows => {\n    const newValue = rows\n    setTitle(newValue)\n\n    if (onChange) {\n      const target = wrapperDiv.current\n      target.value = { type, title: newValue, text, link, active }\n      onChange({ target })\n    }\n  }, [setTitle, onChange, type, text, link, active])\n\n  const handleChange_Text = useCallback(rows => {\n    const newValue = rows\n    setText(newValue)\n\n    if (onChange) {\n      const target = wrapperDiv.current\n      target.value = { type, title, text: newValue, link, active }\n      onChange({ target })\n    }\n  }, [setText, onChange, type, title, link, active])\n\n  const handleChange_Link = useCallback(newValue => {\n    setLink(newValue)\n\n    if (onChange) {\n      const target = wrapperDiv.current\n      target.value = { type, title, text, link: newValue, active }\n      onChange({ target })\n    }\n  }, [setLink, onChange, type, title, text, active])\n\n  const toggle_Active = useCallback(() => {\n    const newValue = !active\n    setActive(newValue)\n\n    if (onChange) {\n      const target = wrapperDiv.current\n      target.value = { type, title, text, link, active: newValue }\n      onChange({ target })\n    }\n  }, [setActive, onChange, type, title, text, link, active])\n\n  return <div\n    ref={wrapperDiv}\n    className={`${classes.item} ${!!type ? '' : classes.chooseTypeScreen} ${className}`}\n    {...props }\n  >\n    {\n      !!type\n        ? null\n        : <p style={{\n            marginBottom: 'var(--basis)'\n          }}><Localized id=\"path_editor_item_choose_type_label\" /></p>\n    }\n\n    <div className={classes.itemSettingsRow}>\n      <div className={classes.itemSettingsRowLeft}>\n      {reorderHandle}\n\n      {\n        !!type\n        ? <label className={classes.active_toggle_wrapper}>\n            <button onClick={toggle_Active} className={active ? 'text' : 'red'}>{\n              active\n                ? <><Visibility className={`${classes.active_toggle_icon} ${classes.active}`} /> <span><Localized id=\"path_editor_item_active\" /></span></>\n                : <><VisibilityOff className={classes.active_toggle_icon} /> <span><Localized id=\"path_editor_item_not_active\" /></span></>\n            }</button>\n          </label>\n        : null\n      }\n      </div>\n\n      <MultiButton\n        className={active ? classes.form_active : classes.form_deactivated}\n        onChange={handleChange_Type}\n        ariaLabel=\"Use as\"\n        defaultValue={type}\n        items={[\n          { value: 'link', title: getString('path_editor_item_choose_type_value_link') },\n          { value: 'headline', title: getString('path_editor_item_choose_type_value_headline') },\n          // { value: 'headline3', title: getString('path_editor_item_choose_type_value_headline3') },\n          { value: 'text', title: getString('path_editor_item_choose_type_value_text') }\n        ]}\n        style={{\n          marginTop: 'calc(-1 * var(--basis))'\n        }}\n      />\n    </div>\n\n    <span className={active ? classes.form_active : classes.form_deactivated}>\n    {\n      !!type\n        ? <>\n          {\n            type === 'link' || type === 'headline' || type === 'headline3'\n              ? <Repeater\n                onChange={handleChange_Title}\n                defaultValue={title}\n                addDefaultValue={() => ({ _id: uuidv4(), locale: defaultLocale, value: '' })}\n                addButtonText={getString('path_editor_add_translation')}\n                style={{\n                  marginTop: 'var(--basis_x4)'\n                }}\n                render={\n                  ({ defaultValue, ...repeater_props }) => {\n                    const locale = defaultValue.locale\n                    const value = defaultValue.value\n                    return <InputWithLocal\n                      locale={locale}\n                      defaultValue={value}\n                      style={{\n                        maxWidth: 'calc(100% - calc(var(--basis_x4) + var(--basis_x2)))',\n                      }}\n                      {...repeater_props}\n                    >\n                      {InputWithLocal_props => <input type=\"text\" placeholder={getString('path_editor_item_title_label')} {...InputWithLocal_props} style={{ ...InputWithLocal_props.style, margin: '0' }} />}\n                    </InputWithLocal>\n                  }\n                }\n              />\n              : null\n          }\n          {\n            type === 'text'\n              ? <>\n              <p><Localized id=\"path_editor_item_text_info\" /></p>\n              <Repeater\n                onChange={handleChange_Text}\n                defaultValue={text}\n                addDefaultValue={() => ({ _id: uuidv4(), locale: defaultLocale, value: '' })}\n                addButtonText={getString('path_editor_add_translation')}\n                style={{\n                  marginTop: 'var(--basis_x4)'\n                }}\n                render={\n                  ({ defaultValue, ...repeater_props }) => {\n                    const locale = defaultValue.locale\n                    const value = defaultValue.value\n                    return <InputWithLocal\n                      locale={locale}\n                      defaultValue={value}\n                      style={{\n                        maxWidth: 'calc(100% - calc(var(--basis_x4) + var(--basis_x2)))',\n                      }}\n                      {...repeater_props}\n                    >\n                      {\n                        InputWithLocal_props => <HtmlInput\n                          placeholder={getString('path_editor_item_text_label')}\n                          {...InputWithLocal_props}\n                          style={{ ...InputWithLocal_props.style, margin: '0' }}\n                        />\n                      }\n                    </InputWithLocal>\n                  }\n                }\n              />\n              </>\n              : null\n          }\n\n          {\n            type === 'link'\n              ? <FancyInput>\n                {({ setError }) => (\n                  <UrlInput\n                    onError={setError}\n                    onChange={handleChange_Link}\n                    type=\"text\"\n                    defaultValue={link}\n                    placeholder={getString('path_editor_item_link_label')}\n                    style={{\n                      marginRight: '0',\n                      marginBottom: '0',\n                      marginLeft: '0',\n                      width: 'calc(100% - var(--basis_x2))',\n                    }}\n                  />\n                )}\n              </FancyInput>\n              : null\n          }\n        </>\n        : null\n    }\n    </span>\n  </div>\n}\nconst Item = withLocalization(ItemRaw)\n\nfunction ItemsRaw({ getString, defaultValue, onChange }){\n  const items = defaultValue\n\n  return <Repeater\n    onChange={onChange}\n    defaultValue={items}\n    addDefaultValue={() => ({ _id: uuidv4(), type: null, title: [], link: '', active: true })}\n    addButtonText={getString('path_editor_add_row')}\n    reorderLabel={getString('path_editor_reorder')}\n    prependNewItems={true}\n    isReorderable={true}\n    showReorderControls={false}\n    render={\n      ({ defaultValue, ...repeater_props }) => {\n        return <Item\n          item={defaultValue}\n          {...repeater_props}\n        />\n      }\n    }\n  />\n}\nconst Items = withLocalization(ItemsRaw)\n\nfunction addIds(array){\n  if (Array.isArray(array)) {\n    return array.map(item => {\n      if (!item.hasOwnProperty('_id')) {\n        item._id = uuidv4()\n      }\n      return item\n    })\n  }\n  return array\n}\n\nfunction delay(time) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, time)\n  })\n}\n\nfunction Editor({ getString }) {\n  const defaultLocale = getString('default_locale')\n\n  const { code } = useParams()\n  const [{email = ''} = {}] = useUser() || []\n\n  const [loadingContent, setLoadingContent] = useState(true)\n  const [canEdit, setCanEdit] = useState(true)\n  const [savingMessage, setSavingMessage] = useState(null)\n\n  const [useAs, setUseAs] = useState('')\n  const handleUseAsChange = useCallback(newValue => setUseAs(newValue), [setUseAs])\n\n  const [layout, setLayout] = useState('')\n  const handleLayoutChange = useCallback(newValue => setLayout(newValue), [setLayout])\n\n  const [title, setTitle] = useState([])\n  const handleChange_Title = useCallback(rows => setTitle(rows), [setTitle])\n\n  const [description, setDescription] = useState([])\n\n  const permissionsDefault = useMemo(() => (\n      typeof email === 'string' && email.length > 0\n      ? [{ _id: uuidv4(), value: email, role: 'editor' }, { _id: uuidv4(), value: '', role: 'editor' }]\n      : []\n  ), [email])\n  const [permissions, setPermissions] = useState(permissionsDefault)\n  const handleChange_Permissions = useCallback(rows => {\n    const filled_rows_length = rows\n      .filter(p =>\n        p.value !== ''\n        && p.value !== '@volteuropa.org'\n        && (!p.role || p.role === 'editor')\n      )\n      .length\n\n    if (filled_rows_length === 0) {\n      rows.unshift({ _id: uuidv4(), value: email, role: 'editor' })\n    }\n\n    setPermissions(rows)\n    return rows\n  }, [setPermissions, email])\n\n  const [viewPermission, setViewPermission] = useState(permissionsDefault)\n\n  const [coverphoto, setCoverphoto] = useState('')\n  const [imprintOverwrite, setImprintOverwrite] = useState('')\n  const [privacyPolicyOverwrite, setPrivacyPolicyOverwrite] = useState('')\n  const [redirect, setRedirect] = useState('')\n\n  const [items, setItems] = useState([])\n  const handleChange_Items = useCallback(rows => setItems(rows), [setItems])\n\n  useEffect(() => {\n    setCanEdit(true)\n    setLoadingContent(true)\n\n    fetch(`${window.domains.backend}get/${code}`, {\n      mode: 'cors',\n      credentials: 'include',\n    })\n      .then(response => response.json())\n      .then(data => {\n        if (typeof data.error === 'string') {\n          if (data.error === 'no_edit_permission') {\n            setLoadingContent(false)\n            setCanEdit(false)\n          }\n        }else{\n          let {\n            use_as: useAs = '',\n            layout = (code.includes('.') ? 'person' : 'default'),\n            title = [],\n            description = [],\n            permissions = permissionsDefault,\n            redirect = '',\n            coverphoto = '',\n            overwrites = {},\n            items = [],\n          } = data\n\n          const {\n            imprint = '',\n            privacy_policy = ''\n          } = overwrites\n\n          title = addIds(title)\n          description = addIds(description)\n          items = items.map(item => {\n            if (!item.hasOwnProperty('_id')) {\n              item._id = uuidv4()\n            }\n            if (item.hasOwnProperty('title')) {\n              item.title = addIds(item.title)\n            }\n            if (item.hasOwnProperty('description')) {\n              item.description = addIds(item.description)\n            }\n            return item\n          })\n\n          let viewPermissionTmp = permissions.filter(p => p.role === 'viewer')\n          viewPermissionTmp = viewPermissionTmp.length > 0 ? viewPermissionTmp[0].value : ''\n\n          setUseAs(useAs)\n          setLayout(layout)\n          setTitle(title)\n          setDescription(description)\n          setPermissions(permissions.filter(p => p.value !== '' && p.value !== '@volteuropa.org'))\n          setViewPermission(viewPermissionTmp)\n          setRedirect(redirect)\n          setCoverphoto(coverphoto)\n          setImprintOverwrite(imprint)\n          setPrivacyPolicyOverwrite(privacy_policy)\n          setItems(items)\n          setLoadingContent(false)\n        }\n      })\n      .catch(error => console.error(error))\n  }, [\n    setLoadingContent,\n    setCanEdit,\n    code,\n    permissionsDefault,\n    setUseAs,\n    setLayout,\n    setTitle,\n    setDescription,\n    setPermissions,\n    setRedirect,\n    setCoverphoto,\n    setImprintOverwrite,\n    setPrivacyPolicyOverwrite,\n    setItems\n  ])\n\n  const handleSave = useCallback(() => {\n    setSavingMessage(getString('path_editor_status_started_saving'))\n\n    const permissionsTmp = [\n      ...permissions,\n      ...(viewPermission !== '' ? [{ _id: uuidv4(), value: viewPermission, role: 'viewer'}] : [])\n    ]\n\n    const data = {\n      use_as: useAs,\n      layout,\n      title,\n      description,\n      permissions: permissionsTmp,\n      coverphoto,\n      redirect,\n      overwrites: {\n        imprint: imprintOverwrite,\n        privacy_policy: privacyPolicyOverwrite\n      },\n      items\n    }\n\n    fetch(`${window.domains.backend}set/${code}`, {\n      mode: 'cors',\n      credentials: 'include',\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },\n      body: JSON.stringify(data)\n    })\n      .then(r => r.json())\n      .then(async data => {\n        await delay(500)\n        if (typeof data.error === 'string') {\n          if (data.error === 'no_edit_permission') {\n            setSavingMessage(getString('path_editor_edit_permission_error'))\n            await delay(2000)\n            setSavingMessage(null)\n          } else {\n            setSavingMessage(data.error)\n            await delay(2000)\n            setSavingMessage(null)\n          }\n        } else {\n          setSavingMessage(getString('path_editor_status_saved'))\n          await delay(2000)\n          setSavingMessage(null)\n        }\n      })\n      .catch(async error => {\n        console.error(error)\n        await delay(500)\n        setSavingMessage(getString('path_editor_status_error_while_saving', {\n          error: error.message\n        }))\n      })\n  }, [\n    getString,\n    code,\n    useAs,\n    layout,\n    redirect,\n    title,\n    description,\n    permissions,\n    viewPermission,\n    items,\n    coverphoto,\n    imprintOverwrite,\n    privacyPolicyOverwrite\n  ])\n\n  const viewStatistics = useCallback(()=>{\n    const a = document.createElement('a')\n    a.href = `https://umami.qiekub.org/share/s0ZHBZbb/volt.link?url=%2F${code}`\n    a.target = '_blank'\n    a.rel = 'noreferrer'\n    a.click()\n  }, [code])\n\n  const gotoQrcodePage = () => {\n    const a = document.createElement('a')\n    a.href = `https://qrcode.volt.link/?c=https://volt.link/${code}`\n    a.target = '_blank'\n    a.rel = 'noreferrer'\n    a.click()\n  }\n\n  const rightHeaderActions = <div className=\"buttonRow\" style={{ whiteSpace: 'nowrap' }}>\n    {/* <button className=\"text\"><Localized id=\"path_editor_share\"/></button> */}\n    <button className=\"text hasIcon\" onClick={gotoQrcodePage}>\n      <span style={{pointerEvents: 'none'}}>\n        <SVG src={icon_qr_code} className=\"icon\" />\n        <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}><Localized id=\"path_editor_qrcode\" /></span>\n      </span>\n    </button>\n    <button className=\"text hasIcon\" onClick={viewStatistics}>\n      <span style={{pointerEvents: 'none'}}>\n        <SVG src={icon_assessment} className=\"icon\" />\n        <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}><Localized id=\"path_editor_statistics\" /></span>\n      </span>\n    </button>\n    <button className=\"green hasIcon\" onClick={handleSave}>\n      <span style={{pointerEvents: 'none'}}>\n        <SVG src={icon_publish} className=\"icon\" />\n        <span style={{verticalAlign: 'middle'}}><Localized id=\"path_editor_save\" /></span>\n      </span>\n    </button>\n  </div>\n\n  const editor_form = <>\n    <h3><Localized id=\"path_editor_title_label\" /></h3>\n    <Repeater\n      onChange={handleChange_Title}\n      defaultValue={title}\n      addDefaultValue={() => ({ _id: uuidv4(), locale: defaultLocale, value: '' })}\n      addButtonText={getString('path_editor_add_translation')}\n      render={\n        ({ defaultValue, ...repeater_props }) => {\n          const locale = defaultValue.locale\n          const value = defaultValue.value\n          return <InputWithLocal\n            locale={locale}\n            defaultValue={value}\n            style={{\n              maxWidth: 'calc(100% - calc(var(--basis_x4) + var(--basis_x2)))',\n            }}\n            {...repeater_props}\n          >\n            {InputWithLocal_props => <input\n              aria-label={getString('path_editor_title_label')}\n              type=\"text\"\n              placeholder={getString('path_editor_title_placeholder')}\n              {...InputWithLocal_props}\n              style={{\n                ...InputWithLocal_props.style,\n                margin: '0',\n              }}\n            />}\n          </InputWithLocal>\n        }\n      }\n    />\n    <br />\n    <h3><Localized id=\"path_editor_description_label\" /></h3>\n    <Repeater\n      onChange={setDescription}\n      defaultValue={description}\n      addDefaultValue={() => ({ _id: uuidv4(), locale: defaultLocale, value: '' })}\n      addButtonText={getString('path_editor_add_translation')}\n      render={\n        ({ defaultValue, ...repeater_props }) => {\n          const locale = defaultValue.locale\n          const value = defaultValue.value\n          return <InputWithLocal\n            locale={locale}\n            defaultValue={value}\n            style={{\n              maxWidth: 'calc(100% - calc(var(--basis_x4) + var(--basis_x2)))',\n            }}\n            {...repeater_props}\n          >\n            {InputWithLocal_props => <HtmlInput\n              aria-label={getString('path_editor_description_label')}\n              placeholder={getString('path_editor_description_placeholder')}\n              {...InputWithLocal_props}\n              style={{\n                ...InputWithLocal_props.style,\n                margin: '0',\n              }}\n            />}\n          </InputWithLocal>\n        }\n      }\n    />\n\n    <br />\n    <h3><Localized id=\"path_editor_permissions_view_label\" /></h3>\n    <em className=\"body2\" style={{ display: 'block', marginBottom: 'var(--basis)' }}><Localized id=\"path_editor_permissions_view_info\" /></em>\n    <MultiButton\n      onChange={setViewPermission}\n      ariaLabel={getString('path_editor_permissions_view_label')}\n      defaultValue={viewPermission}\n      items={[\n        { value: '', title: getString('path_editor_permissions_view_public') },\n        { value: '@volteuropa.org', title: getString('path_editor_permissions_view_volteuropa') },\n      ]}\n    />\n\n    <br />\n    <br />\n    <h3><Localized id=\"path_editor_permissions_edit_label\" /></h3>\n    <em className=\"body2\" style={{ display: 'block', marginBottom: 'var(--basis)' }}><Localized id=\"path_editor_permissions_edit_info\" /></em>\n    <Repeater\n      onChange={handleChange_Permissions}\n      defaultValue={permissions}\n      addDefaultValue={() => ({ _id: uuidv4(), value: '', role: 'editor' })}\n      addButtonText={getString('path_editor_permissions_edit_add_button_label')}\n      render={\n        ({ defaultValue, ...repeater_props }) => {\n          const role = defaultValue.role\n          const value = defaultValue.value\n          return <PermissionInput\n              role={role}\n              defaultValue={value}\n              style={{\n                maxWidth: 'calc(100% - calc(var(--basis_x4) + var(--basis_x2)))',\n                margin: '0',\n              }}\n              {...repeater_props}\n            >\n              {InputWithLocal_props => <FancyInput \n                    style={{ ...InputWithLocal_props.style, display: 'flex', flexDirection: 'column' }}\n                >\n                {({ setError }) => (\n                  <EmailInput\n                    onError={setError}\n                    aria-label={getString('path_editor_permissions_edit_label')}\n                    placeholder={getString('path_editor_permissions_edit_placeholder')}\n                    {...InputWithLocal_props}\n                    style={{ flexGrow: '1', margin: '0' }}\n                  />\n                )}\n              </FancyInput>}\n            </PermissionInput>\n        }\n      }\n    />\n\n    <br />\n    <h3><Localized id=\"path_editor_use_as_label\" /></h3>\n    <em className=\"body2\" style={{ display: 'block', marginBottom: 'var(--basis)' }}><Localized id=\"path_editor_use_as_info\" /></em>\n    <MultiButton\n      onChange={handleUseAsChange}\n      ariaLabel={getString('path_editor_use_as_label')}\n      defaultValue={useAs}\n      items={[\n        { value: 'redirect', title: getString('path_editor_use_as_value_redirect') },\n        { value: 'linklist', title: getString('path_editor_use_as_value_linklist') },\n        { value: '', title: getString('path_editor_use_as_value_nothing') }\n      ]}\n    />\n\n    <br />\n    <br />\n\n    {\n      useAs === 'linklist'\n        ? <>\n          <h3><Localized id=\"path_editor_layout_label\" /></h3>\n          <em className=\"body2\" style={{ display: 'block', marginBottom: 'var(--basis)' }}><Localized id=\"path_editor_layout_info\" /></em>\n          <MultiButton\n            onChange={handleLayoutChange}\n            ariaLabel={getString('path_editor_layout_label')}\n            defaultValue={layout}\n            items={[\n              {\n                value: 'default',\n                title: getString('path_editor_layout_value_default'),\n                icon: <SVG src={layoutDefault} className=\"icon big\" />\n              },\n              {\n                value: 'person',\n                title: getString('path_editor_layout_value_person'),\n                icon: <SVG src={layoutPerson} className=\"icon big\" />\n              },\n            ]}\n          />\n          <br />\n          <br />\n\n          <h3><Localized id=\"path_editor_coverphoto_label\" /></h3>\n          <em className=\"body2\" style={{ display: 'block', marginBottom: 'var(--basis)' }}>\n            <Localized id=\"path_editor_coverphoto_info\" vars={{\n              width: layout === 'person' ? '400px' : '1200px',\n              height: layout === 'person' ? '400px' : '400px',\n              ratio: layout === 'person' ? '1/1' : '3/1',\n            }}/>\n          </em>\n          <FancyInput>\n            {({ setError }) => (\n              <UrlInput\n                onError={setError}\n                onChange={setCoverphoto}\n                value={coverphoto}\n                type=\"text\"\n                placeholder={getString('path_editor_coverphoto_placeholder')}\n                aria-label={getString('path_editor_coverphoto_label')}\n                style={{\n                  marginRight: '0',\n                  marginLeft: '0',\n                  width: 'calc(100% - var(--basis_x2))'\n                }}\n              />\n            )}\n          </FancyInput>\n          {\n            layout !== 'person'\n              ? <>\n                <MultiButton\n                  onChange={setCoverphoto}\n                  ariaLabel={getString('path_editor_coverphoto_label')}\n                  defaultValue={coverphoto}\n                  items={[\n                    {\n                      value: '',\n                      title: 'No Coverphoto', // getString('path_editor_layout_value_default'),\n                    },\n                    ...[\n                      {\n                        value: 'https://assets.volteuropa.org/styles/scale_2880x/public/inline-images/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.jpg',\n                        icon: volt_bonn_thumb,\n                      },\n                      {\n                        value: 'https://assets.volteuropa.org/styles/scale_1920x/public/2020-11/Welcome-to-Volt.jpg',\n                        icon: welcome_to_volt_thumb,\n                      },\n                      {\n                        value: 'https://assets.volteuropa.org/styles/scale_1920x/public/2021-07/20200912_Plakatschlange_Ko%CC%88ln_Matteo%20Sant_Unione_011.jpeg',\n                        icon: plakatschlange_thumb,\n                      },\n                      {\n                        value: 'https://assets.volteuropa.org/styles/scale_1920x/public/2021-05/Aktion.jpeg',\n                        icon: aktion_thumb,\n                      },\n                      // 'https://www.volteuropa.org/stripes/hero-desktop-green.jpg',\n                      // 'https://www.volteuropa.org/stripes/hero-desktop-red.jpg',\n                      // 'https://www.volteuropa.org/stripes/hero-desktop-blue.jpg',\n                      // 'https://www.volteuropa.org/stripes/hero-desktop-yellow.jpg',\n                      // 'https://assets.volteuropa.org/styles/scale_1920x/public/2021-05/Colours-Background-Big.jpeg',\n                      // 'https://www.volteuropa.org/stripes/intermediate-green.jpg',\n                      // 'https://www.volteuropa.org/stripes/intermediate-red.jpg',\n                      // 'https://www.volteuropa.org/stripes/intermediate-blue.jpg',\n                      // 'https://www.volteuropa.org/stripes/intermediate-yellow.jpg',\n                      // 'https://www.volteuropa.org/og-default.png',\n                      // 'https://www.volteuropa.org/hero-default.jpg',\n                    ]\n                    .map(({value = '', icon = ''}) => ({\n                      value,\n                      icon: <img alt=\"\" src={icon} className=\"icon image\" />\n                    }))\n                  ]}\n                />\n                <br />\n              </>\n              : null\n          }\n          <br />\n\n          <h3><Localized id=\"path_editor_imprint_overwrite_label\" /></h3>\n          <em className=\"body2\" style={{ display: 'block', marginBottom: 'var(--basis)' }}>\n            <Localized id=\"path_editor_imprint_overwrite_info\" />\n          </em>\n          <FancyInput>\n            {({ setError }) => (\n              <UrlInput\n                onError={setError}\n                onChange={setImprintOverwrite}\n                defaultValue={imprintOverwrite}\n                type=\"text\"\n                placeholder={getString('path_editor_imprint_overwrite_placeholder')}\n                aria-label={getString('path_editor_imprint_overwrite_label')}\n                style={{\n                  marginRight: '0',\n                  marginLeft: '0',\n                  width: 'calc(100% - var(--basis_x2))'\n                }}\n              />\n            )}\n          </FancyInput>\n\n          <br />\n          <h3><Localized id=\"path_editor_privacy_policy_overwrite_label\" /></h3>\n          <em className=\"body2\" style={{ display: 'block', marginBottom: 'var(--basis)' }}>\n            <Localized id=\"path_editor_privacy_policy_overwrite_info\" />\n          </em>\n          <FancyInput>\n            {({ setError }) => (\n              <UrlInput\n                onError={setError}\n                onChange={setPrivacyPolicyOverwrite}\n                defaultValue={privacyPolicyOverwrite}\n                type=\"text\"\n                placeholder={getString('path_editor_privacy_policy_overwrite_placeholder')}\n                aria-label={getString('path_editor_privacy_policy_overwrite_label')}\n                style={{\n                  marginRight: '0',\n                  marginLeft: '0',\n                  width: 'calc(100% - var(--basis_x2))'\n                }}\n              />\n            )}\n          </FancyInput>\n\n          <br />\n          <br />\n          <Items\n            onChange={handleChange_Items}\n            defaultValue={items}\n          />\n          <br />\n          <br />\n        </>\n        : (\n          useAs === 'redirect'\n            ? <>\n              <h3><Localized id=\"path_editor_redirect_label\" /></h3>\n              <FancyInput>\n                {({ setError }) => (\n                  <UrlInput\n                    onError={setError}\n                    onChange={setRedirect}\n                    type=\"text\"\n                    placeholder={getString('path_editor_redirect_placeholder')}\n                    aria-label={getString('path_editor_redirect_label')}\n                    defaultValue={redirect}\n                    style={{\n                      marginRight: '0',\n                      marginLeft: '0',\n                      width: 'calc(100% - var(--basis_x2))'\n                    }}\n                  />\n                )}\n              </FancyInput>\n              <br />\n              <br />\n            </>\n            : null\n        )\n    }\n    </>\n\n  return <div\n    className={`hasHeader ${classes.editor} ${loadingContent ? classes.loadingContent : ''}`}\n  >\n    <Header\n      title={<a href={`https://volt.link/${code}`} target=\"_blank\" rel=\"noopener noreferrer\"><span className=\"hideOnSmallScreen\">volt.link</span>/{code}</a>}\n      rightActions={canEdit ? rightHeaderActions : null}\n      notificationBanner={\n        savingMessage === null\n          ? null\n          : <p style={{ textAlign: 'center' }}>{savingMessage}</p>\n      }\n    />\n\n    {\n      canEdit\n        ? editor_form\n        : <p style={{ marginTop: 'var(--basis)' }}><Localized id=\"path_editor_edit_permission_error\" /></p>\n    }\n  </div>\n}\n\nexport default withLocalization(Editor)\n","import classes from './App.module.css'\n\nimport {\n  Switch,\n  Route,\n  useRouteMatch,\n} from 'react-router-dom'\n\nimport { withLocalization } from '../fluent/Localized.js'\nimport { useHistory } from 'react-router-dom'\n\nimport Localized from '../fluent/Localized.js'\nimport useUser from '../hooks/useUser.js'\nimport Header from '../components/Header.js'\nimport Chooser from './Chooser.js'\nimport Shortcode from './Shortcode.js'\nimport Editor from './Editor.js'\n\nimport MultiButton from '../components/MultiButton.js'\n\nfunction App({ getString }) {\n  const [, loggedIn] = useUser()\n\n  const history = useHistory()\n  const menuRouteMatch = useRouteMatch(\"/:slug\")\n  const selected_route = menuRouteMatch ? menuRouteMatch.params.slug : ''\n\n  const handleMenu = new_selected => {\n    switch (new_selected) {\n      case 'shortcode':\n        history.push('/shortcode')\n        break\n      case 'list':\n        window.open(`${window.domains.backend}list`,'_blank')\n        break\n      default:\n        history.push('/')\n    }\n  }\n\n  const loginLogoutButton = (\n    loggedIn\n      ? <>\n        <MultiButton\n          onChange={handleMenu}\n          ariaLabel={getString('main_menu')}\n          defaultValue={selected_route}\n          items={[\n            { value: '', title: getString('menu_micropages') },\n            { value: 'shortcode', title: getString('menu_url_shortener') },\n            { value: 'list', title: getString('menu_list') },\n          ]}\n        />\n        <a href={`${window.domains.backend}logout?redirect_to=${encodeURIComponent(window.location.toString())}`}>\n          <button className=\"red\" style={{ marginRight: '0' }}><Localized id=\"logout\"/></button>\n        </a>\n      </>\n      : <a href={`${window.domains.backend}login?redirect_to=${encodeURIComponent(window.location.toString())}`}>\n        <button style={{ marginRight: '0' }}><Localized id=\"login\"/></button>\n      </a>\n  )\n\n  return (<>\n    <div className={classes.app}>\n      {\n        !loggedIn\n          ? <div>\n            <Header\n              title=\"edit.volt.link\"\n              rightActions={loginLogoutButton}\n            />\n            <p><Localized id=\"login_prompt\"/></p>\n          </div>\n          : <>\n              <Switch>\n                <Route path=\"/edit/:code\">\n                  <Editor />\n                </Route>\n                <Route path=\"/shortcode\">\n                  <Shortcode rightHeaderActions={loginLogoutButton} />\n                </Route>\n                <Route path=\"/\">\n                  <Chooser rightHeaderActions={loginLogoutButton} />\n                </Route>\n              </Switch>\n            </>\n      }\n    </div>\n    <footer>\n      <a href=\"mailto:thomas.rosen@volteuropa.org\"><Localized id=\"contact\" /></a>\n      &nbsp; • &nbsp;\n      <a href=\"https://github.com/voltbonn/edit.volt.link\" target=\"_blank\" rel=\"noopener noreferrer\"><Localized id=\"source_code\" /></a>\n    </footer>\n  </>)\n}\n\nexport default withLocalization(App)\n","import React, { useEffect, useState } from 'react'\n\n// https://projectfluent.org/play/\n\n// import { LocalizationProvider, Localized } from '@fluent/react' // '@fluent/react/compat'\nimport { ReactLocalization, LocalizationProvider } from '@fluent/react'\nimport { FluentBundle, FluentResource } from '@fluent/bundle'\nimport { negotiateLanguages } from '@fluent/langneg'\n\n\nexport const locales = {\n  de: 'Deutsch',\n  en: 'English',\n  // es: 'Español',\n  // pt: 'Português',\n  // fr: 'Français',\n  // it: 'Italiano',\n  // nl: 'Dutch',\n  // pl: 'Polska',\n  // ru: 'Pусский',\n}\n\nconst _supportedLocales_ = Object.keys(locales)\nconst _defaultLocale_ = 'en'\n\n\nasync function fetchMessages(locale) {\n  const path = await import('../locales/' + locale + '.ftl')\n\n  const response = await fetch(path.default)\n  const messages = await response.text()\n\n  return { [locale]: new FluentResource(messages) }\n}\n\nfunction getDefaultBundles() {\n  const bundle = new FluentBundle('')\n  bundle.addResource(new FluentResource(''))\n  return new ReactLocalization([bundle])\n}\n\nasync function createMessagesGenerator(currentLocales) {\n  const fetched = await Promise.all(\n    currentLocales.map(fetchMessages)\n  )\n  const messages = fetched.reduce(\n    (obj, cur) => Object.assign(obj, cur)\n  )\n\n  return function* generateBundles() {\n    for (const locale of currentLocales) {\n      const bundle = new FluentBundle(locale)\n      bundle.addResource(messages[locale])\n      yield bundle\n    }\n  }\n}\n\nexport function AppLocalizationProvider({ userLocales, children, onLocaleChange }) {\n  const [bundles, setBundles] = useState(getDefaultBundles())\n\n  useEffect(() => {\n    async function loadBundles() {\n      const currentLocales = negotiateLanguages(\n        userLocales,\n        _supportedLocales_,\n        { defaultLocale: _defaultLocale_ }\n      )\n\n      if (!!onLocaleChange) {\n        onLocaleChange(currentLocales)\n      }\n\n      const generateBundles = await createMessagesGenerator(currentLocales)\n\n      const new_bundles = new ReactLocalization(generateBundles())\n      new_bundles.userLocales = userLocales\n      new_bundles.defaultLocale = _defaultLocale_\n      new_bundles.supportedLocales = _supportedLocales_\n      setBundles(new_bundles)\n    }\n    loadBundles()\n  }, [userLocales, onLocaleChange])\n\n  if (!bundles) {\n    // Show a loader.\n    return <div>Loading texts…</div>\n  }\n\n  return <LocalizationProvider l10n={bundles}>\n    {children}\n  </LocalizationProvider>\n}\n\n","import React, { useState, useEffect, useCallback } from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './pages/App.js'\n// import reportWebVitals from './reportWebVitals'\nimport { BrowserRouter as Router } from 'react-router-dom'\n\nimport 'intl-pluralrules'\nimport { AppLocalizationProvider, locales } from './fluent/l10n.js'\n\nwindow.domains = {\n  frontend: 'https://edit.volt.link',\n  // frontend: 'http://localhost:3000/',\n  backend: 'https://volt.link/',\n  // backend: 'http://localhost:4000/',\n}\n\nfunction AppLanguageWrapper() {\n  // const [userLocales, setUserLocales] = useState(['de'])\n  const [userLocales, setUserLocales] = useState(navigator.languages)\n  const [currentLocale, setCurrentLocale] = useState(null)\n\n  useEffect(() => {\n    if (!!window.umami) {\n      let systemLocales = navigator.languages\n      if (!!systemLocales || Array.isArray(systemLocales)) {\n        for (let locale of systemLocales) {\n          locale = locale.toLowerCase() // Not really correct but the system locales sadly don't conform to the standard.\n\n          const language = locale.split('-')[0]\n          if (language !== locale) {\n            window.umami.trackEvent('L: ' + language) // Log just the language.\n          }\n          window.umami.trackEvent('L: ' + locale) // Log the full locale.\n        }\n      }\n    }\n  }, [])\n\n  const handleLanguageChange = useCallback(event => {\n    setUserLocales([event.target.dataset.locale])\n  }, [setUserLocales])\n\n  const handleCurrentLocalesChange = useCallback(currentLocales => {\n    setCurrentLocale(currentLocales.length > 0 ? currentLocales[0] : '')\n  }, [setCurrentLocale])\n\n  return <AppLocalizationProvider\n    key=\"AppLocalizationProvider\"\n    userLocales={userLocales}\n    onLocaleChange={handleCurrentLocalesChange}\n  >\n    <App locales={locales} currentLocale={currentLocale} onLanguageChange={handleLanguageChange} />\n  </AppLocalizationProvider>\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <AppLanguageWrapper />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals()\n"],"sourceRoot":""}